<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>2&nbsp;Beginning Typed Racket</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">The Typed Racket Guide</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="quick.html" class="tocviewlink" pltdoc="x">Quick Start</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Beginning Typed Racket</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="more.html" class="tocviewlink" pltdoc="x">Specifying Types</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="types.html" class="tocviewlink" pltdoc="x">Types in Typed Racket</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="optimization.html" class="tocviewlink" pltdoc="x">Optimization in Typed Racket</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>2&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Beginning Typed Racket</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="#(part._.Datatypes_and_.Unions)" class="tocviewlink" pltdoc="x">Datatypes and Unions</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="#(part._.Type_.Errors)" class="tocviewlink" pltdoc="x">Type Errors</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#(part._.Datatypes_and_.Unions)" class="tocsubseclink" pltdoc="x">Datatypes and Unions</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#(part._.Type_.Errors)" class="tocsubseclink" pltdoc="x">Type Errors</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="version">Version: 5.2.1</span></div><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.2.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.2.1&quot;);">top</a></span><span class="navright"><a href="quick.html" title="backward to &quot;1 Quick Start&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;The Typed Racket Guide&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="more.html" title="forward to &quot;3 Specifying Types&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>2<tt>&nbsp;</tt><a name="(part._beginning)"></a>Beginning Typed Racket</h3><p>Recall the typed module from <a href="quick.html" pltdoc="x">Quick Start</a>:</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><a href="../guide/Module_Syntax.html#(part._hash-lang)" class="RktModLink" pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="../ts-reference/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">typed/racket</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._struct~3a))" class="RktStxLink" pltdoc="x">struct:</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pt</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._~3a))" class="RktStxLink" pltdoc="x">:</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._~3a))" class="RktStxLink" pltdoc="x">:</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._~3a))" class="RktStxLink" pltdoc="x">:</a></span><span class="hspace">&nbsp;</span><span class="RktSym">distance</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pt</span><span class="hspace">&nbsp;</span><span class="RktSym">pt</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types-extra..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">distance</span><span class="hspace">&nbsp;</span><span class="RktSym">p1</span><span class="hspace">&nbsp;</span><span class="RktSym">p2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._sqrt))" class="RktValLink" pltdoc="x">sqrt</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._sqr))" class="RktValLink" pltdoc="x">sqr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pt-x</span><span class="hspace">&nbsp;</span><span class="RktSym">p2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pt-x</span><span class="hspace">&nbsp;</span><span class="RktSym">p1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._sqr))" class="RktValLink" pltdoc="x">sqr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pt-y</span><span class="hspace">&nbsp;</span><span class="RktSym">p2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pt-y</span><span class="hspace">&nbsp;</span><span class="RktSym">p1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Let us consider each element of this program in turn.</p><blockquote class="SCodeFlow"><p><a href="../guide/Module_Syntax.html#(part._hash-lang)" class="RktModLink" pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="../ts-reference/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">typed/racket</span></a></p></blockquote><p>This specifies that the module is written in the
<a href="../ts-reference/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">typed/racket</span></a> language, which is a typed version of the
<a href="../reference/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a> language.  Typed versions of other languages
are provided as well; for example, the
<a href="../ts-reference/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">typed/racket/base</span></a> language corresponds to
<a href="../reference/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket/base</span></a>.</p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._struct~3a))" class="RktStxLink" pltdoc="x">struct:</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pt</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._~3a))" class="RktStxLink" pltdoc="x">:</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._~3a))" class="RktStxLink" pltdoc="x">:</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote><p><div class="SIntrapara"><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Many forms in Typed Racket have the same name as the
untyped forms, with a <span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._~3a))" class="RktStxLink" pltdoc="x">:</a></span> suffix.</p></blockquote></blockquote></blockquote></div><div class="SIntrapara">This defines a new structure, name <span class="RktSym">pt</span>, with two fields,
<span class="RktSym">x</span> and <span class="RktSym">y</span>.  Both fields are specified to have the type
<span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span>, which corresponds to the <a href="../reference/numbers.html#(tech._real._number)" class="techoutside" pltdoc="x"><span class="techinside">real numbers</span></a>.
 The
<span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._struct~3a))" class="RktStxLink" pltdoc="x">struct:</a></span> form corresponds to the <span class="RktSym"><a href="../reference/define-struct.html#(form._((lib._racket/private/base..rkt)._struct))" class="RktStxLink" pltdoc="x">struct</a></span>
form from <a href="../reference/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a>&#8212;<wbr></wbr>when porting a program from
<a href="../reference/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a> to <a href="../ts-reference/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">typed/racket</span></a>, uses of
<span class="RktSym"><a href="../reference/define-struct.html#(form._((lib._racket/private/base..rkt)._struct))" class="RktStxLink" pltdoc="x">struct</a></span> should be changed to <span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._struct~3a))" class="RktStxLink" pltdoc="x">struct:</a></span>.</div></p><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._~3a))" class="RktStxLink" pltdoc="x">:</a></span><span class="hspace">&nbsp;</span><span class="RktSym">distance</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pt</span><span class="hspace">&nbsp;</span><span class="RktSym">pt</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types-extra..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote><p>This declares that <span class="RktSym">distance</span> has the type <span class="RktPn">(</span><span class="RktSym">pt</span><span class="stt"> </span><span class="RktSym">pt</span><span class="stt"> </span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types-extra..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="stt"> </span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span><span class="RktPn">)</span>.</p><p>The type <span class="RktPn">(</span><span class="RktSym">pt</span><span class="stt"> </span><span class="RktSym">pt</span><span class="stt"> </span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types-extra..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="stt"> </span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span><span class="RktPn">)</span> is a function type, that is, the type
of a procedure.  The input type, or domain, is two arguments of
type <span class="RktSym">pt</span>, which refers to an instance of the <span class="RktSym">pt</span>
structure.  The <span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types-extra..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span> both indicates that this is a function
type and separates the domain from the range, or output type, in this
case <span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">distance</span><span class="hspace">&nbsp;</span><span class="RktSym">p1</span><span class="hspace">&nbsp;</span><span class="RktSym">p2</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._sqrt))" class="RktValLink" pltdoc="x">sqrt</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._sqr))" class="RktValLink" pltdoc="x">sqr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pt-x</span><span class="hspace">&nbsp;</span><span class="RktSym">p2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pt-x</span><span class="hspace">&nbsp;</span><span class="RktSym">p1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._sqr))" class="RktValLink" pltdoc="x">sqr</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pt-y</span><span class="hspace">&nbsp;</span><span class="RktSym">p2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pt-y</span><span class="hspace">&nbsp;</span><span class="RktSym">p1</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>This definition is unchanged from the untyped version of the code.
The goal of Typed Racket is to allow almost all definitions to be
typechecked without change.  The typechecker verifies that the body of
the function has the type <span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span>, under the assumption that
<span class="RktSym">p1</span> and <span class="RktSym">p2</span> have type <span class="RktSym">pt</span>, taking these types
from the earlier type declaration.  Since the body does have this type,
the program is accepted.</p><h4>2.1<tt>&nbsp;</tt><a name="(part._.Datatypes_and_.Unions)"></a>Datatypes and Unions</h4><p>Many data structures involve multiple variants.  In Typed Racket, we
represent these using <span style="font-style: italic">union types</span>, written <span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types-extra..rkt)._.U))" class="RktStxLink" pltdoc="x">U</a></span><span class="stt"> </span><span class="RktSym">t1</span><span class="stt"> </span><span class="RktSym">t2</span><span class="stt"> </span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span>.</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><a href="../guide/Module_Syntax.html#(part._hash-lang)" class="RktModLink" pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="../ts-reference/index.html" class="RktModLink" pltdoc="x"><span class="RktSym">typed/racket</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed/racket/base..rkt)._define-type))" class="RktStxLink" pltdoc="x">define-type</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Tree</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types-extra..rkt)._.U))" class="RktStxLink" pltdoc="x">U</a></span><span class="hspace">&nbsp;</span><span class="RktSym">leaf</span><span class="hspace">&nbsp;</span><span class="RktSym">node</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._struct~3a))" class="RktStxLink" pltdoc="x">struct:</a></span><span class="hspace">&nbsp;</span><span class="RktSym">leaf</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">val</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._~3a))" class="RktStxLink" pltdoc="x">:</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Number))" class="RktStxLink" pltdoc="x">Number</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._struct~3a))" class="RktStxLink" pltdoc="x">struct:</a></span><span class="hspace">&nbsp;</span><span class="RktSym">node</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">left</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._~3a))" class="RktStxLink" pltdoc="x">:</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Tree</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktSym">right</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._~3a))" class="RktStxLink" pltdoc="x">:</a></span><span class="hspace">&nbsp;</span><span class="RktSym">Tree</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._~3a))" class="RktStxLink" pltdoc="x">:</a></span><span class="hspace">&nbsp;</span><span class="RktSym">tree-height</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Tree</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types-extra..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Integer))" class="RktStxLink" pltdoc="x">Integer</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tree-height</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">leaf?</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._else))" class="RktStxLink" pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._max))" class="RktValLink" pltdoc="x">max</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tree-height</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">node-left</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tree-height</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">node-right</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/special-forms.html#(form._((lib._typed-racket/base-env/prims..rkt)._~3a))" class="RktStxLink" pltdoc="x">:</a></span><span class="hspace">&nbsp;</span><span class="RktSym">tree-sum</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">Tree</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types-extra..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Number))" class="RktStxLink" pltdoc="x">Number</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tree-sum</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span><span class="hspace">&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">leaf?</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">leaf-val</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._else))" class="RktStxLink" pltdoc="x">else</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tree-sum</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">node-left</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">tree-sum</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">node-right</span><span class="hspace">&nbsp;</span><span class="RktSym">t</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>In this module, we have defined two new datatypes: <span class="RktSym">leaf</span> and
<span class="RktSym">node</span>.  We&rsquo;ve also defined the type name <span class="RktSym">Tree</span> to be
<span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types-extra..rkt)._.U))" class="RktStxLink" pltdoc="x">U</a></span><span class="stt"> </span><span class="RktSym">node</span><span class="stt"> </span><span class="RktSym">leaf</span><span class="RktPn">)</span>, which represents a binary tree of numbers.  In
essence, we are saying that the <span class="RktSym">tree-height</span> function accepts
a <span class="RktSym">Tree</span>, which is either a <span class="RktSym">node</span> or a <span class="RktSym">leaf</span>,
and produces a number.</p><p>In order to calculate interesting facts about trees, we have to take
them apart and get at their contents.  But since accessors such as
<span class="RktSym">node-left</span> require a <span class="RktSym">node</span> as input, not a
<span class="RktSym">Tree</span>, we have to determine which kind of input we
were passed.</p><p>For this purpose, we use the predicates that come with each defined
structure.  For example, the <span class="RktSym">leaf?</span> predicate distinguishes
<span class="RktSym">leaf</span>s from all other Typed Racket values.  Therefore, in the
first branch of the <span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._cond))" class="RktStxLink" pltdoc="x">cond</a></span> clause in <span class="RktSym">tree-sum</span>, we know
that <span class="RktSym">t</span> is a <span class="RktSym">leaf</span>, and therefore we can get its value
with the <span class="RktSym">leaf-val</span> function.</p><p>In the else clauses of both functions, we know that <span class="RktSym">t</span> is not
a <span class="RktSym">leaf</span>, and since the type of <span class="RktSym">t</span> was <span class="RktSym">Tree</span> by
process of elimination we can determine that <span class="RktSym">t</span> must be a
<span class="RktSym">node</span>.  Therefore, we can use accessors such as
<span class="RktSym">node-left</span> and <span class="RktSym">node-right</span> with <span class="RktSym">t</span> as input.</p><h4>2.2<tt>&nbsp;</tt><a name="(part._.Type_.Errors)"></a>Type Errors</h4><p>When Typed Racket detects a type error in the module, it raises an
error before running the program.</p><p><table cellspacing="0" class="RktBlk"><tr><td><p>Example:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._add1))" class="RktValLink" pltdoc="x">add1</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"not a number"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktErr">eval:2:0: Type Checker: Expected Number, but got String in:</span></p></td></tr><tr><td><p><span class="RktErr">(quote "not a number")</span></p></td></tr></table></blockquote></td></tr></table></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.2.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.2.1&quot;);">top</a></span><span class="navright"><a href="quick.html" title="backward to &quot;1 Quick Start&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;The Typed Racket Guide&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="more.html" title="forward to &quot;3 Specifying Types&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>