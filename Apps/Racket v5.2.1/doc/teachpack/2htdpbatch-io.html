<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>2.1&nbsp;Batch Input/Output: "batch-io.ss"</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="io.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span style="font-style: italic">How to Design Programs</span> Teachpacks</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="htdp.html" class="tocviewlink" pltdoc="x">Ht<span class="mywbr"> </span>DP Teachpacks</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="2htdp2htdp.html" class="tocviewselflink" pltdoc="x">Ht<span class="mywbr"> </span>DP/<span class="mywbr"> </span>2e Teachpacks</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>2&nbsp;</td><td><a href="2htdp2htdp.html" class="tocviewlink" pltdoc="x">Ht<span class="mywbr"> </span>DP/<span class="mywbr"> </span>2e Teachpacks</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Batch Input/<span class="mywbr"> </span>Output:<span class="mywbr"> </span> <span class="stt">"batch-<wbr></wbr>io.ss"</span><a name="(idx._(gentag._20._(lib._teachpack/teachpack..scrbl)._2htdp))"></a></a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="2htdpimage.html" class="tocviewlink" pltdoc="x">Images:<span class="mywbr"> </span> <span class="stt">"image.ss"</span><a name="(idx._(gentag._21._(lib._teachpack/teachpack..scrbl)._2htdp))"></a></a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="2htdpuniverse.html" class="tocviewlink" pltdoc="x">Worlds and the Universe:<span class="mywbr"> </span> <span class="stt">"universe.ss"</span><a name="(idx._(gentag._22._(lib._teachpack/teachpack..scrbl)._2htdp))"></a></a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="2htdpPlanet_Cute_Images.html" class="tocviewlink" pltdoc="x">Planet Cute Images</a></td></tr><tr><td align="right">2.5&nbsp;</td><td><a href="2htdphtdp-port.html" class="tocviewlink" pltdoc="x">Porting World Programs to Universe</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>2.1&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Batch Input/<span class="mywbr"> </span>Output:<span class="mywbr"> </span> <span class="stt">"batch-<wbr></wbr>io.ss"</span><a name="(idx._(gentag._20._(lib._teachpack/teachpack..scrbl)._2htdp))"></a></a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1.1&nbsp;</td><td><a href="#(part._.I.O_.Functions)" class="tocviewlink" pltdoc="x">IO Functions</a></td></tr><tr><td align="right">2.1.2&nbsp;</td><td><a href="#(part._.Testing)" class="tocviewlink" pltdoc="x">Testing</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1.1<tt>&nbsp;</tt></span><a href="#(part._.I.O_.Functions)" class="tocsubseclink" pltdoc="x">IO Functions</a></td></tr><tr><td><a href="#(def._((lib._2htdp/batch-io..rkt)._read-file))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><span class="RktValLink">read-<wbr></wbr>file</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._2htdp/batch-io..rkt)._read-1strings))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><span class="RktValLink">read-<wbr></wbr>1strings</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._2htdp/batch-io..rkt)._read-lines))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><span class="RktValLink">read-<wbr></wbr>lines</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._2htdp/batch-io..rkt)._read-words))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><span class="RktValLink">read-<wbr></wbr>words</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._2htdp/batch-io..rkt)._read-words/line))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><span class="RktValLink">read-<wbr></wbr>words/<span class="mywbr"> </span>line</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._2htdp/batch-io..rkt)._read-csv-file))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><span class="RktValLink">read-<wbr></wbr>csv-<wbr></wbr>file</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._2htdp/batch-io..rkt)._read-csv-file/rows))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><span class="RktValLink">read-<wbr></wbr>csv-<wbr></wbr>file/<span class="mywbr"> </span>rows</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._2htdp/batch-io..rkt)._write-file))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><span class="RktValLink">write-<wbr></wbr>file</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">2.1.2<tt>&nbsp;</tt></span><a href="#(part._.Testing)" class="tocsubseclink" pltdoc="x">Testing</a></td></tr><tr><td><a href="#(form._((lib._2htdp/batch-io..rkt)._simulate-file))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><span class="RktStxLink">simulate-<wbr></wbr>file</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.2.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.2.1&quot;);">top</a></span><span class="navright"><a href="2htdp2htdp.html" title="backward to &quot;2 HtDP/2e Teachpacks&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="2htdp2htdp.html" title="up to &quot;2 HtDP/2e Teachpacks&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="2htdpimage.html" title="forward to &quot;2.2 Images: &quot;image.ss&quot;&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>2.1<tt>&nbsp;</tt><a name="(part._batch-io)"></a><a name="(mod-path._2htdp/batch-io)"></a>Batch Input/Output: <span class="stt">"batch-io.ss"</span><a name="(idx._(gentag._20._(lib._teachpack/teachpack..scrbl)._2htdp))"></a></h4><div class="SAuthorListBox"><span class="SAuthorList"><p class="author">Matthias Felleisen</p></span></div><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../htdp-langs/beginner.html#(form._((lib._lang/htdp-beginner..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" pltdoc="x"><span class="RktSym">2htdp/batch-io</span></a><span class="RktPn">)</span></td></tr></table></p><p>The batch-io teachpack introduces several functions and a form for reading
 content from files and one function for writing to a file.</p><h5>2.1.1<tt>&nbsp;</tt><a name="(part._.I.O_.Functions)"></a>IO Functions</h5><p><div class="SIntrapara">All functions that read a file consume the name of a file and possibly
 additional arguments. They assume that the specified file exists in the
 same folder as the program; if not they signal an error:
</div><div class="SIntrapara"><ul><li><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" style="display: inline-table; vertical-align: text-top;" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._2htdp/batch-io..rkt)._read-file))"></a><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-file))" class="RktValLink" pltdoc="x">read-file</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Filesystem.html#(def._((quote._~23~25kernel)._file-exists~3f))" class="RktValLink" pltdoc="x">file-exists?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">reads the content of file <span class="RktVar">f</span> and produces it as a string, including newlines .</div></p><p><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><p>Example:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-file))" class="RktValLink" pltdoc="x">read-file</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"data.txt"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">"hello world \n good bye \n\ni am done "</span></p></td></tr></table></blockquote></td></tr></table></div><div class="SIntrapara">assuming the file named <span class="RktVal">"data.txt"</span> has this shape:
</div><div class="SIntrapara"><blockquote class="SCentered"><table cellspacing="0" class="FileBox"><tr><td><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">hello world </span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;</span><span class="stt">good bye </span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt"></span></span><span class="hspace">&nbsp;</span></p></td></tr><tr><td><p><span class="stt"><span class="stt">i am done </span></span></p></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Note how the leading space in the second line translates into the space
between the newline indicator and the word <span class="RktVal">"good"</span> in the result.</div></p></li><li><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" style="display: inline-table; vertical-align: text-top;" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._2htdp/batch-io..rkt)._read-1strings))"></a><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-1strings))" class="RktValLink" pltdoc="x">read-1strings</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">1string?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Filesystem.html#(def._((quote._~23~25kernel)._file-exists~3f))" class="RktValLink" pltdoc="x">file-exists?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">reads the content of file <span class="RktVar">f</span> and produces it as a list of one-char strings, one per character .</div></p><p><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><p>Example:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-1strings))" class="RktValLink" pltdoc="x">read-1strings</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"data.txt"</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0"><tr><td><p><span class="RktRes">'("h"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"e"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"l"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"l"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"o"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">" "</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"w"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"o"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"r"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"l"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"d"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">" "</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"\n"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">" "</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"g"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"o"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"o"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"d"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">" "</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"b"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"y"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"e"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">" "</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"\n"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"\n"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"i"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">" "</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"a"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"m"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">" "</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"d"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"o"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"n"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">"e"</span></p></td></tr><tr><td><p><span class="RktRes"></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRes">" ")</span></p></td></tr></table></td></tr></table></blockquote></td></tr></table></div><div class="SIntrapara">Note how this function reproduces all parts of the file faithfully,
including spaces and newlines.</div></p></li><li><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" style="display: inline-table; vertical-align: text-top;" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._2htdp/batch-io..rkt)._read-lines))"></a><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-lines))" class="RktValLink" pltdoc="x">read-lines</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Filesystem.html#(def._((quote._~23~25kernel)._file-exists~3f))" class="RktValLink" pltdoc="x">file-exists?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">reads the content of file <span class="RktVar">f</span> and produces it as a list of strings, one per line .
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><p>Example:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-lines))" class="RktValLink" pltdoc="x">read-lines</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"data.txt"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'("hello world " " good bye " "" "i am done ")</span></p></td></tr></table></blockquote></td></tr></table></div><div class="SIntrapara">when <span class="RktVal">"data.txt"</span> is the name of the same file as in the preceding
item. And again, the leading space of the second line shows up in the
second string in the list.</div></p></li><li><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" style="display: inline-table; vertical-align: text-top;" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._2htdp/batch-io..rkt)._read-words))"></a><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-words))" class="RktValLink" pltdoc="x">read-words</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Filesystem.html#(def._((quote._~23~25kernel)._file-exists~3f))" class="RktValLink" pltdoc="x">file-exists?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">reads the content of file <span class="RktVar">f</span> and produces it as a list of strings, one per white-space separated token in the file .</div></p><p><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><p>Example:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-words))" class="RktValLink" pltdoc="x">read-words</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"data.txt"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'("hello" "world" "good" "bye" "i" "am" "done")</span></p></td></tr></table></blockquote></td></tr></table></div><div class="SIntrapara">This time, however, the extra leading space of the second line of
<span class="RktVal">"data.txt"</span> has disappeared in the result. The space is considered
a part of the separator that surrounds the word <span class="RktVal">"good"</span>.</div></p></li><li><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" style="display: inline-table; vertical-align: text-top;" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._2htdp/batch-io..rkt)._read-words/line))"></a><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-words/line))" class="RktValLink" pltdoc="x">read-words/line</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Filesystem.html#(def._((quote._~23~25kernel)._file-exists~3f))" class="RktValLink" pltdoc="x">file-exists?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">reads the content of file <span class="RktVar">f</span> and produces it as a list of lists, one per line; each line is represented as a list of white-space separated tokens .</div></p><p><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><p>Example:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-words/line))" class="RktValLink" pltdoc="x">read-words/line</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"data.txt"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(("hello" "world") ("good" "bye") () ("i" "am" "done"))</span></p></td></tr></table></blockquote></td></tr></table></div><div class="SIntrapara">The results is similar to the one that <span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-words))" class="RktValLink" pltdoc="x">read-words</a></span> produces,
except that the organization of the file into lines is preserved.
In particular, the empty third line is represented as an empty list of words.</div></p></li><li><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" style="display: inline-table; vertical-align: text-top;" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._2htdp/batch-io..rkt)._read-csv-file))"></a><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-csv-file))" class="RktValLink" pltdoc="x">read-csv-file</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/Filesystem.html#(def._((quote._~23~25kernel)._file-exists~3f))" class="RktValLink" pltdoc="x">file-exists?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">reads the content of file <span class="RktVar">f</span> and produces it as a list of lists of comma-separated values .</div></p><p><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><p>Example:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-csv-file))" class="RktValLink" pltdoc="x">read-csv-file</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"data.csv"</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(("hello" "world") ("good" "bye") ("i" "am" "done"))</span></p></td></tr></table></blockquote></td></tr></table></div><div class="SIntrapara">where the file named <span class="RktVal">"data.csv"</span> has this shape:
</div><div class="SIntrapara"><blockquote class="SCentered"><table cellspacing="0" class="FileBox"><tr><td><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">hello, world </span></span></p></td></tr><tr><td><p><span class="stt"><span class="hspace">&nbsp;</span><span class="stt">good, bye </span></span></p></td></tr><tr><td><p><span class="stt"><span class="stt">i, am, done </span></span></p></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">It is important to understand that the rows don&rsquo;t have to have the same
length. Here the third line of the file turns into a row of three
elements.</div></p></li><li><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" style="display: inline-table; vertical-align: text-top;" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._2htdp/batch-io..rkt)._read-csv-file/rows))"></a><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-csv-file/rows))" class="RktValLink" pltdoc="x">read-csv-file/rows</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span><span class="RktVar">s</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym">X?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">exists?</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">s</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">X?</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">reads the content of file <span class="RktVar">f</span> and
produces it as list of rows, each constructed via <span class="RktVar">s</span></div></p><p><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><p>Examples:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-csv-file/rows))" class="RktValLink" pltdoc="x">read-csv-file/rows</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"data.csv"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(("hello" "world") ("good" "bye") ("i" "am" "done"))</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-csv-file/rows))" class="RktValLink" pltdoc="x">read-csv-file/rows</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"data.csv"</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._length))" class="RktValLink" pltdoc="x">length</a></span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(2 2 3)</span></p></td></tr></table></blockquote></td></tr></table></div><div class="SIntrapara">The first example shows how <span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-csv-file))" class="RktValLink" pltdoc="x">read-csv-file</a></span> is just a short form
 for <span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._read-csv-file/rows))" class="RktValLink" pltdoc="x">read-csv-file/rows</a></span>; the second one simply counts the
 number of separated tokens and the result is just a list of numbers.
 In many cases, the function argument is used to construct a structure from
 a row.</div></p></li></ul></div></p><p><div class="SIntrapara">There is only one writer function at the moment:
</div><div class="SIntrapara"><ul><li><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" style="display: inline-table; vertical-align: text-top;" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._2htdp/batch-io..rkt)._write-file))"></a><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._write-file))" class="RktValLink" pltdoc="x">write-file</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span><span class="RktVar">cntnt</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">cntnt</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3f))" class="RktValLink" pltdoc="x">string?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">turns <span class="RktVar">cntnt</span> into the content of file <span class="RktVar">f</span>, located in the
same folder (directory) as the program. If the write succeeds, the
function produces the name of the file (<span class="RktVar">f</span>); otherwise it signals
an error.</div></p><p><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><p>Example:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/strings.html#(def._((quote._~23~25kernel)._string~3d~3f))" class="RktValLink" pltdoc="x">string=?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._write-file))" class="RktValLink" pltdoc="x">write-file</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"output.txt"</span><span class="hspace">&nbsp;</span><span class="RktVal">"good bye"</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">"output.txt"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._write-file))" class="RktValLink" pltdoc="x">write-file</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"output.txt"</span><span class="hspace">&nbsp;</span><span class="RktVal">"cruel world"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._2htdp/batch-io..rkt)._write-file))" class="RktValLink" pltdoc="x">write-file</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"output.txt"</span><span class="hspace">&nbsp;</span><span class="RktVal">"cruel world"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">"output.txt"</span></p></td></tr></table></blockquote></td></tr></table></div><div class="SIntrapara">After evaluating this examples, the file named <span class="RktVal">"output.txt"</span>
 looks like this:
 </div><div class="SIntrapara"><blockquote class="SCentered"><table cellspacing="0" class="FileBox"><tr><td><table cellspacing="0"><tr><td><p><span class="stt"><span class="stt">cruel world</span></span></p></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Explain why.</div></p></li></ul></div></p><p><span style="font-weight: bold">Warning</span>: The file IO functions in this teachpack are platform
 dependent. That is, as long as your programs and your files live on the
 same platform, you should not have any problems reading the files that
 programs wrote and vice versa. If, however, one of your programs writes a
 file on a Windows operating system and if you then copy this output file
 to a Mac, reading the copied text file may produce extraneous &ldquo;return&rdquo;
 characters. Note that this describes only one example of possible
 malfunction; there are other cases when trans-platform actions may cause
 this teachpack to fail.</p><h5>2.1.2<tt>&nbsp;</tt><a name="(part._.Testing)"></a>Testing</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(form._((lib._2htdp/batch-io..rkt)._simulate-file))"></a><span title="Provided from: 2htdp/batch-io"><span class="RktSym"><a href="#(form._((lib._2htdp/batch-io..rkt)._simulate-file))" class="RktStxLink" pltdoc="x">simulate-file</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">process</span><span class="hspace">&nbsp;</span><span class="RktVar">str</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">simulates a file system for the function <span class="RktVar">process</span>, which reads a
file and may produce one. Note: this form is under development and will be
documented in a precise manner after it is finalized and useful for a wide
audience.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.2.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.2.1&quot;);">top</a></span><span class="navright"><a href="2htdp2htdp.html" title="backward to &quot;2 HtDP/2e Teachpacks&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="2htdp2htdp.html" title="up to &quot;2 HtDP/2e Teachpacks&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="2htdpimage.html" title="forward to &quot;2.2 Images: &quot;image.ss&quot;&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>