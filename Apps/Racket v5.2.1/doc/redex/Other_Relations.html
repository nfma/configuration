<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>5&nbsp;Other Relations</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Redex:<span class="mywbr"> </span> Practical Semantics Engineering</a></td></tr></table></div><div class="tocviewsublistonly" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Patterns.html" class="tocviewlink" pltdoc="x">Patterns</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Terms.html" class="tocviewlink" pltdoc="x">Terms</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Languages.html" class="tocviewlink" pltdoc="x">Languages</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Reduction_Relations.html" class="tocviewlink" pltdoc="x">Reduction Relations</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Other Relations</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Testing.html" class="tocviewlink" pltdoc="x">Testing</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="GUI.html" class="tocviewlink" pltdoc="x">GUI</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Typesetting.html" class="tocviewlink" pltdoc="x">Typesetting</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-metafunction))" class="tocsublink" pltdoc="x"><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>metafunction</span></span></span></a></td></tr><tr><td><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-metafunction/extension))" class="tocsublink" pltdoc="x"><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>metafunction/<span class="mywbr"> </span>extension</span></span></span></a></td></tr><tr><td><a href="#(form._((lib._redex/reduction-semantics..rkt)._in-domain~3f))" class="tocsublink" pltdoc="x"><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><span class="RktStxLink">in-<wbr></wbr>domain?</span></span></span></a></td></tr><tr><td><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))" class="tocsublink" pltdoc="x"><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>judgment-<wbr></wbr>form</span></span></span></a></td></tr><tr><td><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="tocsublink" pltdoc="x"><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><span class="RktStxLink">judgment-<wbr></wbr>holds</span></span></span></a></td></tr><tr><td><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="tocsublink" pltdoc="x"><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><span class="RktStxLink">I</span></span></span></a></td></tr><tr><td><a href="#(form._((lib._redex/reduction-semantics..rkt)._.O))" class="tocsublink" pltdoc="x"><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><span class="RktStxLink">O</span></span></span></a></td></tr><tr><td><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-relation))" class="tocsublink" pltdoc="x"><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><span class="RktStxLink">define-<wbr></wbr>relation</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._redex/reduction-semantics..rkt)._current-traced-metafunctions))" class="tocsublink" pltdoc="x"><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>traced-<wbr></wbr>metafunctions</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.2.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.2.1&quot;);">top</a></span><span class="navright"><a href="Reduction_Relations.html" title="backward to &quot;4 Reduction Relations&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Redex: Practical Semantics Engineering&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Testing.html" title="forward to &quot;6 Testing&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>5<tt>&nbsp;</tt><a name="(part._.Other_.Relations)"></a>Other Relations</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><a name="(form._((lib._redex/reduction-semantics..rkt)._define-metafunction))"></a><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-metafunction))" class="RktStxLink" pltdoc="x">define-metafunction</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">language</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">metafunction-contract</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><a href="Terms.html#(tech._term)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">term</span></span></a><span class="hspace">&nbsp;</span><span class="RktVar">metafunction-extras</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">metafunction-contract</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktVar">range</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">range</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a><span class="hspace">&nbsp;</span><span class="RktVar">or</span><span class="hspace">&nbsp;</span><span class="RktVar">range</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a><span class="hspace">&nbsp;</span><span class="RktVar">&#8744;</span><span class="hspace">&nbsp;</span><span class="RktVar">range</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a><span class="hspace">&nbsp;</span><span class="RktVar">&#8746;</span><span class="hspace">&nbsp;</span><span class="RktVar">range</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">metafunction-extras</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">side-condition</span><span class="hspace">&nbsp;</span><span class="RktVar">racket-expression</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">side-condition/hidden</span><span class="hspace">&nbsp;</span><span class="RktVar">racket-expression</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">where</span><span class="hspace">&nbsp;</span><span class="RktVar">pat</span><span class="hspace">&nbsp;</span><a href="Terms.html#(tech._term)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">term</span></span></a><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">where/hidden</span><span class="hspace">&nbsp;</span><span class="RktVar">pat</span><span class="hspace">&nbsp;</span><a href="Terms.html#(tech._term)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">term</span></span></a><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">judgment-form-id</span><span class="hspace">&nbsp;</span><span class="RktVar">pat/term</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">The <span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-metafunction))" class="RktStxLink" pltdoc="x">define-metafunction</a></span> form builds a function on
sexpressions according to the pattern and right-hand-side
expressions. The first argument indicates the language used
to resolve non-terminals in the pattern expressions. Each of
the rhs-expressions is implicitly wrapped in <a href="Terms.html#(tech._term)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">term</span></span></a>.</div></p><p>The <span class="RktSym">side-condition</span>, <span class="RktSym">hidden-side-condition</span>,
<span class="RktSym">where</span>, and <span class="RktSym">where/hidden</span> clauses behave as
in the <span class="RktSym"><a href="Reduction_Relations.html#(form._((lib._redex/reduction-semantics..rkt)._reduction-relation))" class="RktStxLink" pltdoc="x">reduction-relation</a></span> form.</p><p>Raises an exception recognized by <span class="RktSym"><a href="Terms.html#(def._((lib._redex/reduction-semantics..rkt)._exn~3afail~3aredex~3f))" class="RktValLink" pltdoc="x">exn:fail:redex?</a></span> if
no clauses match, if one of the clauses matches multiple ways
(and that leads to different results for the different matches),
or if the contract is violated.</p><p>Note that metafunctions are assumed to always return the same results
for the same inputs, and their results are cached, unless
<span class="RktSym"><a href="Patterns.html#(def._((lib._redex/reduction-semantics..rkt)._caching-enabled~3f))" class="RktValLink" pltdoc="x">caching-enabled?</a></span> is set to <span class="RktVal">#f</span>. Accordingly, if a
metafunction is called with the same inputs twice, then its body is
only evaluated a single time.</p><p>As an example, these metafunctions finds the free variables in
an expression in the lc-lang above:</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-metafunction))" class="RktStxLink" pltdoc="x">define-metafunction</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lc-lang</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">free-vars</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">free-vars</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">e_1</span><span class="hspace">&nbsp;</span><span class="RktSym">e_2</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVar">&#8746;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">free-vars</span><span class="hspace">&nbsp;</span><span class="RktSym">e_1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">free-vars</span><span class="hspace">&nbsp;</span><span class="RktSym">e_2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">free-vars</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">free-vars</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">free-vars</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>The first argument to define-metafunction is the grammar
(defined above). Following that are three cases, one for
each variation of expressions (e in lc-lang). The free variables of an
application are the free variables of each of the subterms;
the free variables of a variable is just the variable
itself, and the free variables of a lambda expression are
the free variables of the body, minus the bound parameters.</p><p>Here are the helper metafunctions used above.</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-metafunction))" class="RktStxLink" pltdoc="x">define-metafunction</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lc-lang</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">&#8746;</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVar">&#8746;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_1</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_2</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_3</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktVar">&#8746;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_1</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x_2</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_3</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVar">&#8746;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_1</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_1</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVar">&#8746;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-metafunction))" class="RktStxLink" pltdoc="x">define-metafunction</a></span><span class="hspace">&nbsp;</span><span class="RktSym">lc-lang</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_1</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x_2</span><span class="hspace">&nbsp;</span><span class="RktSym">x_3</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_2</span><span class="hspace">&nbsp;</span><span class="RktSym">x_4</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_1</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x_3</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_2</span><span class="hspace">&nbsp;</span><span class="RktSym">x_4</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">side-condition</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._not))" class="RktValLink" pltdoc="x">not</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((lib._racket/private/list..rkt)._memq))" class="RktValLink" pltdoc="x">memq</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Terms.html#(form._((lib._redex/reduction-semantics..rkt)._term))" class="RktStxLink" pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x_2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Terms.html#(form._((lib._redex/reduction-semantics..rkt)._term))" class="RktStxLink" pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_3</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_1</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_2</span><span class="hspace">&nbsp;</span><span class="RktSym">x_3</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x"><span class="nobreak">-</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_1</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x_3</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p>Note the side-condition in the second case of <span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x"><span class="nobreak">-</span></a></span>. It
ensures that there is a unique match for that case. Without
it, <span class="RktPn">(</span><span class="RktSym"><a href="Terms.html#(form._((lib._redex/reduction-semantics..rkt)._term))" class="RktStxLink" pltdoc="x">term</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._-))" class="RktValLink" pltdoc="x"><span class="nobreak">-</span></a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">x</span><span class="stt"> </span><span class="RktSym">x</span><span class="RktPn">)</span><span class="stt"> </span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span> would lead to an ambiguous
match.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><a name="(form._((lib._redex/reduction-semantics..rkt)._define-metafunction/extension))"></a><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-metafunction/extension))" class="RktStxLink" pltdoc="x">define-metafunction/extension</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">f</span><span class="hspace">&nbsp;</span><span class="RktVar">language</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">metafunction-contract</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVar">g</span><span class="hspace">&nbsp;</span><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><a href="Terms.html#(tech._term)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">term</span></span></a><span class="hspace">&nbsp;</span><span class="RktVar">metafunction-extras</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Defines a metafunction <span class="RktVar">g</span> as an extension of an existing
metafunction <span class="RktVar">f</span>. The metafunction <span class="RktVar">g</span> behaves as
if <span class="RktVar">f</span>&rsquo;s clauses were appended to its definition (with
occurrences of <span class="RktVar">f</span> changed to <span class="RktVar">g</span> in the inherited
clauses).</div></p><p>For example, <span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-metafunction/extension))" class="RktStxLink" pltdoc="x">define-metafunction/extension</a></span> may be used to extend
the free-vars function above to the forms introduced by the language
lc-num-lang.</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-metafunction/extension))" class="RktStxLink" pltdoc="x">define-metafunction/extension</a></span><span class="hspace">&nbsp;</span><span class="RktSym">free-vars</span><span class="hspace">&nbsp;</span><span class="RktSym">lc-num-lang</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">free-vars-num</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">e</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">free-vars-num</span><span class="hspace">&nbsp;</span><span class="RktSym">number</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">free-vars-num</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._+))" class="RktValLink" pltdoc="x">+</a></span><span class="hspace">&nbsp;</span><span class="RktSym">e_1</span><span class="hspace">&nbsp;</span><span class="RktSym">e_2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#8746;</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">free-vars-num</span><span class="hspace">&nbsp;</span><span class="RktSym">e_1</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">free-vars-num</span><span class="hspace">&nbsp;</span><span class="RktSym">e_2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(form._((lib._redex/reduction-semantics..rkt)._in-domain~3f))"></a><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._in-domain~3f))" class="RktStxLink" pltdoc="x">in-domain?</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">metafunction-name</span><span class="hspace">&nbsp;</span><a href="Terms.html#(tech._term)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">term</span></span></a><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if the inputs specified to <span class="RktVar">metafunction-name</span> are
legtimate inputs according to <span class="RktVar">metafunction-name</span>&rsquo;s contract,
and <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><a name="(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))"></a><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))" class="RktStxLink" pltdoc="x">define-judgment-form</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">language</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">option</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">rule</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">option</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">mode-spec</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">contract-spec</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">mode-spec</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">form-id</span><span class="hspace">&nbsp;</span><span class="RktVar">pos-use</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">contract-spec</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:contract</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktVar">form-id</span><span class="hspace">&nbsp;</span><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">pos-use</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.O))" class="RktStxLink" pltdoc="x">O</a></span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">rule</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">[</span><span class="RktVar">conclusion</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktVar">premise</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">[</span><span class="RktVar">premise</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktVar">dashes</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktVar">conclusion</span><span class="RktPn">]</span></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">conclusion</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">form-id</span><span class="hspace">&nbsp;</span><span class="RktVar">pat/term</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">premise</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">judgment-form-id</span><span class="hspace">&nbsp;</span><span class="RktVar">pat/term</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-ellipsis</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">where</span><span class="hspace">&nbsp;</span><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a><span class="hspace">&nbsp;</span><a href="Terms.html#(tech._term)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">term</span></span></a><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktSym">where/hidden</span><span class="hspace">&nbsp;</span><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a><span class="hspace">&nbsp;</span><a href="Terms.html#(tech._term)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">term</span></span></a><span class="RktPn">)</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">pat/term</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><a href="Terms.html#(tech._term)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">term</span></span></a></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">maybe-ellipsis</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktMeta">...</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td></tr><tr><td align="right" valign="baseline"><span class="RktVar">dashes</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">---</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">----</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">-----</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktSym">etc.</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Defines <span class="RktVar">form-id</span> as a relation on terms via a set of inference rules.
Each rule must be such that its premises can be evaluated left-to-right
without &ldquo;guessing&rdquo; values for any of their pattern variables. Redex checks this
property using the mandatory <span class="RktVar">mode-spec</span> declaration, which partitions positions
into inputs <span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span> and outputs <span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.O))" class="RktStxLink" pltdoc="x">O</a></span>. Output positions in conclusions
and input positions in premises must be <a href="Terms.html#(tech._term)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">term</span></span></a>s with no uses of
<span class="RktSym"><a href="../reference/quasiquote.html#(form._((quote._~23~25kernel)._unquote))" class="RktStxLink" pltdoc="x">unquote</a></span>; input positions in conclusions and output positions in
premises must be <a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a>s. When the optional <span class="RktVar">contract-spec</span>
declaration is present, Redex dynamically checks that the terms flowing through
these positions match the provided patterns, raising an exception recognized by
<span class="RktSym">exn:fail:redex</span> if not.</div></p><p><div class="SIntrapara">For example, the following defines addition on natural numbers:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Languages.html#(form._((lib._redex/reduction-semantics..rkt)._define-language))" class="RktStxLink" pltdoc="x">define-language</a></span><span class="hspace">&nbsp;</span><span class="RktSym">nats</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))" class="RktStxLink" pltdoc="x">define-judgment-form</a></span><span class="hspace">&nbsp;</span><span class="RktSym">nats</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sum</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.O))" class="RktStxLink" pltdoc="x">O</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:contract</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sum</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">sum</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">sum</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n_1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n_2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n_3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sum</span><span class="hspace">&nbsp;</span><span class="RktSym">n_1</span><span class="hspace">&nbsp;</span><span class="RktSym">n_2</span><span class="hspace">&nbsp;</span><span class="RktSym">n_3</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr></table></blockquote></div></p><p><div class="SIntrapara">The <span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span> form checks whether a relation holds for any
assignment of pattern variables in output positions.
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><p>Examples:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sum</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sum</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sum</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr></table></blockquote></td></tr></table></div><div class="SIntrapara">Alternatively, this form constructs a list of terms based on the satisfying
pattern variable assignments.
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><p>Examples:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sum</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(z)</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sum</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'()</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sum</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'((s z))</span></p></td></tr></table></blockquote></td></tr></table></div></p><p><div class="SIntrapara">Declaring different modes for the same inference rules enables different forms
of computation. For example, the following mode allows <span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span>
to compute all pairs with a given sum.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))" class="RktStxLink" pltdoc="x">define-judgment-form</a></span><span class="hspace">&nbsp;</span><span class="RktSym">nats</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sumr</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.O))" class="RktStxLink" pltdoc="x">O</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.O))" class="RktStxLink" pltdoc="x">O</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:contract</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sumr</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">sumr</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">sumr</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n_1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n_2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n_3</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sumr</span><span class="hspace">&nbsp;</span><span class="RktSym">n_1</span><span class="hspace">&nbsp;</span><span class="RktSym">n_2</span><span class="hspace">&nbsp;</span><span class="RktSym">n_3</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">sumr</span><span class="hspace">&nbsp;</span><span class="RktSym">n_1</span><span class="hspace">&nbsp;</span><span class="RktSym">n_2</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n_1</span><span class="hspace">&nbsp;</span><span class="RktSym">n_2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">'(((s (s z)) z) ((s z) (s z)) (z (s (s z))))</span></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara">A rule&rsquo;s <span class="RktSym">where</span> and <span class="RktSym">where/hidden</span> premises behave as in
<span class="RktSym"><a href="Reduction_Relations.html#(form._((lib._redex/reduction-semantics..rkt)._reduction-relation))" class="RktStxLink" pltdoc="x">reduction-relation</a></span> and <span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-metafunction))" class="RktStxLink" pltdoc="x">define-metafunction</a></span>.
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><p>Examples:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))" class="RktStxLink" pltdoc="x">define-judgment-form</a></span><span class="hspace">&nbsp;</span><span class="RktSym">nats</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">le</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:contract</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">le</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">le</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">le</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n_1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n_2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">le</span><span class="hspace">&nbsp;</span><span class="RktSym">n_1</span><span class="hspace">&nbsp;</span><span class="RktSym">n_2</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-metafunction))" class="RktStxLink" pltdoc="x">define-metafunction</a></span><span class="hspace">&nbsp;</span><span class="RktSym">nats</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">pred</span><span class="hspace">&nbsp;</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/if.html#(form._((lib._racket/private/letstx-scheme..rkt)._or))" class="RktStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">pred</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">pred</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))" class="RktStxLink" pltdoc="x">define-judgment-form</a></span><span class="hspace">&nbsp;</span><span class="RktSym">nats</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gt</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:contract</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gt</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">gt</span><span class="hspace">&nbsp;</span><span class="RktSym">n_1</span><span class="hspace">&nbsp;</span><span class="RktSym">n_2</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">where</span><span class="hspace">&nbsp;</span><span class="RktSym">n_3</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">pred</span><span class="hspace">&nbsp;</span><span class="RktSym">n_1</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">le</span><span class="hspace">&nbsp;</span><span class="RktSym">n_2</span><span class="hspace">&nbsp;</span><span class="RktSym">n_3</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gt</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">gt</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr></table></blockquote></td></tr></table></div></p><p><div class="SIntrapara">A literal ellipsis may follow a judgment premise when a template in one of the
judgment&rsquo;s input positions contains a pattern variable bound at ellipsis-depth
one.
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><p>Examples:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))" class="RktStxLink" pltdoc="x">define-judgment-form</a></span><span class="hspace">&nbsp;</span><span class="RktSym">nats</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">even</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:contract</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">even</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">even</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">even</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">even</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))" class="RktStxLink" pltdoc="x">define-judgment-form</a></span><span class="hspace">&nbsp;</span><span class="RktSym">nats</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">all-even</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:contract</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">all-even</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">all-even</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">n</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">even</span><span class="hspace">&nbsp;</span><span class="RktSym">n</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktMeta"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">all-even</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">z</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">all-even</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">z</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">s</span><span class="hspace">&nbsp;</span><span class="RktSym">z</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr></table></blockquote></td></tr></table></div></p><p><div class="SIntrapara">Redex evaluates premises depth-first, even when it doing so leads to
non-termination. For example, consider the following definitions:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Languages.html#(form._((lib._redex/reduction-semantics..rkt)._define-language))" class="RktStxLink" pltdoc="x">define-language</a></span><span class="hspace">&nbsp;</span><span class="RktSym">vertices</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))" class="RktStxLink" pltdoc="x">define-judgment-form</a></span><span class="hspace">&nbsp;</span><span class="RktSym">vertices</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">edge</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.O))" class="RktStxLink" pltdoc="x">O</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:contract</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">edge</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">edge</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">edge</span><span class="hspace">&nbsp;</span><span class="RktSym">b</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))" class="RktStxLink" pltdoc="x">define-judgment-form</a></span><span class="hspace">&nbsp;</span><span class="RktSym">vertices</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:mode</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">path</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">#:contract</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">path</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">path</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">path</span><span class="hspace">&nbsp;</span><span class="RktSym">v_1</span><span class="hspace">&nbsp;</span><span class="RktSym">v_2</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">path</span><span class="hspace">&nbsp;</span><span class="RktSym">v_2</span><span class="hspace">&nbsp;</span><span class="RktSym">v_1</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">path</span><span class="hspace">&nbsp;</span><span class="RktSym">v_1</span><span class="hspace">&nbsp;</span><span class="RktSym">v_3</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">edge</span><span class="hspace">&nbsp;</span><span class="RktSym">v_1</span><span class="hspace">&nbsp;</span><span class="RktSym">v_2</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">path</span><span class="hspace">&nbsp;</span><span class="RktSym">v_2</span><span class="hspace">&nbsp;</span><span class="RktSym">v_3</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Due to the second <span class="RktSym">path</span> rule, the follow query fails to terminate:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">path</span><span class="hspace">&nbsp;</span><span class="RktSym">a</span><span class="hspace">&nbsp;</span><span class="RktSym">c</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div></p><p><div class="SIntrapara">The <a href="http://git.racket-lang.org/plt/tree/HEAD:/collects/redex/examples/"><span class="stt">"examples"</span></a> directory demonstrates three use cases:
</div><div class="SIntrapara"><ul><li><p><a href="http://git.racket-lang.org/plt/blob/HEAD:/collects/redex/examples/define-judgment-form/typing-rules.rkt"><span class="stt">"typing-rules.rkt"</span></a> &#8212;<wbr></wbr>
defines a type system in a way that supports mechanized typesetting.
When a typing judgment form can be given a mode, it can also be encoded as
a metafunction using <a href="Reduction_Relations.html#(tech._where._clause)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktSym">where</span> clauses</span></a> as premises, but Redex
cannot typeset that encoding as inference rules.</p></li><li><p><a href="http://git.racket-lang.org/plt/blob/HEAD:/collects/redex/examples/define-judgment-form/sos.rkt"><span class="stt">"sos.rkt"</span></a> &#8212;<wbr></wbr>
defines an SOS-style semantics in a way that supports mechanized typesetting.</p></li><li><p><a href="http://git.racket-lang.org/plt/blob/HEAD:/collects/redex/examples/define-judgment-form/multi-val.rkt"><span class="stt">"multi-val.rkt"</span></a> &#8212;<wbr></wbr>
defines a judgment form that serves as a multi-valued metafunction.</p></li></ul></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))"></a><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">judgment</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span><span class="hspace">&nbsp;</span><span class="RktVar">judgment</span><span class="hspace">&nbsp;</span><a href="Terms.html#(tech._term)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">term</span></span></a><span class="RktPn">)</span></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">judgment</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">(</span><span class="RktVar">judgment-form-id</span><span class="hspace">&nbsp;</span><span class="RktVar">pat/term</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">In its first form, checks whether <span class="RktVar">judgment</span> holds for any assignment of
the pattern variables in <span class="RktSym">judgment-id</span>&rsquo;s output positions. In its second
form, produces a list of terms by instantiating the supplied term template with
each satisfying assignment of pattern variables.
See <span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))" class="RktStxLink" pltdoc="x">define-judgment-form</a></span> for examples.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><a name="(form._((lib._redex/reduction-semantics..rkt)._.I))"></a><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span></span></td></tr></table></blockquote></div><div class="SIntrapara">Recognized specially within <span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))" class="RktStxLink" pltdoc="x">define-judgment-form</a></span>, the <span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.I))" class="RktStxLink" pltdoc="x">I</a></span> keyword
is an error elsewhere.
</div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><a name="(form._((lib._redex/reduction-semantics..rkt)._.O))"></a><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.O))" class="RktStxLink" pltdoc="x">O</a></span></span></td></tr></table></blockquote></div><div class="SIntrapara">Recognized specially within <span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))" class="RktStxLink" pltdoc="x">define-judgment-form</a></span>, the <span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._.O))" class="RktStxLink" pltdoc="x">O</a></span> keyword
is an error elsewhere.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><a name="(form._((lib._redex/reduction-semantics..rkt)._define-relation))"></a><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-relation))" class="RktStxLink" pltdoc="x">define-relation</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">language</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">relation-contract</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktVar">name</span><span class="hspace">&nbsp;</span><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><a href="Terms.html#(tech._term)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">term</span></span></a><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVar">metafunction-extras</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">]</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">relation-contract</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">form-id</span><span class="hspace">&nbsp;</span><span class="RktSym">&#8834;</span><span class="hspace">&nbsp;</span><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktVar">form-id</span><span class="hspace">&nbsp;</span><span class="RktSym">&#8838;</span><span class="hspace">&nbsp;</span><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a><span class="hspace">&nbsp;</span><span class="RktSym">&#215;</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="hspace">&nbsp;</span><span class="RktSym">&#215;</span><span class="hspace">&nbsp;</span><a href="Patterns.html#(tech._pattern)" class="techoutside" pltdoc="x"><span class="techinside"><span class="RktVar">pattern</span></span></a></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Similar to <span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-judgment-form))" class="RktStxLink" pltdoc="x">define-judgment-form</a></span> but suitable only when every position
is an input. There is no associated form corresponding to
<span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._judgment-holds))" class="RktStxLink" pltdoc="x">judgment-holds</a></span>; querying the result uses the same syntax as
metafunction application.</div></p><p>The contract specification for a relation restricts the patterns that can
be used as input to a relation. For each argument to the relation, there
should be a single pattern, using <span class="RktSym">x</span> or <span class="RktSym">&#215;</span> to separate
the argument contracts.</p><p><table cellspacing="0" class="RktBlk"><tr><td><p>Examples:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Languages.html#(form._((lib._redex/reduction-semantics..rkt)._define-language))" class="RktStxLink" pltdoc="x">define-language</a></span><span class="hspace">&nbsp;</span><span class="RktSym">types</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">&#964;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#963;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">num</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#964;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(form._((lib._redex/reduction-semantics..rkt)._define-relation))" class="RktStxLink" pltdoc="x">define-relation</a></span><span class="hspace">&nbsp;</span><span class="RktSym">types</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">subtype</span><span class="hspace">&nbsp;</span><span class="RktSym">&#8838;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#215;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">subtype</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">subtype</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#964;_1</span><span class="hspace">&nbsp;</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#963;_1</span><span class="hspace">&nbsp;</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#963;_2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subtype</span><span class="hspace">&nbsp;</span><span class="RktSym">&#963;_1</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_1</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subtype</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;_2</span><span class="hspace">&nbsp;</span><span class="RktSym">&#963;_2</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">subtype</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;</span><span class="hspace">&nbsp;</span><span class="RktSym">&#964;</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Terms.html#(form._((lib._redex/reduction-semantics..rkt)._term))" class="RktStxLink" pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subtype</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Terms.html#(form._((lib._redex/reduction-semantics..rkt)._term))" class="RktStxLink" pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subtype</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">int</span><span class="hspace">&nbsp;</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="hspace">&nbsp;</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#f</span></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Terms.html#(form._((lib._redex/reduction-semantics..rkt)._term))" class="RktStxLink" pltdoc="x">term</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">subtype</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="hspace">&nbsp;</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">int</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">num</span><span class="hspace">&nbsp;</span><span class="RktSym">&#8594;</span><span class="hspace">&nbsp;</span><span class="RktSym">num</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr></table></blockquote></td></tr></table></p><p>Note that relations are assumed to always return the same results for
the same inputs, and their results are cached, unless
<span class="RktSym">caching-enable?</span> is set to <span class="RktVal">#f</span>. Accordingly, if a
relation is called with the same inputs twice, then its right-hand
sides are evaluated only once.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._redex/reduction-semantics..rkt)._current-traced-metafunctions))"></a><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><a href="#(def._((lib._redex/reduction-semantics..rkt)._current-traced-metafunctions))" class="RktValLink" pltdoc="x">current-traced-metafunctions</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">all</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: redex/reduction-semantics, redex"><span class="RktSym"><a href="#(def._((lib._redex/reduction-semantics..rkt)._current-traced-metafunctions))" class="RktValLink" pltdoc="x">current-traced-metafunctions</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">traced-metafunctions</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">traced-metafunctions</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">all</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Controls which metafunctions are currently being traced. If it is
<span class="RktVal">'</span><span class="RktVal">all</span>, all of them are. Otherwise, the elements of the list
name the metafunctions to trace.</div></p><p>The tracing looks just like the tracing done by the <a href="../reference/debugging.html#(mod-path._racket/trace)" class="RktModLink" pltdoc="x"><span class="RktSym">racket/trace</span></a>
library, except that the first column printed by each traced call indicate
if this call to the metafunction is cached. Specifically, a <span class="stt">c</span> is printed
in the first column if the result is just returned from the cache and a
space is printed if the metafunction call is actually performed.</p><p>Defaults to <span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">)</span>.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.2.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.2.1&quot;);">top</a></span><span class="navright"><a href="Reduction_Relations.html" title="backward to &quot;4 Reduction Relations&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;Redex: Practical Semantics Engineering&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Testing.html" title="forward to &quot;6 Testing&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>