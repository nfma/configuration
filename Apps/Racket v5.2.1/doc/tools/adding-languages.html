<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>2&nbsp;Adding Languages to DrRacket</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9660;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Dr<span class="mywbr"> </span>Racket Plugins</a></td></tr></table></div><div class="tocviewsublisttop" style="display: block;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="implementing-tools.html" class="tocviewlink" pltdoc="x">Implementing Dr<span class="mywbr"> </span>Racket Plugins</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Adding Languages to Dr<span class="mywbr"> </span>Racket</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Creating_New_Kinds_of_DrRacket_Frames.html" class="tocviewlink" pltdoc="x">Creating New Kinds of Dr<span class="mywbr"> </span>Racket Frames</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="Extending_the_Existing_DrRacket_Classes.html" class="tocviewlink" pltdoc="x">Extending the Existing Dr<span class="mywbr"> </span>Racket Classes</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="Expanding_and_Breaking.html" class="tocviewlink" pltdoc="x">Expanding the User&rsquo;s Program Text and Breaking</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="Editor_Modes.html" class="tocviewlink" pltdoc="x">Editor Modes</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="Language-specific_capabilities.html" class="tocviewlink" pltdoc="x">Language-<wbr></wbr>specific capabilities</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="Check_Syntax.html" class="tocviewlink" pltdoc="x">Check Syntax</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="Teaching_Languages.html" class="tocviewlink" pltdoc="x">Teaching Languages</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="drracket_get_extend.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>get/<span class="mywbr"> </span>extend</span></a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="drracket_unit.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>unit</span></a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="drracket_language.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>language</span></a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="drracket_language-configuration.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>language-<wbr></wbr>configuration</span></a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="drracket_debug.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>debug</span></a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="drracket_rep.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>rep</span></a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="drracket_frame.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>frame</span></a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="drracket_help-desk.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>help-<wbr></wbr>desk</span></a></td></tr><tr><td align="right">18&nbsp;</td><td><a href="drracket_eval.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>eval</span></a></td></tr><tr><td align="right">19&nbsp;</td><td><a href="drracket_modes.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>modes</span></a></td></tr><tr><td align="right">20&nbsp;</td><td><a href="drracket_module-language-tools.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>module-<wbr></wbr>language-<wbr></wbr>tools</span></a></td></tr><tr><td align="right">21&nbsp;</td><td><a href="drracket_module-language.html" class="tocviewlink" pltdoc="x"><span class="stt">drracket:<span class="mywbr"> </span>module-<wbr></wbr>language</span></a></td></tr><tr><td align="right">22&nbsp;</td><td><a href="Documentation_Utilities.html" class="tocviewlink" pltdoc="x">Documentation Utilities</a></td></tr><tr><td align="right">23&nbsp;</td><td><a href="Backwards_compatibility.html" class="tocviewlink" pltdoc="x">Backwards compatibility</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9658;</a></td><td>2&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Adding Languages to Dr<span class="mywbr"> </span>Racket</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">2.1&nbsp;</td><td><a href="#(part.__lang-based_.Languages_in_.Dr.Racket)" class="tocviewlink" pltdoc="x"><span class="stt">#lang</span>-<wbr></wbr>based Languages in Dr<span class="mywbr"> </span>Racket</a></td></tr><tr><td align="right">2.2&nbsp;</td><td><a href="#(part._.Adding_.Module-based_.Languages_to_.Dr.Racket)" class="tocviewlink" pltdoc="x">Adding Module-<wbr></wbr>based Languages to Dr<span class="mywbr"> </span>Racket</a></td></tr><tr><td align="right">2.3&nbsp;</td><td><a href="#(part._.Adding_.Arbitrary_.Languages_to_.Dr.Racket)" class="tocviewlink" pltdoc="x">Adding Arbitrary Languages to Dr<span class="mywbr"> </span>Racket</a></td></tr><tr><td align="right">2.4&nbsp;</td><td><a href="#(part._.Language_.Extensions)" class="tocviewlink" pltdoc="x">Language Extensions</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">2.1<tt>&nbsp;</tt></span><a href="#(part.__lang-based_.Languages_in_.Dr.Racket)" class="tocsubseclink" pltdoc="x"><span class="stt">#lang</span>-<wbr></wbr>based Languages in Dr<span class="mywbr"> </span>Racket</a></td></tr><tr><td><span class="tocsublinknumber">2.2<tt>&nbsp;</tt></span><a href="#(part._.Adding_.Module-based_.Languages_to_.Dr.Racket)" class="tocsubseclink" pltdoc="x">Adding Module-<wbr></wbr>based Languages to Dr<span class="mywbr"> </span>Racket</a></td></tr><tr><td><span class="tocsublinknumber">2.3<tt>&nbsp;</tt></span><a href="#(part._.Adding_.Arbitrary_.Languages_to_.Dr.Racket)" class="tocsubseclink" pltdoc="x">Adding Arbitrary Languages to Dr<span class="mywbr"> </span>Racket</a></td></tr><tr><td><span class="tocsublinknumber">2.4<tt>&nbsp;</tt></span><a href="#(part._.Language_.Extensions)" class="tocsubseclink" pltdoc="x">Language Extensions</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.2.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.2.1&quot;);">top</a></span><span class="navright"><a href="implementing-tools.html" title="backward to &quot;1 Implementing DrRacket Plugins&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;DrRacket Plugins&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Creating_New_Kinds_of_DrRacket_Frames.html" title="forward to &quot;3 Creating New Kinds of DrRacket Frames&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h3>2<tt>&nbsp;</tt><a name="(part._adding-languages)"></a>Adding Languages to DrRacket</h3><p><a name="(idx._(gentag._8._(lib._scribblings/tools/tools..scrbl)))"></a></p><h4>2.1<tt>&nbsp;</tt><a name="(part.__lang-based_.Languages_in_.Dr.Racket)"></a><span class="stt">#lang</span>-based Languages in DrRacket</h4><p>If a language can be implemented as a module
(see <span class="RktSym"><a href="../reference/module.html#(form._((quote._~23~25kernel)._module))" class="RktStxLink" pltdoc="x">module</a></span> for details), then the simplest and
best way to use the language is via the &ldquo;Use the language
declared the in source&rdquo; checkbox in the <span style="font-family: sans-serif; font-size: 80%; font-weight: bold">Language</span> dialog.
In this case, DrRacket&rsquo;s appearance can still be customized to
the language; it uses <span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read-language))" class="RktValLink" pltdoc="x">read-language</a></span> with these arguments
as the <span class="RktVar">key</span> argument to the <span class="RktVar">get-info</span> function to do so:</p><ul><li><p><a href="drracket_module-language-tools.html#(elem._drracket~3atoolbar-buttons)" pltdoc="x"><span class="RktSym">drracket:toolbar-buttons</span></a></p></li><li><p><a href="drracket_module-language-tools.html#(elem._drracket~3aopt-out-toolbar-buttons)" pltdoc="x"><span class="RktSym">drracket:opt-out-toolbar-buttons</span></a></p></li><li><p><a href="#(elem._color-lexer)" pltdoc="x"><span class="RktSym">color-lexer</span></a></p></li></ul><p><a name="(elem._color-lexer)"></a>When a language&rsquo;s <span class="RktVar">get-info</span> procedure responds to <span class="RktVal">'</span><span class="RktVal">color-lexer</span>, it
is expected to return a procedure suitable to pass as the <span class="RktVar">get-token</span>
argument to <span class="RktSym"><a href="../framework/Color.html#(meth._(((lib._framework/main..rkt)._color~3atext~3c~25~3e)._start-colorer))" class="RktValLink" pltdoc="x">start-colorer</a></span>.</p><p><div class="SIntrapara">The recognized token styles (specified implicitly via <span class="RktSym"><a href="../framework/Color.html#(meth._(((lib._framework/main..rkt)._color~3atext~3c~25~3e)._start-colorer))" class="RktValLink" pltdoc="x">start-colorer</a></span>&rsquo;s
<span class="RktVar">token-sym-&gt;style</span> argument) are:
</div><div class="SIntrapara"><ul><li><p><a name="(idx._(gentag._9._(lib._scribblings/tools/tools..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">symbol</span></p></li><li><p><a name="(idx._(gentag._10._(lib._scribblings/tools/tools..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">keyword</span></p></li><li><p><a name="(idx._(gentag._11._(lib._scribblings/tools/tools..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">comment</span></p></li><li><p><a name="(idx._(gentag._12._(lib._scribblings/tools/tools..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">string</span></p></li><li><p><a name="(idx._(gentag._13._(lib._scribblings/tools/tools..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">constant</span></p></li><li><p><a name="(idx._(gentag._14._(lib._scribblings/tools/tools..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">parenthesis</span></p></li><li><p><a name="(idx._(gentag._15._(lib._scribblings/tools/tools..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">error</span></p></li><li><p><a name="(idx._(gentag._16._(lib._scribblings/tools/tools..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">other</span></p></li></ul></div><div class="SIntrapara">These precise colors for these identifiers are controlled by the preferences dialog in DrRacket.</div></p><h4>2.2<tt>&nbsp;</tt><a name="(part._.Adding_.Module-based_.Languages_to_.Dr.Racket)"></a>Adding Module-based Languages to DrRacket</h4><p><div class="SIntrapara">For backwards compatibility, DrRacket also supports
and
<span class="stt">info.rkt</span> file-based method for specifying
such languages. Include these definitions:
</div><div class="SIntrapara"><ul><li><p><a name="(idx._(gentag._17._(lib._scribblings/tools/tools..scrbl)))"></a><span class="RktSym">drscheme-language-modules</span>: This must be bound to a
list of collection path specifications or strings, one for
each language in the collection. Each collection path
specification is the quoted form of what might appear as
an argument to <span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span>, using the
<span class="stt">lib</span> argument (but without the <span class="stt">lib</span>). The
strings represent relative paths starting at the directory
containing the <span class="stt">info.rkt</span> file.  They are interpreted
like string arguments to <span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span>.</p></li><li><p><a name="(idx._(gentag._18._(lib._scribblings/tools/tools..scrbl)))"></a><span class="RktSym">drscheme-language-positions</span>: This must be bound to a
  list of language positions. Each language position
  corresponds to the position of the language in language
  dialog. Each language position is a list of strings whose
  length must be at least two.</p></li><li><p><a name="(idx._(gentag._19._(lib._scribblings/tools/tools..scrbl)))"></a><span class="RktSym">drscheme-language-numbers</span>: This is optional. If
  present, it must be a list of a list of numbers. Each list
  corresponds to a single language from this collection.
  Each number indicates a sorting order in the language
  dialog for the corresponding string in
  <span class="RktSym">drscheme-language-positions</span>. If absent, it defaults
  to a list of zeros that has the same length as
  <span class="RktSym">drscheme-language-positions</span>. This will rarely be correct.</p></li><li><p><a name="(idx._(gentag._20._(lib._scribblings/tools/tools..scrbl)))"></a><span class="RktSym">drscheme-language-one-line-summaries</span>: This is
  optional. If present, it must be a list of strings. Each
  string is displayed at the bottom of the language dialog
  when the corresponding language is selected.</p></li><li><p><a name="(idx._(gentag._21._(lib._scribblings/tools/tools..scrbl)))"></a><span class="RktSym">drscheme-language-urls</span>: This is
  optional. If present, it must be a list whose elements are
  either strings or <span class="RktVal">#f</span>.
  Clicking the corresponding language&rsquo;s name in
  the interactions window opens a web browser to the url.</p></li><li><p><a name="(idx._(gentag._22._(lib._scribblings/tools/tools..scrbl)))"></a><span class="RktSym">drscheme-language-readers</span>: This is optional. If
  present, it must be bound to a quoted list of module
  specifications (that is, a quoted version of the argument
  to <span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span>). Each
  specification must be a module that exports a function
  named <span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="RktValLink" pltdoc="x">read-syntax</a></span>.  Each of these
  <span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="RktValLink" pltdoc="x">read-syntax</a></span> functions must match Racket&rsquo;s
  <span class="RktSym"><a href="../reference/Reading.html#(def._((quote._~23~25kernel)._read-syntax))" class="RktValLink" pltdoc="x">read-syntax</a></span> primitive&rsquo;s contract, but may
  read different concrete syntax.</p><p>If the module specification is a plain string, it
  represents a relative path starting at the directory
  containing the <span class="stt">info.rkt</span> file.  It is interpreted
  like the string arguments to <span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span>.</p></li></ul></div><div class="SIntrapara">The lists must have the same length.</div></p><p><div class="SIntrapara">As an example, the <span style="font-style: italic">Essentials of Programming Languages</span>
language specification&rsquo;s <span class="stt">info.rkt</span> used to look like this:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><a href="../guide/Module_Syntax.html#(part._hash-lang)" class="RktModLink" pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="../raco/info_rkt.html" class="RktModLink" pltdoc="x"><span class="RktSym">setup/infotab</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">string-constants</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">name</span><span class="hspace">&nbsp;</span><span class="RktVal">"EoPL Support"</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">drscheme-language-modules</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._list))" class="RktValLink" pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"eopl-lang.rkt"</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">drscheme-language-positions</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._list))" class="RktValLink" pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/pairs.html#(def._((quote._~23~25kernel)._list))" class="RktValLink" pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">string-constant</span><span class="hspace">&nbsp;</span><span class="RktSym">teaching-languages</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">"Essentials of Programming Languages"</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">This <span class="stt">info.rkt</span> file indicates that there is a single
language in this collection. The module that implements the
language is the <span class="stt">eopl-lang.rkt</span> file in the same directory as
the <span class="stt">info.rkt</span> file. Additionally, the language dialog will contain
<span class="stt">Essentials of Programming Languages</span> as a potential
language. The use of the string constant
<span class="RktSym">teaching-languages</span> ensures that EoPL&rsquo;s language is
placed properly in foreign language versions of DrRacket.</div></p><p><div class="SIntrapara">For collections that define multiple (related) languages, if
the language-positions contain multiple strings, the
languages whose leading strings match are grouped together.
That is, if two languages have strings:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"My Text"</span><span class="hspace">&nbsp;</span><span class="RktVal">"First Language"</span><span class="RktVal">)</span></p></blockquote></div><div class="SIntrapara">and
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">"My Text"</span><span class="hspace">&nbsp;</span><span class="RktVal">"Second Language"</span><span class="RktVal">)</span></p></blockquote></div><div class="SIntrapara">the two languages will be grouped together in the language
dialog.</div></p><h4>2.3<tt>&nbsp;</tt><a name="(part._.Adding_.Arbitrary_.Languages_to_.Dr.Racket)"></a>Adding Arbitrary Languages to DrRacket</h4><p>With some additional work, any language that can be compiled
to Racket is supported by the tools interface,
not just those that use standard configurations and
<span class="RktSym"><a href="../reference/module.html#(form._((quote._~23~25kernel)._module))" class="RktStxLink" pltdoc="x">module</a></span>.</p><p>Each language is a class that implement the
<span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3alanguage~3c~25~3e))" class="RktValLink" pltdoc="x">drracket:language:language&lt;%&gt;</a></span> interface.  DrRacket also
  provides two simpler interfaces:
  <span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3amodule-based-language~3c~25~3e))" class="RktValLink" pltdoc="x">drracket:language:module-based-language&lt;%&gt;</a></span> and
  <span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3asimple-module-based-language~3c~25~3e))" class="RktValLink" pltdoc="x">drracket:language:simple-module-based-language&lt;%&gt;</a></span>,
  and
  <span class="RktSym"><a href="../reference/mixins.html#(form._((lib._racket/private/class-internal..rkt)._mixin))" class="RktStxLink" pltdoc="x">mixin</a></span>s
  <span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3asimple-module-based-language-~3emodule-based-language-mixin))" class="RktValLink" pltdoc="x">drracket:language:simple-module-based-language-&gt;module-based-language-mixin</a></span>
  and
  <span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3amodule-based-language-~3elanguage-mixin))" class="RktValLink" pltdoc="x">drracket:language:module-based-language-&gt;language-mixin</a></span>
  that build implementations of <span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3alanguage~3c~25~3e))" class="RktValLink" pltdoc="x">drracket:language:language&lt;%&gt;</a></span>s from these simpler interfaces.</p><p>Once you have an implementation of the
<span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3alanguage~3c~25~3e))" class="RktValLink" pltdoc="x">drracket:language:language&lt;%&gt;</a></span> interface, call
<span class="RktSym"><a href="drracket_language-configuration.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage-configuration~3aadd-language))" class="RktValLink" pltdoc="x">drracket:language-configuration:add-language</a></span> to add the language
to DrRacket.</p><p>Each language comes with its own type, called
<span class="stt">settings</span>. This can be any type the language
designer chooses, but to aid documentation, we call it
<span class="stt">settings</span> here. The settings type is expected to
contain parameters of the language, such as case
sensitivity, etc. The implementor of the language provides a
GUI so the user can configure the settings and all of the
language&rsquo;s operations accept a setting. DrRacket maintains
the current settings for each language.</p><h4>2.4<tt>&nbsp;</tt><a name="(part._.Language_.Extensions)"></a>Language Extensions</h4><p>Some tools may require additional functionality from the
<span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3alanguage~3c~25~3e))" class="RktValLink" pltdoc="x">drracket:language:language&lt;%&gt;</a></span> interface. The
<span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3aextend-language-interface))" class="RktValLink" pltdoc="x">drracket:language:extend-language-interface</a></span>
function and the
<span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3aget-default-mixin))" class="RktValLink" pltdoc="x">drracket:language:get-default-mixin</a></span>
mixin make this possible.</p><p>For example, the MrFlow tool expands a program, analyzes it
and then displays sets of values for each program point.
These sets of values should be rendered in the syntax of the
language that MrFlow analyzes. Since MrFlow doesn&rsquo;t
know which languages are available, it can call
<span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3aextend-language-interface))" class="RktValLink" pltdoc="x">drracket:language:extend-language-interface</a></span>
to extend the <span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3alanguage~3c~25~3e))" class="RktValLink" pltdoc="x">drracket:language:language&lt;%&gt;</a></span>
interface with a method for rendering sets of values and
provide a default implementation of that method. Tools that
know about MrFlow can then override the value rendering
method to provide a language-specific implementation of
value rendering.  Additionally, since the
<span class="RktSym"><a href="drracket_language.html#(def._((lib._drracket/tool-lib..rkt)._drracket~3alanguage~3aget-default-mixin))" class="RktValLink" pltdoc="x">drracket:language:get-default-mixin</a></span>
adds the default implementation for the value-set rendering
method, all languages at least have some form of value-set
rendering.</p><p>In some cases, it is important for one tool to avoid
depending on another in the manner above. For example, if a
tool that provides a new language provides an implementation
for the MrFlow-specific method, that tool may fail to load
if MrFlow is not present (Indeed, with the tool manager,
this can happen to any tool that depends on another in this
manner.)</p><p><div class="SIntrapara">To avoid this problem, consider writing your tool to first
check to see if the base method is available before
extending it. For example, if the MrFlow tool provides the
<span class="stt">render-value&lt;%&gt;</span> interface, then a tool that overrides
that method can first test to see if the superclass
implements that method before overriding it:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-language-mixin</span><span class="hspace">&nbsp;</span><span class="RktSym">%</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/objectutils.html#(def._((lib._racket/private/class-internal..rkt)._implementation~3f))" class="RktValLink" pltdoc="x">implementation?</a></span><span class="hspace">&nbsp;</span><span class="RktSym">%</span><span class="hspace">&nbsp;</span><span class="RktSym">mrflow:render-value&lt;%&gt;</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/createclass.html#(form._((lib._racket/private/class-internal..rkt)._class))" class="RktStxLink" pltdoc="x">class</a></span><span class="hspace">&nbsp;</span><span class="RktSym">%</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/createclass.html#(form._((lib._racket/private/class-internal..rkt)._define/override))" class="RktStxLink" pltdoc="x">define/override</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/objcreation.html#(form._((lib._racket/private/class-internal..rkt)._super-new))" class="RktStxLink" pltdoc="x">super-new</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">%</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p>To help test your tool, use the
<a href="../drracket/extending-drracket.html#(part._environment-variables)" pltdoc="x"><span class="stt">PLTONLYTOOL</span></a>
environment variable to load it in isolation.</p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.2.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.2.1&quot;);">top</a></span><span class="navright"><a href="implementing-tools.html" title="backward to &quot;1 Implementing DrRacket Plugins&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="index.html" title="up to &quot;DrRacket Plugins&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Creating_New_Kinds_of_DrRacket_Frames.html" title="forward to &quot;3 Creating New Kinds of DrRacket Frames&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>