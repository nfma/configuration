<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>10.1&nbsp;Threads</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="extras.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span style="font-weight: bold">The Racket Reference</span></a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="model.html" class="tocviewlink" pltdoc="x">Language Model</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="syntax.html" class="tocviewlink" pltdoc="x">Syntactic Forms</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="data.html" class="tocviewlink" pltdoc="x">Datatypes</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="structures.html" class="tocviewlink" pltdoc="x">Structures</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="mzlib_class.html" class="tocviewlink" pltdoc="x">Classes and Objects</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="mzlib_unit.html" class="tocviewlink" pltdoc="x">Units</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="contracts.html" class="tocviewlink" pltdoc="x">Contracts</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="match.html" class="tocviewlink" pltdoc="x">Pattern Matching</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="control.html" class="tocviewlink" pltdoc="x">Control Flow</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="concurrency.html" class="tocviewselflink" pltdoc="x">Concurrency and Parallelism</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Macros.html" class="tocviewlink" pltdoc="x">Macros</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="input-and-output.html" class="tocviewlink" pltdoc="x">Input and Output</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="security.html" class="tocviewlink" pltdoc="x">Reflection and Security</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="os.html" class="tocviewlink" pltdoc="x">Operating System</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="memory.html" class="tocviewlink" pltdoc="x">Memory Management</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="unsafe.html" class="tocviewlink" pltdoc="x">Unsafe Operations</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="running.html" class="tocviewlink" pltdoc="x">Running Racket</a></td></tr><tr><td align="right"></td><td><a href="doc-bibliography.html" class="tocviewlink" pltdoc="x">Bibliography</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>10&nbsp;</td><td><a href="concurrency.html" class="tocviewlink" pltdoc="x">Concurrency and Parallelism</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">10.1&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Threads</a></td></tr><tr><td align="right">10.2&nbsp;</td><td><a href="all-sync.html" class="tocviewlink" pltdoc="x">Synchronization</a></td></tr><tr><td align="right">10.3&nbsp;</td><td><a href="thread-local-storage.html" class="tocviewlink" pltdoc="x">Thread-<wbr></wbr>Local Storage</a></td></tr><tr><td align="right">10.4&nbsp;</td><td><a href="futures.html" class="tocviewlink" pltdoc="x">Futures</a></td></tr><tr><td align="right">10.5&nbsp;</td><td><a href="places.html" class="tocviewlink" pltdoc="x">Places</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>10.1&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Threads</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">10.1.1&nbsp;</td><td><a href="#(part._.Creating_.Threads)" class="tocviewlink" pltdoc="x">Creating Threads</a></td></tr><tr><td align="right">10.1.2&nbsp;</td><td><a href="#(part._threadkill)" class="tocviewlink" pltdoc="x">Suspending, Resuming, and Killing Threads</a></td></tr><tr><td align="right">10.1.3&nbsp;</td><td><a href="#(part._threadsync)" class="tocviewlink" pltdoc="x">Synchronizing Thread State</a></td></tr><tr><td align="right">10.1.4&nbsp;</td><td><a href="#(part._threadmbox)" class="tocviewlink" pltdoc="x">Thread Mailboxes</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">10.1.1<tt>&nbsp;</tt></span><a href="#(part._.Creating_.Threads)" class="tocsubseclink" pltdoc="x">Creating Threads</a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread?</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._current-thread))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">current-<wbr></wbr>thread</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread/suspend-to-kill))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread/<span class="mywbr"> </span>suspend-<wbr></wbr>to-<wbr></wbr>kill</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._call-in-nested-thread))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">call-<wbr></wbr>in-<wbr></wbr>nested-<wbr></wbr>thread</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">10.1.2<tt>&nbsp;</tt></span><a href="#(part._threadkill)" class="tocsubseclink" pltdoc="x">Suspending, Resuming, and Killing Threads</a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread-suspend))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread-<wbr></wbr>suspend</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread-resume))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread-<wbr></wbr>resume</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._kill-thread))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">kill-<wbr></wbr>thread</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._break-thread))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">break-<wbr></wbr>thread</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._sleep))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">sleep</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread-running~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread-<wbr></wbr>running?</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread-dead~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread-<wbr></wbr>dead?</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">10.1.3<tt>&nbsp;</tt></span><a href="#(part._threadsync)" class="tocsubseclink" pltdoc="x">Synchronizing Thread State</a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread-wait))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread-<wbr></wbr>wait</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread-dead-evt))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread-<wbr></wbr>dead-<wbr></wbr>evt</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread-resume-evt))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread-<wbr></wbr>resume-<wbr></wbr>evt</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread-suspend-evt))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread-<wbr></wbr>suspend-<wbr></wbr>evt</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">10.1.4<tt>&nbsp;</tt></span><a href="#(part._threadmbox)" class="tocsubseclink" pltdoc="x">Thread Mailboxes</a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread-send))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread-<wbr></wbr>send</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread-receive))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread-<wbr></wbr>receive</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread-try-receive))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread-<wbr></wbr>try-<wbr></wbr>receive</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread-receive-evt))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread-<wbr></wbr>receive-<wbr></wbr>evt</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._thread-rewind-receive))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">thread-<wbr></wbr>rewind-<wbr></wbr>receive</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.2.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.2.1&quot;);">top</a></span><span class="navright"><a href="concurrency.html" title="backward to &quot;10 Concurrency and Parallelism&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="concurrency.html" title="up to &quot;10 Concurrency and Parallelism&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="all-sync.html" title="forward to &quot;10.2 Synchronization&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>10.1<tt>&nbsp;</tt><a name="(part._threads)"></a>Threads</h4><p>See <a href="eval-model.html#(part._thread-model)" pltdoc="x">Threads</a> for basic information on the Racket
thread model. See also <a href="futures.html" pltdoc="x">Futures</a>.</p><p>When a thread is created, it is placed into the management of the
<a href="eval-model.html#(tech._current._custodian)" class="techoutside" pltdoc="x"><span class="techinside">current custodian</span></a> and added to the current <a href="threadgroups.html#(tech._thread._group)" class="techoutside" pltdoc="x"><span class="techinside">thread
group</span></a>. A thread can have any number of custodian managers added
through <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-resume))" class="RktValLink" pltdoc="x">thread-resume</a></span>.</p><p>A thread that has not terminated can be garbage collected (see
<a href="eval-model.html#(part._gc-model)" pltdoc="x">Garbage Collection</a>) if it is unreachable and suspended or if it is
unreachable and blocked on only unreachable events through
<span class="RktSym"><a href="semaphore.html#(def._((quote._~23~25kernel)._semaphore-wait))" class="RktValLink" pltdoc="x">semaphore-wait</a></span>, <span class="RktSym"><a href="semaphore.html#(def._((quote._~23~25kernel)._semaphore-wait/enable-break))" class="RktValLink" pltdoc="x">semaphore-wait/enable-break</a></span>,
<span class="RktSym"><a href="channel.html#(def._((lib._racket/private/misc..rkt)._channel-put))" class="RktValLink" pltdoc="x">channel-put</a></span>, <span class="RktSym"><a href="channel.html#(def._((lib._racket/private/misc..rkt)._channel-get))" class="RktValLink" pltdoc="x">channel-get</a></span>, <span class="RktSym"><a href="sync.html#(def._((quote._~23~25kernel)._sync))" class="RktValLink" pltdoc="x">sync</a></span>,
<span class="RktSym"><a href="sync.html#(def._((quote._~23~25kernel)._sync/enable-break))" class="RktValLink" pltdoc="x">sync/enable-break</a></span>, or <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-wait))" class="RktValLink" pltdoc="x">thread-wait</a></span>.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>In GRacket, a handler thread for an eventspace is blocked on
an internal semaphore when its event queue is empty. Thus, the handler
thread is collectible when the eventspace is unreachable and contains
no visible windows or running timers.</p></blockquote></blockquote></blockquote><p>All constant-time procedures and operations provided by Racket are
thread-safe because they are <span style="font-style: italic">atomic</span>. For example,
<span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span> assigns to a variable as an atomic action with respect
to all threads, so that no thread can see a &ldquo;half-assigned&rdquo;
variable. Similarly, <span class="RktSym"><a href="vectors.html#(def._((quote._~23~25kernel)._vector-set!))" class="RktValLink" pltdoc="x">vector-set!</a></span> assigns to a vector
atomically. The <span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash-set!))" class="RktValLink" pltdoc="x">hash-set!</a></span> procedure is not atomic, but
the table is protected by a lock; see <a href="hashtables.html" pltdoc="x">Hash Tables</a> for more
information. Port operations are generally not atomic, but they are
thread-safe in the sense that a byte consumed by one thread from an
input port will not be returned also to another thread, and procedures
like <span class="RktSym"><a href="Byte_and_String_Input.html#(def._((quote._~23~25kernel)._port-commit-peeked))" class="RktValLink" pltdoc="x">port-commit-peeked</a></span> and <span class="RktSym"><a href="Byte_and_String_Output.html#(def._((quote._~23~25kernel)._write-bytes-avail))" class="RktValLink" pltdoc="x">write-bytes-avail</a></span> offer
specific concurrency guarantees.</p><h5>10.1.1<tt>&nbsp;</tt><a name="(part._.Creating_.Threads)"></a>Creating Threads</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread))" class="RktValLink" pltdoc="x">thread</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thunk</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(form._((lib._racket/contract/private/misc..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Calls <span class="RktVar">thunk</span> with no arguments in a new thread of control. The
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread))" class="RktValLink" pltdoc="x">thread</a></span> procedure returns immediately with a <a name="(tech._thread._descriptor)"></a><span style="font-style: italic">thread
descriptor</span> value. When the invocation of <span class="RktVar">thunk</span> returns, the
thread created to invoke <span class="RktVar">thunk</span> terminates.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if
<span class="RktVar">v</span> is a <a href="#(tech._thread._descriptor)" class="techoutside" pltdoc="x"><span class="techinside">thread descriptor</span></a>, <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._current-thread))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._current-thread))" class="RktValLink" pltdoc="x">current-thread</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the <a href="#(tech._thread._descriptor)" class="techoutside" pltdoc="x"><span class="techinside">thread
descriptor</span></a> for the currently executing thread.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread/suspend-to-kill))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread/suspend-to-kill))" class="RktValLink" pltdoc="x">thread/suspend-to-kill</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thunk</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread))" class="RktValLink" pltdoc="x">thread</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(form._((lib._racket/contract/private/misc..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread))" class="RktValLink" pltdoc="x">thread</a></span>, except that &ldquo;killing&rdquo; the thread through
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._kill-thread))" class="RktValLink" pltdoc="x">kill-thread</a></span> or <span class="RktSym"><a href="custodians.html#(def._((quote._~23~25kernel)._custodian-shutdown-all))" class="RktValLink" pltdoc="x">custodian-shutdown-all</a></span> merely
suspends the thread instead of terminating it.  </div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._call-in-nested-thread))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._call-in-nested-thread))" class="RktValLink" pltdoc="x">call-in-nested-thread</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>[<span class="RktVar">cust</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(form._((lib._racket/contract/private/misc..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="nobreak">-&gt;</span>any</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">cust</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="custodians.html#(def._((quote._~23~25kernel)._custodian~3f))" class="RktValLink" pltdoc="x">custodian?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="custodians.html#(def._((quote._~23~25kernel)._current-custodian))" class="RktValLink" pltdoc="x">current-custodian</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a nested thread managed by <span class="RktVar">cust</span> to execute
<span class="RktVar">thunk</span>. (The nested thread&rsquo;s current custodian is inherited
from the creating thread, independent of the <span class="RktVar">cust</span> argument.)
The current thread blocks until <span class="RktVar">thunk</span> returns, and the result
of the <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._call-in-nested-thread))" class="RktValLink" pltdoc="x">call-in-nested-thread</a></span> call is the result returned by
<span class="RktVar">thunk</span>.</div></p><p>The nested thread&rsquo;s exception handler is initialized to a procedure
that jumps to the beginning of the thread and transfers the exception
to the original thread. The handler thus terminates the nested thread
and re-raises the exception in the original thread.</p><p>If the thread created by <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._call-in-nested-thread))" class="RktValLink" pltdoc="x">call-in-nested-thread</a></span> dies before
<span class="RktVar">thunk</span> returns, the <span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail))" class="RktValLink" pltdoc="x">exn:fail</a></span> exception is raised in the original
thread. If the original thread is killed before <span class="RktVar">thunk</span>
returns, a break is queued for the nested thread.</p><p>If a break is queued for the original thread (with
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._break-thread))" class="RktValLink" pltdoc="x">break-thread</a></span>) while the nested thread is running, the break
is redirected to the nested thread. If a break is already queued on
the original thread when the nested thread is created, the break is
moved to the nested thread. If a break remains queued on the nested
thread when it completes, the break is moved to the original thread.</p><h5>10.1.2<tt>&nbsp;</tt><a name="(part._threadkill)"></a>Suspending, Resuming, and Killing Threads</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread-suspend))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-suspend))" class="RktValLink" pltdoc="x">thread-suspend</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thd</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thd</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Immediately suspends the execution of <span class="RktVar">thd</span> if it is
running. If the thread has terminated or is already suspended,
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-suspend))" class="RktValLink" pltdoc="x">thread-suspend</a></span> has no effect. The thread remains suspended
(i.e., it does not execute) until it is resumed with
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-resume))" class="RktValLink" pltdoc="x">thread-resume</a></span>. If the <a href="eval-model.html#(tech._current._custodian)" class="techoutside" pltdoc="x"><span class="techinside">current custodian</span></a> does not
solely manage <span class="RktVar">thd</span> (i.e., some custodian of <span class="RktVar">thd</span>
is not the current custodian or a subordinate), the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised, and the thread is not suspended.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread-resume))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-resume))" class="RktValLink" pltdoc="x">thread-resume</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thd</span><span class="hspace">&nbsp;</span>[<span class="RktVar">benefactor</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thd</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">benefactor</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="custodians.html#(def._((quote._~23~25kernel)._custodian~3f))" class="RktValLink" pltdoc="x">custodian?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Resumes the execution of <span class="RktVar">thd</span> if it is suspended and has at
least one custodian (possibly added through <span class="RktVar">benefactor</span>, as
described below). If the thread has terminated, or if the thread is
already running and <span class="RktVar">benefactor</span> is not supplied, or if the
thread has no custodian and <span class="RktVar">benefactor</span> is not supplied, then
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-resume))" class="RktValLink" pltdoc="x">thread-resume</a></span> has no effect. Otherwise, if
<span class="RktVar">benefactor</span> is supplied, it triggers up to three
additional actions:</div></p><ul><li><p>If <span class="RktVar">benefactor</span> is a thread, whenever it is resumed
from a suspended state in the future, then <span class="RktVar">thd</span> is also
resumed. (Resuming <span class="RktVar">thd</span> may trigger the resumption of other
threads that were previously attached to <span class="RktVar">thd</span> through
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-resume))" class="RktValLink" pltdoc="x">thread-resume</a></span>.)</p></li><li><p>New custodians may be added to <span class="RktVar">thd</span>&rsquo;s set of
managers.  If <span class="RktVar">benefactor</span> is a thread, then all of the
thread&rsquo;s custodians are added to <span class="RktVar">thd</span>. Otherwise,
<span class="RktVar">benefactor</span> is a custodian, and it is added to <span class="RktVar">thd</span>
(unless the custodian is already shut down). If <span class="RktVar">thd</span>
becomes managed by both a custodian and one or more of its
subordinates, the redundant subordinates are removed from
<span class="RktVar">thd</span>.  If <span class="RktVar">thd</span> is suspended and a custodian is
added, then <span class="RktVar">thd</span> is resumed only after the addition.</p></li><li><p>If <span class="RktVar">benefactor</span> is a thread, whenever it receives a
new managing custodian in the future, then <span class="RktVar">thd</span> also
receives the custodian. (Adding custodians to <span class="RktVar">thd</span> may
trigger adding the custodians to other threads that were previously
attached to <span class="RktVar">thd</span> through <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-resume))" class="RktValLink" pltdoc="x">thread-resume</a></span>.)</p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._kill-thread))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._kill-thread))" class="RktValLink" pltdoc="x">kill-thread</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thd</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thd</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Terminates the specified thread immediately, or suspends the thread if
<span class="RktVar">thd</span> was created with
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread/suspend-to-kill))" class="RktValLink" pltdoc="x">thread/suspend-to-kill</a></span>. Terminating the main thread exits the
application.  If <span class="RktVar">thd</span> has already terminated,
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._kill-thread))" class="RktValLink" pltdoc="x">kill-thread</a></span> does nothing.  If the <a href="eval-model.html#(tech._current._custodian)" class="techoutside" pltdoc="x"><span class="techinside">current custodian</span></a>
does not manage <span class="RktVar">thd</span> (and none of its subordinates manages
<span class="RktVar">thd</span>), the <span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised, and the thread is not
killed or suspended.</div></p><p>Unless otherwise noted, procedures provided by Racket (and GRacket) are
kill-safe and suspend-safe; that is, killing or suspending a thread
never interferes with the application of procedures in other
threads. For example, if a thread is killed while extracting a
character from an input port, the character is either completely
consumed or not consumed, and other threads can safely use the port.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._break-thread))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._break-thread))" class="RktValLink" pltdoc="x">break-thread</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thd</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thd</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._164._(lib._scribblings/reference/reference..scrbl)))"></a>Registers a break with the specified
thread. If breaking is disabled in <span class="RktVar">thd</span>, the break will be
ignored until breaks are re-enabled (see <a href="breakhandler.html" pltdoc="x">Breaks</a>).</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._sleep))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._sleep))" class="RktValLink" pltdoc="x">sleep</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">secs</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">secs</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._~3e~3d/c))" class="RktValLink" pltdoc="x">&gt;=/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">0</span></td></tr></table></blockquote></div><div class="SIntrapara">Causes the current thread to sleep until at least <span class="RktVar">secs</span>
seconds have passed after it starts sleeping. A zero value for
<span class="RktVar">secs</span> simply acts as a hint to allow other threads to
execute. The value of <span class="RktVar">secs</span> can be a non-integer to request a
sleep duration to any precision; the precision of the actual sleep
time is unspecified.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread-running~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-running~3f))" class="RktValLink" pltdoc="x">thread-running?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thd</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(form._((lib._racket/contract/private/misc..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thd</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></td></tr></table></blockquote></div><div class="SIntrapara"><a name="(idx._(gentag._165._(lib._scribblings/reference/reference..scrbl)))"></a>Returns <span class="RktVal">#t</span> if <span class="RktVar">thd</span>
has not terminated and is not suspended, <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread-dead~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-dead~3f))" class="RktValLink" pltdoc="x">thread-dead?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thd</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(form._((lib._racket/contract/private/misc..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thd</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">thd</span> has terminated, <span class="RktVal">#f</span>
otherwise.</div></p><h5>10.1.3<tt>&nbsp;</tt><a name="(part._threadsync)"></a>Synchronizing Thread State</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread-wait))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-wait))" class="RktValLink" pltdoc="x">thread-wait</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thd</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thd</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Blocks execution of the current thread until <span class="RktVar">thd</span> has
terminated. Note that <span class="RktPn">(</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-wait))" class="RktValLink" pltdoc="x">thread-wait</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._current-thread))" class="RktValLink" pltdoc="x">current-thread</a></span><span class="RktPn">)</span><span class="RktPn">)</span>
deadlocks the current thread, but a break can end the deadlock (if
breaking is enabled; see <a href="breakhandler.html" pltdoc="x">Breaks</a>).</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread-dead-evt))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-dead-evt))" class="RktValLink" pltdoc="x">thread-dead-evt</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thd</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="sync.html#(def._((quote._~23~25kernel)._evt~3f))" class="RktValLink" pltdoc="x">evt?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thd</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a <a href="sync.html#(tech._synchronizable._event)" class="techoutside" pltdoc="x"><span class="techinside">synchronizable event</span></a> (see <a href="sync.html" pltdoc="x">Events</a>) that is
ready if and only if <span class="RktVar">thd</span> has terminated.  Unlike using
<span class="RktVar">thd</span> directly, however, a reference to the event does not
prevent <span class="RktVar">thd</span> from being garbage collected (see
<a href="eval-model.html#(part._gc-model)" pltdoc="x">Garbage Collection</a>). For a given <span class="RktVar">thd</span>,
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-dead-evt))" class="RktValLink" pltdoc="x">thread-dead-evt</a></span> always returns the same (i.e., <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span>)
result.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread-resume-evt))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-resume-evt))" class="RktValLink" pltdoc="x">thread-resume-evt</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thd</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="sync.html#(def._((quote._~23~25kernel)._evt~3f))" class="RktValLink" pltdoc="x">evt?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thd</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a <a href="sync.html#(tech._synchronizable._event)" class="techoutside" pltdoc="x"><span class="techinside">synchronizable event</span></a> (see <a href="sync.html" pltdoc="x">Events</a>) that
becomes ready when <span class="RktVar">thd</span> is running.  (If <span class="RktVar">thd</span> has
terminated, the event never becomes ready.)  If <span class="RktVar">thd</span> runs and
is then suspended after a call to <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-resume-evt))" class="RktValLink" pltdoc="x">thread-resume-evt</a></span>, the
result event remains ready; after each suspend of <span class="RktVar">thd</span> a fresh
event is generated to be returned by <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-resume-evt))" class="RktValLink" pltdoc="x">thread-resume-evt</a></span>.  The
result of the event is <span class="RktVar">thd</span>, but if <span class="RktVar">thd</span> is never
resumed, then reference to the event does not prevent <span class="RktVar">thd</span>
from being garbage collected (see <a href="eval-model.html#(part._gc-model)" pltdoc="x">Garbage Collection</a>).</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread-suspend-evt))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-suspend-evt))" class="RktValLink" pltdoc="x">thread-suspend-evt</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thd</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="sync.html#(def._((quote._~23~25kernel)._evt~3f))" class="RktValLink" pltdoc="x">evt?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thd</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a <a href="sync.html#(tech._synchronizable._event)" class="techoutside" pltdoc="x"><span class="techinside">synchronizable event</span></a> (see <a href="sync.html" pltdoc="x">Events</a>) that
becomes ready when <span class="RktVar">thd</span> is suspended.  (If <span class="RktVar">thd</span> has
terminated, the event will never unblock.)  If <span class="RktVar">thd</span> is
suspended and then resumes after a call to
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-suspend-evt))" class="RktValLink" pltdoc="x">thread-suspend-evt</a></span>, the result event remains ready; after
each resume of <span class="RktVar">thd</span> created a fresh event to be returned by
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-suspend-evt))" class="RktValLink" pltdoc="x">thread-suspend-evt</a></span>.</div></p><h5>10.1.4<tt>&nbsp;</tt><a name="(part._threadmbox)"></a>Thread Mailboxes</h5><p>Each thread has a <span style="font-style: italic">mailbox</span> through which it can receive
arbitrary messages.  In other words, each thread has a built-in
asynchronous channel.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="imageleft"><img src="magnify.png" alt="+" /></span>See also <a href="async-channel.html" pltdoc="x">Buffered Asynchronous Channels</a>.</p></blockquote></blockquote></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread-send))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-send))" class="RktValLink" pltdoc="x">thread-send</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">thd</span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>[<span class="RktVar">fail-thunk</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(form._((lib._racket/contract/private/misc..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thd</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread~3f))" class="RktValLink" pltdoc="x">thread?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">fail-thunk</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(form._((lib._racket/contract/private/misc..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="exns.html#(def._((quote._~23~25kernel)._raise-mismatch-error))" class="RktValLink" pltdoc="x">raise-mismatch-error</a></span><span class="hspace">&nbsp;</span><span class="RktSym">....</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Queues <span class="RktVar">v</span> as a message to <span class="RktVar">thd</span> without blocking. If
the message is queued, the result is <a href="../guide/void_undefined.html" class="RktModLink" pltdoc="x"><span class="nobreak"><span class="RktRes">#&lt;void&gt;</span></span></a>. If <span class="RktVar">thd</span>
stops running&#8212;<wbr></wbr>as in <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-running~3f))" class="RktValLink" pltdoc="x">thread-running?</a></span>&#8212;<wbr></wbr>before the message is
queued, then <span class="RktVar">fail-thunk</span> is called (through a tail call) if it is
a procedure to produce the result, or <span class="RktVal">#f</span> is returned if
<span class="RktVar">fail-thunk</span> is <span class="RktVal">#f</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread-receive))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-receive))" class="RktValLink" pltdoc="x">thread-receive</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Receives and dequeues a message queued for the current thread, if
any. If no message is available, <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-receive))" class="RktValLink" pltdoc="x">thread-receive</a></span> blocks until
one is available.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread-try-receive))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-try-receive))" class="RktValLink" pltdoc="x">thread-try-receive</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Receives and dequeues a message queued for the current thread, if any,
or returns <span class="RktVal">#f</span> immediately if no message is available.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread-receive-evt))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-receive-evt))" class="RktValLink" pltdoc="x">thread-receive-evt</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="sync.html#(def._((quote._~23~25kernel)._evt~3f))" class="RktValLink" pltdoc="x">evt?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a constant <a href="sync.html#(tech._synchronizable._event)" class="techoutside" pltdoc="x"><span class="techinside">synchronizable event</span></a> (see <a href="sync.html" pltdoc="x">Events</a>)
that becomes ready when the synchronizing thread has a message to
receive. The event result is the event itself.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._thread-rewind-receive))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._thread-rewind-receive))" class="RktValLink" pltdoc="x">thread-rewind-receive</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">lst</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">lst</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._list~3f))" class="RktValLink" pltdoc="x">list?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Pushes the elements of <span class="RktVar">lst</span> back onto the front of the current
thread&rsquo;s queue. The elements are pushed one by one, so that the first
available message is the last element of <span class="RktVar">lst</span>.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.2.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.2.1&quot;);">top</a></span><span class="navright"><a href="concurrency.html" title="backward to &quot;10 Concurrency and Parallelism&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="concurrency.html" title="up to &quot;10 Concurrency and Parallelism&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="all-sync.html" title="forward to &quot;10.2 Synchronization&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>