<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>11.4&nbsp;Syntax Transformers</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="extras.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span style="font-weight: bold">The Racket Reference</span></a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="model.html" class="tocviewlink" pltdoc="x">Language Model</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="syntax.html" class="tocviewlink" pltdoc="x">Syntactic Forms</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="data.html" class="tocviewlink" pltdoc="x">Datatypes</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="structures.html" class="tocviewlink" pltdoc="x">Structures</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="mzlib_class.html" class="tocviewlink" pltdoc="x">Classes and Objects</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="mzlib_unit.html" class="tocviewlink" pltdoc="x">Units</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="contracts.html" class="tocviewlink" pltdoc="x">Contracts</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="match.html" class="tocviewlink" pltdoc="x">Pattern Matching</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="control.html" class="tocviewlink" pltdoc="x">Control Flow</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="concurrency.html" class="tocviewlink" pltdoc="x">Concurrency and Parallelism</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Macros.html" class="tocviewselflink" pltdoc="x">Macros</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="input-and-output.html" class="tocviewlink" pltdoc="x">Input and Output</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="security.html" class="tocviewlink" pltdoc="x">Reflection and Security</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="os.html" class="tocviewlink" pltdoc="x">Operating System</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="memory.html" class="tocviewlink" pltdoc="x">Memory Management</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="unsafe.html" class="tocviewlink" pltdoc="x">Unsafe Operations</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="running.html" class="tocviewlink" pltdoc="x">Running Racket</a></td></tr><tr><td align="right"></td><td><a href="doc-bibliography.html" class="tocviewlink" pltdoc="x">Bibliography</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>11&nbsp;</td><td><a href="Macros.html" class="tocviewlink" pltdoc="x">Macros</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">11.1&nbsp;</td><td><a href="stx-patterns.html" class="tocviewlink" pltdoc="x">Pattern-<wbr></wbr>Based Syntax Matching</a></td></tr><tr><td align="right">11.2&nbsp;</td><td><a href="stxops.html" class="tocviewlink" pltdoc="x">Syntax Object Content</a></td></tr><tr><td align="right">11.3&nbsp;</td><td><a href="stxcmp.html" class="tocviewlink" pltdoc="x">Syntax Object Bindings</a></td></tr><tr><td align="right">11.4&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Syntax Transformers</a></td></tr><tr><td align="right">11.5&nbsp;</td><td><a href="stxparam.html" class="tocviewlink" pltdoc="x">Syntax Parameters</a></td></tr><tr><td align="right">11.6&nbsp;</td><td><a href="splicing.html" class="tocviewlink" pltdoc="x">Local Binding with Splicing Body</a></td></tr><tr><td align="right">11.7&nbsp;</td><td><a href="stxprops.html" class="tocviewlink" pltdoc="x">Syntax Object Properties</a></td></tr><tr><td align="right">11.8&nbsp;</td><td><a href="stxcerts.html" class="tocviewlink" pltdoc="x">Syntax Taints</a></td></tr><tr><td align="right">11.9&nbsp;</td><td><a href="Expanding_Top-Level_Forms.html" class="tocviewlink" pltdoc="x">Expanding Top-<wbr></wbr>Level Forms</a></td></tr><tr><td align="right">11.10&nbsp;</td><td><a href="include.html" class="tocviewlink" pltdoc="x">File Inclusion</a></td></tr><tr><td align="right">11.11&nbsp;</td><td><a href="syntax-util.html" class="tocviewlink" pltdoc="x">Syntax Utilities</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>11.4&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Syntax Transformers</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">11.4.1&nbsp;</td><td><a href="#(part._require-trans)" class="tocviewlink" pltdoc="x"><span class="RktSym"><span class="RktStxLink">require</span></span> Transformers</a></td></tr><tr><td align="right">11.4.2&nbsp;</td><td><a href="#(part._provide-trans)" class="tocviewlink" pltdoc="x"><span class="RktSym"><span class="RktStxLink">provide</span></span> Transformers</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#(def._((quote._~23~25kernel)._set!-transformer~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">set!-<wbr></wbr>transformer?</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._make-set!-transformer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>set!-<wbr></wbr>transformer</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._set!-transformer-procedure))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">set!-<wbr></wbr>transformer-<wbr></wbr>procedure</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._prop~3aset!-transformer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">prop:<span class="mywbr"> </span>set!-<wbr></wbr>transformer</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._rename-transformer~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">rename-<wbr></wbr>transformer?</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._make-rename-transformer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>rename-<wbr></wbr>transformer</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._rename-transformer-target))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">rename-<wbr></wbr>transformer-<wbr></wbr>target</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._prop~3arename-transformer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">prop:<span class="mywbr"> </span>rename-<wbr></wbr>transformer</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._local-expand))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">local-<wbr></wbr>expand</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-expand-expression))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>expand-<wbr></wbr>expression</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._local-transformer-expand))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">local-<wbr></wbr>transformer-<wbr></wbr>expand</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._local-expand/capture-lifts))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">local-<wbr></wbr>expand/<span class="mywbr"> </span>capture-<wbr></wbr>lifts</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._local-transformer-expand/capture-lifts))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">local-<wbr></wbr>transformer-<wbr></wbr>expand/<span class="mywbr"> </span>capture-<wbr></wbr>lifts</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">internal-<wbr></wbr>definition-<wbr></wbr>context?</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-make-definition-context))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>make-<wbr></wbr>definition-<wbr></wbr>context</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-bind-syntaxes))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>bind-<wbr></wbr>syntaxes</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._internal-definition-context-seal))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">internal-<wbr></wbr>definition-<wbr></wbr>context-<wbr></wbr>seal</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._identifier-remove-from-definition-context))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">identifier-<wbr></wbr>remove-<wbr></wbr>from-<wbr></wbr>definition-<wbr></wbr>context</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-value))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>value</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-value/immediate))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>value/<span class="mywbr"> </span>immediate</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-expression))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>lift-<wbr></wbr>expression</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-values-expression))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>lift-<wbr></wbr>values-<wbr></wbr>expression</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-context))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>lift-<wbr></wbr>context</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-module-end-declaration))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>lift-<wbr></wbr>module-<wbr></wbr>end-<wbr></wbr>declaration</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-require))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>lift-<wbr></wbr>require</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-provide))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>lift-<wbr></wbr>provide</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-name))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>name</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-context))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>context</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-phase-level))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>phase-<wbr></wbr>level</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-module-exports))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>module-<wbr></wbr>exports</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-get-shadower))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>get-<wbr></wbr>shadower</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/private/base..rkt)._syntax-local-certifier))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>certifier</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>transforming?</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-transforming-module-expression~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>transforming-<wbr></wbr>module-<wbr></wbr>expression?</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-introduce))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>introduce</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._make-syntax-introducer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>syntax-<wbr></wbr>introducer</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._make-syntax-delta-introducer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>syntax-<wbr></wbr>delta-<wbr></wbr>introducer</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-make-delta-introducer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>make-<wbr></wbr>delta-<wbr></wbr>introducer</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-transforming-module-provides~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>transforming-<wbr></wbr>module-<wbr></wbr>provides?</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-module-defined-identifiers))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>module-<wbr></wbr>defined-<wbr></wbr>identifiers</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._syntax-local-module-required-identifiers))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>module-<wbr></wbr>required-<wbr></wbr>identifiers</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._prop~3aliberal-define-context))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">prop:<span class="mywbr"> </span>liberal-<wbr></wbr>define-<wbr></wbr>context</span></span></span></a></td></tr><tr><td><a href="#(def._((quote._~23~25kernel)._liberal-define-context~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/base, racket"><span class="RktSym"><span class="RktValLink">liberal-<wbr></wbr>define-<wbr></wbr>context?</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">11.4.1<tt>&nbsp;</tt></span><a href="#(part._require-trans)" class="tocsubseclink" pltdoc="x"><span class="RktSym"><span class="RktStxLink">require</span></span> Transformers</a></td></tr><tr><td><a href="#(def._((lib._racket/require-transform..rkt)._expand-import))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/require-transform"><span class="RktSym"><span class="RktValLink">expand-<wbr></wbr>import</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/require-transform..rkt)._make-require-transformer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/require-transform"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>require-<wbr></wbr>transformer</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/require-transform..rkt)._prop~3arequire-transformer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/require-transform"><span class="RktSym"><span class="RktValLink">prop:<span class="mywbr"> </span>require-<wbr></wbr>transformer</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/require-transform..rkt)._require-transformer~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/require-transform"><span class="RktSym"><span class="RktValLink">require-<wbr></wbr>transformer?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/require-transform..rkt)._import))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/require-transform"><span class="RktSym"><span class="RktValLink">import</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/require-transform..rkt)._import-source))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/require-transform"><span class="RktSym"><span class="RktValLink">import-<wbr></wbr>source</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/require-transform..rkt)._syntax-local-require-certifier))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/require-transform"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>require-<wbr></wbr>certifier</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">11.4.2<tt>&nbsp;</tt></span><a href="#(part._provide-trans)" class="tocsubseclink" pltdoc="x"><span class="RktSym"><span class="RktStxLink">provide</span></span> Transformers</a></td></tr><tr><td><a href="#(def._((lib._racket/provide-transform..rkt)._expand-export))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/provide-transform"><span class="RktSym"><span class="RktValLink">expand-<wbr></wbr>export</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/provide-transform..rkt)._pre-expand-export))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/provide-transform"><span class="RktSym"><span class="RktValLink">pre-<wbr></wbr>expand-<wbr></wbr>export</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/provide-transform..rkt)._make-provide-transformer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/provide-transform"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>provide-<wbr></wbr>transformer</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/provide-transform..rkt)._make-provide-pre-transformer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/provide-transform"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>provide-<wbr></wbr>pre-<wbr></wbr>transformer</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/provide-transform..rkt)._prop~3aprovide-transformer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/provide-transform"><span class="RktSym"><span class="RktValLink">prop:<span class="mywbr"> </span>provide-<wbr></wbr>transformer</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/provide-transform..rkt)._prop~3aprovide-pre-transformer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/provide-transform"><span class="RktSym"><span class="RktValLink">prop:<span class="mywbr"> </span>provide-<wbr></wbr>pre-<wbr></wbr>transformer</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/provide-transform..rkt)._provide-transformer~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/provide-transform"><span class="RktSym"><span class="RktValLink">provide-<wbr></wbr>transformer?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/provide-transform..rkt)._provide-pre-transformer~3f))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/provide-transform"><span class="RktSym"><span class="RktValLink">provide-<wbr></wbr>pre-<wbr></wbr>transformer?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/provide-transform..rkt)._export))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/provide-transform"><span class="RktSym"><span class="RktValLink">export</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/provide-transform..rkt)._syntax-local-provide-certifier))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: racket/provide-transform"><span class="RktSym"><span class="RktValLink">syntax-<wbr></wbr>local-<wbr></wbr>provide-<wbr></wbr>certifier</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.2.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.2.1&quot;);">top</a></span><span class="navright"><a href="stxcmp.html" title="backward to &quot;11.3 Syntax Object Bindings&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Macros.html" title="up to &quot;11 Macros&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="stxparam.html" title="forward to &quot;11.5 Syntax Parameters&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>11.4<tt>&nbsp;</tt><a name="(part._stxtrans)"></a>Syntax Transformers</h4><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._set!-transformer~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._set!-transformer~3f))" class="RktValLink" pltdoc="x">set!-transformer?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a value created by
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-set!-transformer))" class="RktValLink" pltdoc="x">make-set!-transformer</a></span> or an instance of a structure type with
the <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3aset!-transformer))" class="RktValLink" pltdoc="x">prop:set!-transformer</a></span> property, <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._make-set!-transformer))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-set!-transformer))" class="RktValLink" pltdoc="x">make-set!-transformer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._set!-transformer~3f))" class="RktValLink" pltdoc="x">set!-transformer?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Creates an <a href="syntax-model.html#(tech._assignment._transformer)" class="techoutside" pltdoc="x"><span class="techinside">assignment transformer</span></a> that cooperates with
<span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span>. If the result of <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-set!-transformer))" class="RktValLink" pltdoc="x">make-set!-transformer</a></span> is
bound to <span class="RktVar">id</span> as a <a href="syntax-model.html#(tech._transformer._binding)" class="techoutside" pltdoc="x"><span class="techinside">transformer binding</span></a>, then
<span class="RktVar">proc</span> is applied as a transformer when <span class="RktVar">id</span> is
used in an expression position, or when it is used as the target of a
<span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span> assignment as <span class="RktPn">(</span><span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span><span class="stt"> </span><span class="RktVar">id</span><span class="stt"> </span><span class="RktVar">expr</span><span class="RktPn">)</span>. When the
identifier appears as a <span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span> target, the entire <span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span>
expression is provided to the transformer.</div></p><p><table cellspacing="0" class="RktBlk"><tr><td><p>Example:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" class="RktStxLink" pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let-syntax))" class="RktStxLink" pltdoc="x">let-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-set!-transformer))" class="RktValLink" pltdoc="x">make-set!-transformer</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">stx</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._syntax-case))" class="RktStxLink" pltdoc="x">syntax-case</a></span><span class="hspace">&nbsp;</span><span class="RktSym">stx</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Redirect mutation of x to y</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">v</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktCmt">;</span><span class="RktCmt">&nbsp;</span><span class="RktCmt">Normal use of </span><span class="RktSym">x</span><span class="RktCmt"> really gets </span><span class="RktSym">x</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">id</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym">id</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym">x</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">3</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._list))" class="RktValLink" pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">'(1 3)</span></p></td></tr></table></blockquote></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._set!-transformer-procedure))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._set!-transformer-procedure))" class="RktValLink" pltdoc="x">set!-transformer-procedure</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">transformer</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">transformer</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._set!-transformer~3f))" class="RktValLink" pltdoc="x">set!-transformer?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the procedure that was passed to
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-set!-transformer))" class="RktValLink" pltdoc="x">make-set!-transformer</a></span> to create <span class="RktVar">transformer</span> or that
is identified by the <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3aset!-transformer))" class="RktValLink" pltdoc="x">prop:set!-transformer</a></span> property of
<span class="RktVar">transformer</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><a name="(def._((quote._~23~25kernel)._prop~3aset!-transformer))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3aset!-transformer))" class="RktValLink" pltdoc="x">prop:set!-transformer</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="structprops.html#(def._((quote._~23~25kernel)._struct-type-property~3f))" class="RktValLink" pltdoc="x">struct-type-property?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A <a href="structprops.html#(tech._structure._type._property)" class="techoutside" pltdoc="x"><span class="techinside">structure type property</span></a> to identify structure types that act
as <a href="syntax-model.html#(tech._assignment._transformer)" class="techoutside" pltdoc="x"><span class="techinside">assignment transformers</span></a> like the ones created by
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-set!-transformer))" class="RktValLink" pltdoc="x">make-set!-transformer</a></span>.</div></p><p>The property value must be an exact integer or procedure of one or two
arguments. In the former case, the integer designates a field within
the structure that should contain a procedure; the integer must be
between <span class="RktVal">0</span> (inclusive) and the number of non-automatic fields
in the structure type (exclusive, not counting supertype fields), and
the designated field must also be specified as immutable.</p><p>If the property value is a procedure of one argument, then the
procedure serves as a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> and for <span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span>
transformations. If the property value is a procedure of two
arguments, then the first argument is the structure whose type has
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3aset!-transformer))" class="RktValLink" pltdoc="x">prop:set!-transformer</a></span> property, and the second argument is a
syntax object as for a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> and for <span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span>
transformations; <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._set!-transformer-procedure))" class="RktValLink" pltdoc="x">set!-transformer-procedure</a></span> applied to the
structure produces a new function that accepts just the syntax object
and calls the procedure associated through the property. Finally, if the
property value is an integer, the target identifier is extracted from
the structure instance; if the field value is not a procedure of one
argument, then a procedure that always calls
<span class="RktSym"><a href="exns.html#(def._((quote._~23~25kernel)._raise-syntax-error))" class="RktValLink" pltdoc="x">raise-syntax-error</a></span> is used, instead.</p><p>If a value has both the <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3aset!-transformer))" class="RktValLink" pltdoc="x">prop:set!-transformer</a></span> and
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3arename-transformer))" class="RktValLink" pltdoc="x">prop:rename-transformer</a></span> properties, then the latter takes
precedence. If a structure type has the <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3aset!-transformer))" class="RktValLink" pltdoc="x">prop:set!-transformer</a></span>
and <span class="RktSym"><a href="procedures.html#(def._((lib._racket/private/base..rkt)._prop~3aprocedure))" class="RktValLink" pltdoc="x">prop:procedure</a></span> properties, then the former takes
precedence for the purposes of macro expansion.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._rename-transformer~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._rename-transformer~3f))" class="RktValLink" pltdoc="x">rename-transformer?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a value created by
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-rename-transformer))" class="RktValLink" pltdoc="x">make-rename-transformer</a></span> or an instance of a structure type
with the <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3arename-transformer))" class="RktValLink" pltdoc="x">prop:rename-transformer</a></span> property, <span class="RktVal">#f</span>
otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._make-rename-transformer))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-rename-transformer))" class="RktValLink" pltdoc="x">make-rename-transformer</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">id-stx</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktVar">delta-introduce</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._rename-transformer~3f))" class="RktValLink" pltdoc="x">rename-transformer?</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id-stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">delta-introduce</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">id</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">id</span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Creates a <a href="syntax-model.html#(tech._rename._transformer)" class="techoutside" pltdoc="x"><span class="techinside">rename transformer</span></a> that, when used as a
<a href="syntax-model.html#(tech._transformer._binding)" class="techoutside" pltdoc="x"><span class="techinside">transformer binding</span></a>, acts as a transformer that inserts the
identifier <span class="RktVar">id-stx</span> in place of whatever identifier binds the
transformer, including in non-application positions, in <span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span>
expressions.</div></p><p>Such a transformer could be written manually, but the one created by
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-rename-transformer))" class="RktValLink" pltdoc="x">make-rename-transformer</a></span> triggers special cooperation with the
parser and other syntactic forms when <span class="RktVar">id</span> is bound to the
rename transformer:</p><ul><li><p>The parser to installs a <span class="RktSym"><a href="stxcmp.html#(def._((quote._~23~25kernel)._free-identifier~3d~3f))" class="RktValLink" pltdoc="x">free-identifier=?</a></span> and
<span class="RktSym"><a href="stxcmp.html#(def._((quote._~23~25kernel)._identifier-binding))" class="RktValLink" pltdoc="x">identifier-binding</a></span> equivalence between <span class="RktVar">id</span>
and <span class="RktVar">id-stx</span>, as long as <span class="RktVar">id-stx</span> does not have
a true value for the <a name="(idx._(gentag._169._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">not-free-identifier=?</span>
<a href="stxprops.html#(tech._syntax._property)" class="techoutside" pltdoc="x"><span class="techinside">syntax property</span></a>.</p></li><li><p>A <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._provide))" class="RktStxLink" pltdoc="x">provide</a></span> of <span class="RktVar">id</span> provides the binding
indicated by <span class="RktVar">id-stx</span> instead of <span class="RktVar">id</span>, as long
as <span class="RktVar">id-stx</span> does not have a true value for the
<a name="(idx._(gentag._170._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">not-free-identifier=?</span> <a href="stxprops.html#(tech._syntax._property)" class="techoutside" pltdoc="x"><span class="techinside">syntax property</span></a>
and as long as <span class="RktVar">id-stx</span> has a binding.</p></li><li><p>If <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._provide))" class="RktStxLink" pltdoc="x">provide</a></span> exports <span class="RktVar">id</span>, it uses a
symbol-valued <a name="(idx._(gentag._171._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">nominal-id</span> property of
<span class="RktVar">id-stx</span> to specify the &ldquo;nominal source identifier&rdquo; of
the binding as reported by <span class="RktSym"><a href="stxcmp.html#(def._((quote._~23~25kernel)._identifier-binding))" class="RktValLink" pltdoc="x">identifier-binding</a></span>.</p></li><li><p>If <span class="RktVar">id-stx</span> has a true value for the
<a name="(idx._(gentag._172._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">not-provide-all-defined</span> <a href="stxprops.html#(tech._syntax._property)" class="techoutside" pltdoc="x"><span class="techinside">syntax
property</span></a>, then <span class="RktVar">id</span> (or its target) is not exported by
<span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._all-defined-out))" class="RktStxLink" pltdoc="x">all-defined-out</a></span>.</p></li><li><p>The <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-value))" class="RktValLink" pltdoc="x">syntax-local-value</a></span> and
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-make-delta-introducer))" class="RktValLink" pltdoc="x">syntax-local-make-delta-introducer</a></span> functions recognize
rename-transformer bindings and consult their targets.</p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._rename-transformer-target))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._rename-transformer-target))" class="RktValLink" pltdoc="x">rename-transformer-target</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">transformer</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">transformer</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._rename-transformer~3f))" class="RktValLink" pltdoc="x">rename-transformer?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the identifier passed to <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-rename-transformer))" class="RktValLink" pltdoc="x">make-rename-transformer</a></span> to
create <span class="RktVar">transformer</span> or as indicated by a
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3arename-transformer))" class="RktValLink" pltdoc="x">prop:rename-transformer</a></span> property on <span class="RktVar">transformer</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><a name="(def._((quote._~23~25kernel)._prop~3arename-transformer))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3arename-transformer))" class="RktValLink" pltdoc="x">prop:rename-transformer</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="structprops.html#(def._((quote._~23~25kernel)._struct-type-property~3f))" class="RktValLink" pltdoc="x">struct-type-property?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A <a href="structprops.html#(tech._structure._type._property)" class="techoutside" pltdoc="x"><span class="techinside">structure type property</span></a> to identify structure types that act
as <a href="syntax-model.html#(tech._rename._transformer)" class="techoutside" pltdoc="x"><span class="techinside">rename transformers</span></a> like the ones created by
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-rename-transformer))" class="RktValLink" pltdoc="x">make-rename-transformer</a></span>.</div></p><p>The property value must be an exact integer or an identifier
<a href="syntax-model.html#(tech._syntax._object)" class="techoutside" pltdoc="x"><span class="techinside">syntax object</span></a>. In the former case, the integer designates a
field within the structure that should contain an identifier; the
integer must be between <span class="RktVal">0</span> (inclusive) and the number of
non-automatic fields in the structure type (exclusive, not counting
supertype fields), and the designated field must also be specified as
immutable.</p><p>If the property value is an identifier, the identifier serves as the
target for renaming, just like the first argument to
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-rename-transformer))" class="RktValLink" pltdoc="x">make-rename-transformer</a></span>. If the property value is an integer,
the target identifier is extracted from the structure instance; if the
field value is not an identifier, then an identifier <span class="RktSym">?</span>
with an empty context is used, instead.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._local-expand))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._local-expand))" class="RktValLink" pltdoc="x">local-expand</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stx</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">context-v</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stop-ids</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktVar">intdef-ctx</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">context-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">expression</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">top-level</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">module</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">module-begin</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._list~3f))" class="RktValLink" pltdoc="x">list?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stop-ids</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">intdef-ctx</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="RktValLink" pltdoc="x">internal-definition-context?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._pair~3f))" class="RktValLink" pltdoc="x">pair?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="RktValLink" pltdoc="x">internal-definition-context?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVal">#f</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Expands <span class="RktVar">stx</span> in the lexical context of the expression
currently being expanded. The <span class="RktVar">context-v</span> argument is used as
the result of <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-context))" class="RktValLink" pltdoc="x">syntax-local-context</a></span> for immediate expansions;
a list indicates an <a href="syntax-model.html#(tech._internal._definition._context)" class="techoutside" pltdoc="x"><span class="techinside">internal-definition context</span></a>, and more
information on the form of the list is below.</div></p><p>When an identifier in <span class="RktVar">stop-ids</span> is encountered by the expander
in a sub-expression, expansions stops for the sub-expression. If
<span class="RktVar">stop-ids</span> is a non-empty list, then
<span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span>, <span class="RktSym"><a href="quote.html#(form._((quote._~23~25kernel)._quote))" class="RktStxLink" pltdoc="x">quote</a></span>, <span class="RktSym"><a href="set_.html#(form._((quote._~23~25kernel)._set!))" class="RktStxLink" pltdoc="x">set!</a></span>, <span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span>,
<span class="RktSym"><a href="lambda.html#(form._((quote._~23~25kernel)._case-lambda))" class="RktStxLink" pltdoc="x">case-lambda</a></span>, <span class="RktSym"><a href="let.html#(form._((quote._~23~25kernel)._let-values))" class="RktStxLink" pltdoc="x">let-values</a></span>, <span class="RktSym"><a href="let.html#(form._((quote._~23~25kernel)._letrec-values))" class="RktStxLink" pltdoc="x">letrec-values</a></span>,
<span class="RktSym"><a href="if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span>, <span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin0))" class="RktStxLink" pltdoc="x">begin0</a></span>, <span class="RktSym"><a href="wcm.html#(form._((quote._~23~25kernel)._with-continuation-mark))" class="RktStxLink" pltdoc="x">with-continuation-mark</a></span>,
<span class="RktSym"><a href="let.html#(form._((quote._~23~25kernel)._letrec-syntaxes+values))" class="RktStxLink" pltdoc="x">letrec-syntaxes+values</a></span>, <span class="RktSym"><a href="application.html#(form._((lib._racket/private/base..rkt)._~23~25app))" class="RktStxLink" pltdoc="x">#%app</a></span>,
<span class="RktSym"><a href="__expression.html#(form._((quote._~23~25kernel)._~23~25expression))" class="RktStxLink" pltdoc="x">#%expression</a></span>, <span class="RktSym"><a href="__top.html#(form._((quote._~23~25kernel)._~23~25top))" class="RktStxLink" pltdoc="x">#%top</a></span>, and
<span class="RktSym"><a href="Locations____variable-reference.html#(form._((quote._~23~25kernel)._~23~25variable-reference))" class="RktStxLink" pltdoc="x">#%variable-reference</a></span> are added to <span class="RktVar">stop-ids</span>.  If
<span class="RktSym"><a href="application.html#(form._((lib._racket/private/base..rkt)._~23~25app))" class="RktStxLink" pltdoc="x">#%app</a></span>, <span class="RktSym"><a href="__top.html#(form._((quote._~23~25kernel)._~23~25top))" class="RktStxLink" pltdoc="x">#%top</a></span>, or <span class="RktSym"><a href="quote.html#(form._((quote._~23~25kernel)._~23~25datum))" class="RktStxLink" pltdoc="x">#%datum</a></span> appears in
<span class="RktVar">stop-ids</span>, then application, top-level variable reference, and
literal data expressions without the respective explicit form are not
wrapped with the explicit form. If <span class="RktVar">stop-ids</span> is <span class="RktVal">#f</span>
instead of a list, then <span class="RktVar">stx</span> is expanded only as long as the
outermost form of <span class="RktVar">stx</span> is a macro (i.e., expansion does not
proceed to sub-expressions). A fully expanded form can include the
bindings listed in <a href="syntax-model.html#(part._fully-expanded)" pltdoc="x">Fully Expanded Programs</a> plus the
<span class="RktSym"><a href="let.html#(form._((quote._~23~25kernel)._letrec-syntaxes+values))" class="RktStxLink" pltdoc="x">letrec-syntaxes+values</a></span> form and <span class="RktSym"><a href="__expression.html#(form._((quote._~23~25kernel)._~23~25expression))" class="RktStxLink" pltdoc="x">#%expression</a></span>
in any expression position.</p><p>The optional <span class="RktVar">intdef-ctx</span> argument must be either <span class="RktVal">#f</span>,
the result of <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-make-definition-context))" class="RktValLink" pltdoc="x">syntax-local-make-definition-context</a></span>, or a list
of such results. In the latter two cases, lexical information for
internal definitions is added to <span class="RktVar">stx</span> before it is expanded
(in reverse order relative to the list). The lexical information is
also added to the expansion result (because the expansion might
introduce bindings or references to internal-definition bindings).</p><p>For a particular <a href="syntax-model.html#(tech._internal._definition._context)" class="techoutside" pltdoc="x"><span class="techinside">internal-definition context</span></a>, generate a unique
value and put it into a list for <span class="RktVar">context-v</span>. To allow
<a href="#(tech._liberal._expansion)" class="techoutside" pltdoc="x"><span class="techinside">liberal expansion</span></a> of <span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span> forms, the generated value
should be an instance of a structure with a true value for
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3aliberal-define-context))" class="RktValLink" pltdoc="x">prop:liberal-define-context</a></span>. If the internal-definition
context is meant to be self-contained, the list for <span class="RktVar">context-v</span>
should contain only the generated value; if the internal-definition
context is meant to splice into an immediately enclosing context, then
when <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-context))" class="RktValLink" pltdoc="x">syntax-local-context</a></span> produces a list, <span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._cons))" class="RktValLink" pltdoc="x">cons</a></span> the
generated value onto that list.</p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><table cellspacing="0" class="RktBlk"><tr><td><p>Examples:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="stx-patterns.html#(form._((lib._racket/private/misc..rkt)._define-syntax-rule))" class="RktStxLink" pltdoc="x">define-syntax-rule</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">do-print</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Writing.html#(def._((quote._~23~25kernel)._printf))" class="RktValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="stx-patterns.html#(form._((lib._racket/private/misc..rkt)._define-syntax-rule))" class="RktStxLink" pltdoc="x">define-syntax-rule</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">hello</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">do-print</span><span class="hspace">&nbsp;</span><span class="RktVal">"hello ~a"</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define-syntax))" class="RktStxLink" pltdoc="x">define-syntax</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">show</span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._syntax-case))" class="RktStxLink" pltdoc="x">syntax-case</a></span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym"><a href="stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt).__))" class="RktStxLink" pltdoc="x">_</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" class="RktStxLink" pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">partly</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._local-expand))" class="RktValLink" pltdoc="x">local-expand</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym">hello</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">expression</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._list))" class="RktValLink" pltdoc="x">list</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktSym">do-print</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">fully</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._local-expand))" class="RktValLink" pltdoc="x">local-expand</a></span><span class="hspace">&nbsp;</span><span class="RktRdr">#'</span><span class="RktPn">(</span><span class="RktSym">hello</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">'</span><span class="RktVal">expression</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Writing.html#(def._((quote._~23~25kernel)._printf))" class="RktValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"partly expanded: ~s\n"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax-~3edatum))" class="RktValLink" pltdoc="x">syntax-&gt;datum</a></span><span class="hspace">&nbsp;</span><span class="RktSym">partly</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Writing.html#(def._((quote._~23~25kernel)._printf))" class="RktValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"fully expanded: ~s\n"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax-~3edatum))" class="RktValLink" pltdoc="x">syntax-&gt;datum</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fully</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">fully</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym">show</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0"><tr><td><p><span class="RktOut">partly expanded: (do-print "hello ~a" 1)</span></p></td></tr><tr><td><p><span class="RktOut">fully expanded: (printf "hello ~a" 1)</span></p></td></tr><tr><td><p><span class="RktOut">hello 1</span></p></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr></table></blockquote></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-expand-expression))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-expand-expression))" class="RktValLink" pltdoc="x">syntax-local-expand-expression</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0"><tr><td><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._local-expand))" class="RktValLink" pltdoc="x">local-expand</a></span> given <span class="RktVal">'</span><span class="RktVal">expression</span> and an empty
stop list, but with two results: a syntax object for the fully
expanded expression, and a syntax object whose content is opaque. The
latter can be used in place of the former (perhaps in a larger
expression produced by a macro transformer), and when the macro
expander encounters the opaque object, it substitutes the fully
expanded expression without re-expanding it; the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3asyntax))" class="RktValLink" pltdoc="x">exn:fail:syntax</a></span> exception is raised if the expansion context includes bindings
or marks that were not present for the original expansion, in which
case re-expansion might produce different results. Consistent use of
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-expand-expression))" class="RktValLink" pltdoc="x">syntax-local-expand-expression</a></span> and the opaque object thus
avoids quadratic expansion times when local expansions are nested.</div></p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._local-transformer-expand))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._local-transformer-expand))" class="RktValLink" pltdoc="x">local-transformer-expand</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stx</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">context-v</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stop-ids</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktVar">intdef-ctx</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">context-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">expression</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">top-level</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">module</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">module-begin</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._list~3f))" class="RktValLink" pltdoc="x">list?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stop-ids</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">intdef-ctx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="RktValLink" pltdoc="x">internal-definition-context?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._local-expand))" class="RktValLink" pltdoc="x">local-expand</a></span>, but <span class="RktVar">stx</span> is expanded as a
transformer expression instead of a run-time expression, and any
lifted expressions&#8212;<wbr></wbr>from calls to
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-expression))" class="RktValLink" pltdoc="x">syntax-local-lift-expression</a></span> during the expansion of
<span class="RktVar">stx</span>&#8212;<wbr></wbr>are captured into a <span class="RktSym"><a href="let.html#(form._((quote._~23~25kernel)._let-values))" class="RktStxLink" pltdoc="x">let-values</a></span> form in the
result.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._local-expand/capture-lifts))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._local-expand/capture-lifts))" class="RktValLink" pltdoc="x">local-expand/capture-lifts</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stx</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">context-v</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stop-ids</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktVar">intdef-ctx</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">lift-ctx</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">context-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">expression</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">top-level</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">module</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">module-begin</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._list~3f))" class="RktValLink" pltdoc="x">list?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stop-ids</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">intdef-ctx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="RktValLink" pltdoc="x">internal-definition-context?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">lift-ctx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="symbols.html#(def._((quote._~23~25kernel)._gensym))" class="RktValLink" pltdoc="x">gensym</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">lifts</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._local-expand))" class="RktValLink" pltdoc="x">local-expand</a></span>, but the result is a syntax object that
represents a <span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span> expression. Lifted expressions&#8212;<wbr></wbr>from
calls to <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-expression))" class="RktValLink" pltdoc="x">syntax-local-lift-expression</a></span> during the expansion of
<span class="RktVar">stx</span>&#8212;<wbr></wbr>appear with their identifiers in <span class="RktSym"><a href="define.html#(form._((quote._~23~25kernel)._define-values))" class="RktStxLink" pltdoc="x">define-values</a></span>
forms, and the expansion of <span class="RktVar">stx</span> is the last expression in the
<span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span>. The <span class="RktVar">lift-ctx</span> value is reported by
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-context))" class="RktValLink" pltdoc="x">syntax-local-lift-context</a></span> during local expansion. The lifted
expressions are not expanded, but instead left as provided in the
<span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin))" class="RktStxLink" pltdoc="x">begin</a></span> form.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._local-transformer-expand/capture-lifts))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._local-transformer-expand/capture-lifts))" class="RktValLink" pltdoc="x">local-transformer-expand/capture-lifts</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stx</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">context-v</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stop-ids</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktVar">intdef-ctx</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">lift-ctx</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">context-v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">expression</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">top-level</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">module</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">module-begin</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._list~3f))" class="RktValLink" pltdoc="x">list?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stop-ids</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">intdef-ctx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="RktValLink" pltdoc="x">internal-definition-context?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">lift-ctx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="symbols.html#(def._((quote._~23~25kernel)._gensym))" class="RktValLink" pltdoc="x">gensym</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">lifts</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._local-expand/capture-lifts))" class="RktValLink" pltdoc="x">local-expand/capture-lifts</a></span>, but <span class="RktVar">stx</span> is expanded
as a transformer expression instead of a run-time expression. Lifted
expressions are reported as <span class="RktSym"><a href="define.html#(form._((quote._~23~25kernel)._define-values))" class="RktStxLink" pltdoc="x">define-values</a></span> forms (in the
transformer environment).</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._internal-definition-context~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="RktValLink" pltdoc="x">internal-definition-context?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is an <a href="syntax-model.html#(tech._internal._definition._context)" class="techoutside" pltdoc="x"><span class="techinside">internal-definition
context</span></a>, <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-make-definition-context))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-make-definition-context))" class="RktValLink" pltdoc="x">syntax-local-make-definition-context</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">intdef-ctx</span>]<span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="RktValLink" pltdoc="x">internal-definition-context?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">intdef-ctx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="RktValLink" pltdoc="x">internal-definition-context?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Creates an opaque <a href="syntax-model.html#(tech._internal._definition._context)" class="techoutside" pltdoc="x"><span class="techinside">internal-definition context</span></a> value to be used
with <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._local-expand))" class="RktValLink" pltdoc="x">local-expand</a></span> and other functions. A transformer should
create one context for each set of internal definitions to be
expanded, and use it when expanding any form whose lexical context
should include the definitions. After discovering an internal
<span class="RktSym"><a href="define.html#(form._((quote._~23~25kernel)._define-values))" class="RktStxLink" pltdoc="x">define-values</a></span> or <span class="RktSym"><a href="define.html#(form._((quote._~23~25kernel)._define-syntaxes))" class="RktStxLink" pltdoc="x">define-syntaxes</a></span> form, use
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-bind-syntaxes))" class="RktValLink" pltdoc="x">syntax-local-bind-syntaxes</a></span> to add bindings to the context.
Finally, the transformer must call
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context-seal))" class="RktValLink" pltdoc="x">internal-definition-context-seal</a></span> after all bindings have been
added; if an unsealed <a href="syntax-model.html#(tech._internal._definition._context)" class="techoutside" pltdoc="x"><span class="techinside">internal-definition context</span></a> is detected
in a fully expanded expression, the <span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</div></p><p>If <span class="RktVar">intdef-ctx</span> is not <span class="RktVal">#f</span>, then the new
internal-definition context extends the given one. That is, expanding
in the new internal-definition context can use bindings previously
introduced into <span class="RktVar">intdef-ctx</span>.</p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-bind-syntaxes))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-bind-syntaxes))" class="RktValLink" pltdoc="x">syntax-local-bind-syntaxes</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">id-list</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">expr</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">intdef-ctx</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id-list</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">expr</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">intdef-ctx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="RktValLink" pltdoc="x">internal-definition-context?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Binds each identifier in <span class="RktVar">id-list</span> within the
<a href="syntax-model.html#(tech._internal._definition._context)" class="techoutside" pltdoc="x"><span class="techinside">internal-definition context</span></a> represented by <span class="RktVar">intdef-ctx</span>, where
<span class="RktVar">intdef-ctx</span> is the result of
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-make-definition-context))" class="RktValLink" pltdoc="x">syntax-local-make-definition-context</a></span>. Supply <span class="RktVal">#f</span> for
<span class="RktVar">expr</span> when the identifiers correspond to
<span class="RktSym"><a href="define.html#(form._((quote._~23~25kernel)._define-values))" class="RktStxLink" pltdoc="x">define-values</a></span> bindings, and supply a compile-time expression
when the identifiers correspond to <span class="RktSym"><a href="define.html#(form._((quote._~23~25kernel)._define-syntaxes))" class="RktStxLink" pltdoc="x">define-syntaxes</a></span> bindings;
in the latter case, the number of values produced by the expression should
match the number of identifiers, otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract~3aarity))" class="RktValLink" pltdoc="x">exn:fail:contract:arity</a></span> exception is raised.</div></p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._internal-definition-context-seal))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context-seal))" class="RktValLink" pltdoc="x">internal-definition-context-seal</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">intdef-ctx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">intdef-ctx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="RktValLink" pltdoc="x">internal-definition-context?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Indicates that no further bindings will be added to
<span class="RktVar">intdef-ctx</span>, which must not be sealed already. See also
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-make-definition-context))" class="RktValLink" pltdoc="x">syntax-local-make-definition-context</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._identifier-remove-from-definition-context))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._identifier-remove-from-definition-context))" class="RktValLink" pltdoc="x">identifier-remove-from-definition-context</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">id-stx</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">intdef-ctx</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id-stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">intdef-ctx</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="RktValLink" pltdoc="x">internal-definition-context?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="RktValLink" pltdoc="x">internal-definition-context?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Removes <span class="RktVar">intdef-ctx</span> (or each identifier in the list) from the
<a href="syntax-model.html#(tech._lexical._information)" class="techoutside" pltdoc="x"><span class="techinside">lexical information</span></a> of <span class="RktVar">id-stx</span>. This operation is
useful for correlating an identifier that is bound in an
internal-definition context with its binding before the
internal-definition context was created.</div></p><p>If simply removing the contexts produces a different binding than
completely ignoring the contexts (due to nested internal definition
contexts, for example), then the resulting identifier is given a
<a href="syntax-model.html#(tech._syntax._mark)" class="techoutside" pltdoc="x"><span class="techinside">syntax mark</span></a> to simulate a non-existent lexical context. The
<span class="RktVar">intdef-ctx</span> argument can be a list because removing
internal-definition contexts one at a time can produce a different
intermediate binding than removing them all at once.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-value))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-value))" class="RktValLink" pltdoc="x">syntax-local-value</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">id-stx</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktVar">failure-thunk</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">intdef-ctx</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="data-structure-contracts.html#(form._((lib._racket/contract/private/misc..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id-stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">failure-thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(form._((lib._racket/contract/private/misc..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">intdef-ctx</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="RktValLink" pltdoc="x">internal-definition-context?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVal">#f</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Returns the <a href="syntax-model.html#(tech._transformer._binding)" class="techoutside" pltdoc="x"><span class="techinside">transformer binding</span></a> value of <span class="RktVar">id-stx</span> in
either the context associated with <span class="RktVar">intdef-ctx</span> (if not
<span class="RktVal">#f</span>) or the context of the expression being expanded (if
<span class="RktVar">intdef-ctx</span> is <span class="RktVal">#f</span>).  If <span class="RktVar">intdef-ctx</span> is
provided, it must be an extension of the context of the expression
being expanded.</div></p><p>If <span class="RktVar">id-stx</span> is bound to a <a href="syntax-model.html#(tech._rename._transformer)" class="techoutside" pltdoc="x"><span class="techinside">rename transformer</span></a> created
with <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-rename-transformer))" class="RktValLink" pltdoc="x">make-rename-transformer</a></span>, <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-value))" class="RktValLink" pltdoc="x">syntax-local-value</a></span>
effectively calls itself with the target of the rename and returns
that result, instead of the <a href="syntax-model.html#(tech._rename._transformer)" class="techoutside" pltdoc="x"><span class="techinside">rename transformer</span></a>.</p><p>If <span class="RktVar">id-stx</span> has no <a href="syntax-model.html#(tech._transformer._binding)" class="techoutside" pltdoc="x"><span class="techinside">transformer binding</span></a> (via
<span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define-syntax))" class="RktStxLink" pltdoc="x">define-syntax</a></span>, <span class="RktSym"><a href="let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let-syntax))" class="RktStxLink" pltdoc="x">let-syntax</a></span>, etc.) in that
environment, the result is obtained by applying <span class="RktVar">failure-thunk</span>
if not <span class="RktVal">#f</span>. If <span class="RktVar">failure-thunk</span> is <span class="RktSym"><a href="booleans.html#(def._((lib._racket/bool..rkt)._false))" class="RktValLink" pltdoc="x">false</a></span>, the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-value/immediate))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-value/immediate))" class="RktValLink" pltdoc="x">syntax-local-value/immediate</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">id-stx</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktVar">failure-thunk</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">intdef-ctx</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="data-structure-contracts.html#(form._((lib._racket/contract/private/misc..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id-stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">failure-thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(form._((lib._racket/contract/private/misc..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">intdef-ctx</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._internal-definition-context~3f))" class="RktValLink" pltdoc="x">internal-definition-context?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVal">#f</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-value))" class="RktValLink" pltdoc="x">syntax-local-value</a></span>, but the result is normally two
values. If <span class="RktVar">id-stx</span> is bound to a <a href="syntax-model.html#(tech._rename._transformer)" class="techoutside" pltdoc="x"><span class="techinside">rename transformer</span></a>,
the results are the rename transformer and the identifier in the
transformer. <span class="refelem"><span class="refcolumn"><span class="refcontent">Beware that <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._provide))" class="RktStxLink" pltdoc="x">provide</a></span> on an
<span class="RktVar">id</span> bound to a <a href="syntax-model.html#(tech._rename._transformer)" class="techoutside" pltdoc="x"><span class="techinside">rename transformer</span></a> may export the
target of the rename instead of <span class="RktVar">id</span>. See
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-rename-transformer))" class="RktValLink" pltdoc="x">make-rename-transformer</a></span> for more information.</span></span></span> If
<span class="RktVar">id-stx</span> is not bound to a <a href="syntax-model.html#(tech._rename._transformer)" class="techoutside" pltdoc="x"><span class="techinside">rename transformer</span></a>, then the
results are the value that <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-value))" class="RktValLink" pltdoc="x">syntax-local-value</a></span> would produce
and <span class="RktVal">#f</span>.</div></p><p>If <span class="RktVar">id-stx</span> has no transformer binding, then
<span class="RktVar">failure-thunk</span> is called (and it can return any number of
values), or an exception is raised if <span class="RktVar">failure-thunk</span> is
<span class="RktVal">#f</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-lift-expression))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-expression))" class="RktValLink" pltdoc="x">syntax-local-lift-expression</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a fresh identifier, and cooperates with the <span class="RktSym"><a href="module.html#(form._((quote._~23~25kernel)._module))" class="RktStxLink" pltdoc="x">module</a></span>,
<span class="RktSym"><a href="let.html#(form._((quote._~23~25kernel)._letrec-syntaxes+values))" class="RktStxLink" pltdoc="x">letrec-syntaxes+values</a></span>, <span class="RktSym"><a href="define.html#(form._((quote._~23~25kernel)._define-syntaxes))" class="RktStxLink" pltdoc="x">define-syntaxes</a></span>,
<span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin-for-syntax))" class="RktStxLink" pltdoc="x">begin-for-syntax</a></span>, and top-level expanders to bind the
generated identifier to the expression <span class="RktVar">stx</span>.</div></p><p>A run-time expression within a module is lifted to the module&rsquo;s top
level, just before the expression whose expansion requests the
lift. Similarly, a run-time expression outside of a module is lifted
to a top-level definition. A compile-time expression in a
<span class="RktSym"><a href="let.html#(form._((quote._~23~25kernel)._letrec-syntaxes+values))" class="RktStxLink" pltdoc="x">letrec-syntaxes+values</a></span> or <span class="RktSym"><a href="define.html#(form._((quote._~23~25kernel)._define-syntaxes))" class="RktStxLink" pltdoc="x">define-syntaxes</a></span> binding is
lifted to a <span class="RktSym"><a href="let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" class="RktStxLink" pltdoc="x">let</a></span> wrapper around the corresponding right-hand
side of the binding. A compile-time expression within
<span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin-for-syntax))" class="RktStxLink" pltdoc="x">begin-for-syntax</a></span> is lifted to a <span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span>
declaration just before the requesting expression within the
<span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin-for-syntax))" class="RktStxLink" pltdoc="x">begin-for-syntax</a></span>.</p><p>Other syntactic forms can capture lifts by using
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._local-expand/capture-lifts))" class="RktValLink" pltdoc="x">local-expand/capture-lifts</a></span> or
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._local-transformer-expand/capture-lifts))" class="RktValLink" pltdoc="x">local-transformer-expand/capture-lifts</a></span>.</p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-lift-values-expression))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-values-expression))" class="RktValLink" pltdoc="x">syntax-local-lift-values-expression</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">n</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-expression))" class="RktValLink" pltdoc="x">syntax-local-lift-expression</a></span>, but binds the result to
<span class="RktVar">n</span> identifiers, and returns a list of the <span class="RktVar">n</span>
identifiers.</div></p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-lift-context))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-context))" class="RktValLink" pltdoc="x">syntax-local-lift-context</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a value that represents the target for expressions lifted via
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-expression))" class="RktValLink" pltdoc="x">syntax-local-lift-expression</a></span>. That is, for different
transformer calls for which this procedure returns the same value (as
determined by <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span>), lifted expressions for the two
transformer are moved to the same place. Thus, the result is useful
for caching lift information to avoid redundant lifts.</div></p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-lift-module-end-declaration))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-module-end-declaration))" class="RktValLink" pltdoc="x">syntax-local-lift-module-end-declaration</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Cooperates with the <span class="RktSym"><a href="module.html#(form._((quote._~23~25kernel)._module))" class="RktStxLink" pltdoc="x">module</a></span> form to insert <span class="RktVar">stx</span> as
a top-level declaration at the end of the module currently being
expanded. If the current expression being
transformed is in <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase level</span></a> 0 and not in the module top-level, then <span class="RktVar">stx</span> is
eventually expanded in an expression context. If the current expression being
transformed is in a higher <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase level</span></a> (i.e., nested within some
number of <span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin-for-syntax))" class="RktStxLink" pltdoc="x">begin-for-syntax</a></span>es within a module top-level), then the lifted declaration
is placed at the very end of the module (under a suitable number of
<span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin-for-syntax))" class="RktStxLink" pltdoc="x">begin-for-syntax</a></span>es), instead of merely the end of the
enclosing <span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin-for-syntax))" class="RktStxLink" pltdoc="x">begin-for-syntax</a></span>.</div></p><p><div class="SIntrapara">This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</div><div class="SIntrapara"> If the current expression being transformed is not
within a <span class="RktSym"><a href="module.html#(form._((quote._~23~25kernel)._module))" class="RktStxLink" pltdoc="x">module</a></span> form (see <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming-module-expression~3f))" class="RktValLink" pltdoc="x">syntax-transforming-module-expression?</a></span>),
then the <span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-lift-require))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-require))" class="RktValLink" pltdoc="x">syntax-local-lift-require</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">raw-require-spec</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">stx</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">raw-require-spec</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Lifts a <span class="RktSym"><a href="require.html#(form._((quote._~23~25kernel)._~23~25require))" class="RktStxLink" pltdoc="x">#%require</a></span> form corresponding to
<span class="RktVar">raw-require-spec</span> (either as a <a href="syntax-model.html#(tech._syntax._object)" class="techoutside" pltdoc="x"><span class="techinside">syntax object</span></a> or datum)
to the top-level or to the top of the module currently being expanded
 or to an enclosing <span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin-for-syntax))" class="RktStxLink" pltdoc="x">begin-for-syntax</a></span>..</div></p><p>The resulting syntax object is the same as <span class="RktVar">stx</span>, except that a
fresh <a href="syntax-model.html#(tech._syntax._mark)" class="techoutside" pltdoc="x"><span class="techinside">syntax mark</span></a> is added. The same <a href="syntax-model.html#(tech._syntax._mark)" class="techoutside" pltdoc="x"><span class="techinside">syntax mark</span></a> is
added to the lifted <span class="RktSym"><a href="require.html#(form._((quote._~23~25kernel)._~23~25require))" class="RktStxLink" pltdoc="x">#%require</a></span> form, so that the
<span class="RktSym"><a href="require.html#(form._((quote._~23~25kernel)._~23~25require))" class="RktStxLink" pltdoc="x">#%require</a></span> form can bind uses of imported identifiers in the
resulting syntax object (assuming that the lexical information of
<span class="RktVar">stx</span> includes the binding environment into which the
<span class="RktSym"><a href="require.html#(form._((quote._~23~25kernel)._~23~25require))" class="RktStxLink" pltdoc="x">#%require</a></span> is lifted).</p><p>If <span class="RktVar">raw-require-spec</span> and <span class="RktVar">stx</span> are part of the input to
a transformer, then typically <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-introduce))" class="RktValLink" pltdoc="x">syntax-local-introduce</a></span> should be
applied to each before passing them to
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-require))" class="RktValLink" pltdoc="x">syntax-local-lift-require</a></span>, and then
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-introduce))" class="RktValLink" pltdoc="x">syntax-local-introduce</a></span> should be applied to the result of
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-require))" class="RktValLink" pltdoc="x">syntax-local-lift-require</a></span>. Otherwise, marks added
by the macro expander can prevent access to the new imports.</p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-lift-provide))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-provide))" class="RktValLink" pltdoc="x">syntax-local-lift-provide</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">raw-provide-spec-stx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">raw-provide-spec-stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Lifts a <span class="RktSym"><a href="require.html#(form._((quote._~23~25kernel)._~23~25provide))" class="RktStxLink" pltdoc="x">#%provide</a></span> form corresponding to
<span class="RktVar">raw-provide-spec-stx</span> to the top of the module currently being
expanded or to an enclosing <span class="RktSym"><a href="begin.html#(form._((quote._~23~25kernel)._begin-for-syntax))" class="RktStxLink" pltdoc="x">begin-for-syntax</a></span>.</div></p><p><div class="SIntrapara">This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</div><div class="SIntrapara"> If the current expression being transformed is not
within a <span class="RktSym"><a href="module.html#(form._((quote._~23~25kernel)._module))" class="RktStxLink" pltdoc="x">module</a></span> form (see <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming-module-expression~3f))" class="RktValLink" pltdoc="x">syntax-transforming-module-expression?</a></span>),
then the <span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-name))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-name))" class="RktValLink" pltdoc="x">syntax-local-name</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns an inferred name for the expression position being
transformed, or <span class="RktVal">#f</span> if no such name is available. A name is
normally a symbol or an identifier. See also <a href="syntax-model.html#(part._infernames)" pltdoc="x">Inferred Value Names</a>.</div></p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-context))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-context))" class="RktValLink" pltdoc="x">syntax-local-context</a></span></span><span class="RktPn"></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">expression</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">top-level</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">module</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">module-begin</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="pairs.html#(def._((quote._~23~25kernel)._list~3f))" class="RktValLink" pltdoc="x">list?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns an indication of the context for expansion that triggered a
<a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> call. See <a href="syntax-model.html#(part._expand-context-model)" pltdoc="x">Expansion Context</a>
for more information on contexts.</div></p><p>The symbol results indicate that the expression is being expanded for
an <a href="syntax-model.html#(tech._expression._context)" class="techoutside" pltdoc="x"><span class="techinside">expression context</span></a>, a <a href="syntax-model.html#(tech._top._level._context)" class="techoutside" pltdoc="x"><span class="techinside">top-level context</span></a>, a
<a href="syntax-model.html#(tech._module._context)" class="techoutside" pltdoc="x"><span class="techinside">module context</span></a>, or a <a href="syntax-model.html#(tech._module._begin._context)" class="techoutside" pltdoc="x"><span class="techinside">module-begin context</span></a>.</p><p>A list result indicates expansion in an <a href="syntax-model.html#(tech._internal._definition._context)" class="techoutside" pltdoc="x"><span class="techinside">internal-definition
context</span></a>. The identity of the list&rsquo;s first element (i.e., its
<span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span>ness) reflects the identity of the internal-definition
context; in particular two transformer expansions receive the same
first value if and only if they are invoked for the same
<a href="syntax-model.html#(tech._internal._definition._context)" class="techoutside" pltdoc="x"><span class="techinside">internal-definition context</span></a>. Later values in the list similarly
identify <a href="syntax-model.html#(tech._internal._definition._context)" class="techoutside" pltdoc="x"><span class="techinside">internal-definition contexts</span></a> that are still being expanded,
and that required the expansion of nested internal-definition
contexts.</p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-phase-level))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-phase-level))" class="RktValLink" pltdoc="x">syntax-local-phase-level</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">During the dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application
by the expander, the result is the <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase level</span></a> of the form
being expanded. Otherwise, the result is <span class="RktVal">0</span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-module-exports))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-module-exports))" class="RktValLink" pltdoc="x">syntax-local-module-exports</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">mod-path</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mod-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path~3f))" class="RktValLink" pltdoc="x">module-path?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns three lists of symbols that represent the <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._provide))" class="RktStxLink" pltdoc="x">provide</a></span>d
bindings of the module named by <span class="RktVar">mod-path</span>. The first list
corresponds to the <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase level</span></a> 0 exports of the module, the
second list corresponds to the <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase level</span></a> -1 exports of the
module, and the last list corresponds to the <a href="syntax-model.html#(tech._label._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">label phase level</span></a>
exports of the module.</div></p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-get-shadower))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-get-shadower))" class="RktValLink" pltdoc="x">syntax-local-get-shadower</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id-stx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id-stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVar">id-stx</span> if no binding in the current expansion context
shadows <span class="RktVar">id-stx</span> (ignoring unsealed <a href="syntax-model.html#(tech._internal._definition._context)" class="techoutside" pltdoc="x"><span class="techinside">internal-definition
contexts</span></a> and identifiers that had the <a name="(idx._(gentag._173._(lib._scribblings/reference/reference..scrbl)))"></a><span class="RktVal">'</span><span class="RktVal">unshadowable</span>
<a href="stxprops.html#(tech._syntax._property)" class="techoutside" pltdoc="x"><span class="techinside">syntax property</span></a>), if <span class="RktVar">id-stx</span> has no module bindings in
its lexical information, and if the current expansion context is not a
<a href="syntax-model.html#(tech._module._context)" class="techoutside" pltdoc="x"><span class="techinside">module context</span></a>.</div></p><p>If a binding of <span class="RktSym">inner-identifier</span> shadows <span class="RktVar">id-stx</span>, the
result is the same as <span class="RktPn">(</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-get-shadower))" class="RktValLink" pltdoc="x">syntax-local-get-shadower</a></span><span class="stt"> </span><span class="RktSym">inner-identifier</span><span class="RktPn">)</span>, except that it has the location and properties of
<span class="RktVar">id-stx</span>. When searching for a shadowing binding, bindings from
unsealed <a href="syntax-model.html#(tech._internal._definition._context)" class="techoutside" pltdoc="x"><span class="techinside">internal-definition contexts</span></a> are ignored.</p><p>Otherwise, the result is the same as <span class="RktVar">id-stx</span> with its module
bindings (if any) removed from its lexical information, and the
lexical information of the current <a href="syntax-model.html#(tech._module._context)" class="techoutside" pltdoc="x"><span class="techinside">module context</span></a> (if any)
added.</p><p>Thus, the result is an identifier corresponding to the innermost
shadowing of <span class="RktVar">id-stx</span> in the current context if it is shadowed,
and a module-contextless version of <span class="RktVar">id-stx</span> otherwise.</p><p>If <span class="RktVar">id-stx</span> is <a href="stxcerts.html#(tech._tainted)" class="techoutside" pltdoc="x"><span class="techinside">tainted</span></a> or <a href="stxcerts.html#(tech._armed)" class="techoutside" pltdoc="x"><span class="techinside">armed</span></a>, then the
resulting identifier is <a href="stxcerts.html#(tech._tainted)" class="techoutside" pltdoc="x"><span class="techinside">tainted</span></a>.</p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/private/base..rkt)._syntax-local-certifier))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((lib._racket/private/base..rkt)._syntax-local-certifier))" class="RktValLink" pltdoc="x">syntax-local-certifier</a></span></span><span class="hspace">&nbsp;</span>[<span class="RktVar">active?</span>]<span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="procedures.html#(def._((quote._~23~25kernel)._procedure~3f))" class="RktValLink" pltdoc="x">procedure?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e*))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span>*</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">active?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">For backward compatibility only; returns a procedure that returns its
first argument.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-transforming~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> during the dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax
transformer</span></a> application by the expander and while a module is being
<a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed, <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-transforming-module-expression~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming-module-expression~3f))" class="RktValLink" pltdoc="x">syntax-transforming-module-expression?</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> during the dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax
transformer</span></a> application by the expander for an expression
within a <span class="RktSym"><a href="module.html#(form._((quote._~23~25kernel)._module))" class="RktStxLink" pltdoc="x">module</a></span> form, <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-introduce))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-introduce))" class="RktValLink" pltdoc="x">syntax-local-introduce</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Produces a syntax object that is like <span class="RktVar">stx</span>, except that a
<a href="syntax-model.html#(tech._syntax._mark)" class="techoutside" pltdoc="x"><span class="techinside">syntax mark</span></a> for the current expansion is added (possibly
canceling an existing mark in parts of <span class="RktVar">stx</span>). See
<a href="syntax-model.html#(part._transformer-model)" pltdoc="x">Transformer Bindings</a> for information on <a href="syntax-model.html#(tech._syntax._mark)" class="techoutside" pltdoc="x"><span class="techinside">syntax
marks</span></a>.</div></p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._make-syntax-introducer))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-syntax-introducer))" class="RktValLink" pltdoc="x">make-syntax-introducer</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Produces a procedure that behaves like
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-introduce))" class="RktValLink" pltdoc="x">syntax-local-introduce</a></span>, but using a fresh <a href="syntax-model.html#(tech._syntax._mark)" class="techoutside" pltdoc="x"><span class="techinside">syntax
mark</span></a>. Multiple applications of the same
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-syntax-introducer))" class="RktValLink" pltdoc="x">make-syntax-introducer</a></span> result procedure use the same mark,
and different result procedures use distinct marks.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._make-syntax-delta-introducer))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-syntax-delta-introducer))" class="RktValLink" pltdoc="x">make-syntax-delta-introducer</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">ext-stx</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">base-stx</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktVar">phase-level</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">ext-stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">base-stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">phase-level</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td>=</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-phase-level))" class="RktValLink" pltdoc="x">syntax-local-phase-level</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Produces a procedure that behaves like
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-introduce))" class="RktValLink" pltdoc="x">syntax-local-introduce</a></span>, but using the <a href="syntax-model.html#(tech._syntax._mark)" class="techoutside" pltdoc="x"><span class="techinside">syntax marks</span></a> of
<span class="RktVar">ext-stx</span> that are not shared with <span class="RktVar">base-stx</span>.  If
<span class="RktVar">ext-stx</span> does not extend the set of marks in <span class="RktVar">base-stx</span>
or if <span class="RktVar">base-stx</span> is <span class="RktVal">#f</span>, and if <span class="RktVar">ext-stx</span> has a
module binding in the <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase level</span></a> indicated by
<span class="RktVar">phase-level</span>, then any marks of <span class="RktVar">ext-stx</span> that would be
needed to preserve its binding are not transferred in an introduction.</div></p><p>This procedure is potentially useful when <span class="RktVar">m-id</span> has a
transformer binding that records some <span class="RktVar">orig-id</span>, and a use of
<span class="RktVar">m-id</span> introduces a binding of <span class="RktVar">orig-id</span>. In that
case, the <a href="syntax-model.html#(tech._syntax._mark)" class="techoutside" pltdoc="x"><span class="techinside">syntax marks</span></a> in the use of <span class="RktVar">m-id</span> since the
binding of <span class="RktVar">m-id</span> should be transferred to the binding
instance of <span class="RktVar">orig-id</span>, so that it captures uses with the same
lexical context as the use of <span class="RktVar">m-id</span>.</p><p>More typically, however, <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-make-delta-introducer))" class="RktValLink" pltdoc="x">syntax-local-make-delta-introducer</a></span>
should be used, since it cooperates with <a href="syntax-model.html#(tech._rename._transformer)" class="techoutside" pltdoc="x"><span class="techinside">rename transformers</span></a>.</p><p>If <span class="RktVar">ext-stx</span> is <a href="stxcerts.html#(tech._tainted)" class="techoutside" pltdoc="x"><span class="techinside">tainted</span></a> or <a href="stxcerts.html#(tech._armed)" class="techoutside" pltdoc="x"><span class="techinside">armed</span></a>, then an
identifier result from the created procedure is <a href="stxcerts.html#(tech._tainted)" class="techoutside" pltdoc="x"><span class="techinside">tainted</span></a>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-make-delta-introducer))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-make-delta-introducer))" class="RktValLink" pltdoc="x">syntax-local-make-delta-introducer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Determines the binding of <span class="RktVar">id</span>. If the binding is not a
<a href="syntax-model.html#(tech._rename._transformer)" class="techoutside" pltdoc="x"><span class="techinside">rename transformer</span></a>, the result is an introducer as created by
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-syntax-delta-introducer))" class="RktValLink" pltdoc="x">make-syntax-delta-introducer</a></span> using <span class="RktVar">id</span> and the
binding of <span class="RktVar">id</span> in the environment of expansion. If the binding
is a <a href="syntax-model.html#(tech._rename._transformer)" class="techoutside" pltdoc="x"><span class="techinside">rename transformer</span></a>, then the introducer is one composed
with the target of the <a href="syntax-model.html#(tech._rename._transformer)" class="techoutside" pltdoc="x"><span class="techinside">rename transformer</span></a> and its
binding. Furthermore, the <span class="RktVar">delta-introduce</span> functions
associated with the <a href="syntax-model.html#(tech._rename._transformer)" class="techoutside" pltdoc="x"><span class="techinside">rename transformers</span></a> (supplied as the second
argument to <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-rename-transformer))" class="RktValLink" pltdoc="x">make-rename-transformer</a></span>) are composed (in
first-to-last order) before the introducers created with
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._make-syntax-delta-introducer))" class="RktValLink" pltdoc="x">make-syntax-delta-introducer</a></span> (which are composed
last-to-first).</div></p><p>The <span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised if <span class="RktVar">id</span> or any identifier in
its rename-transformer chain has no binding.</p><p>This procedure must be called during the
dynamic extent of a <a href="syntax-model.html#(tech._syntax._transformer)" class="techoutside" pltdoc="x"><span class="techinside">syntax transformer</span></a> application by the
expander or while a module is <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed (see
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-transforming~3f))" class="RktValLink" pltdoc="x">syntax-transforming?</a></span>), otherwise the
<span class="RktSym"><a href="exns.html#(def._((lib._racket/private/base..rkt)._exn~3afail~3acontract))" class="RktValLink" pltdoc="x">exn:fail:contract</a></span> exception is raised.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-transforming-module-provides~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-transforming-module-provides~3f))" class="RktValLink" pltdoc="x">syntax-local-transforming-module-provides?</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> while a <a href="#(tech._provide._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide transformer</span></a> is running (see
<span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._make-provide-transformer))" class="RktValLink" pltdoc="x">make-provide-transformer</a></span>) or while an <span class="RktSym">expand</span> sub-form of
<span class="RktSym"><a href="require.html#(form._((quote._~23~25kernel)._~23~25provide))" class="RktStxLink" pltdoc="x">#%provide</a></span> is expanded, <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-module-defined-identifiers))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-module-defined-identifiers))" class="RktValLink" pltdoc="x">syntax-local-module-defined-identifiers</a></span></span><span class="RktPn"></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="hashtables.html#(def._((quote._~23~25kernel)._hash~3f))" class="RktValLink" pltdoc="x">hash?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._immutable~3f))" class="RktValLink" pltdoc="x">immutable?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Can be called only while
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-transforming-module-provides~3f))" class="RktValLink" pltdoc="x">syntax-local-transforming-module-provides?</a></span> returns
<span class="RktVal">#t</span>.</div></p><p>It returns a hash table mapping a <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase-level</span></a> number (such as
<span class="RktVal">0</span>) to a list of all definitions at that <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase level</span></a>
within the module being expanded. This information is used for
implementing <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._provide))" class="RktStxLink" pltdoc="x">provide</a></span> sub-forms like <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._all-defined-out))" class="RktStxLink" pltdoc="x">all-defined-out</a></span>.</p><p>Beware that the <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase-level</span></a> keys are absolute relative to the
enclosing module, and not relative to the current transformer phase
level as reported by <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-phase-level))" class="RktValLink" pltdoc="x">syntax-local-phase-level</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._syntax-local-module-required-identifiers))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-module-required-identifiers))" class="RktValLink" pltdoc="x">syntax-local-module-required-identifiers</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">mod-path</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">phase-level</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._cons/c))" class="RktValLink" pltdoc="x">cons/c</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">mod-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path~3f))" class="RktValLink" pltdoc="x">module-path?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">phase-level</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktVal">#t</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Can be called only while
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-transforming-module-provides~3f))" class="RktValLink" pltdoc="x">syntax-local-transforming-module-provides?</a></span> returns
<span class="RktVal">#t</span>.</div></p><p>It returns an association list mapping phase levels to lists of
identifiers.  Each list of identifiers includes all bindings imported
(into the module being expanded) using the module path
<span class="RktVar">mod-path</span>, or all modules if <span class="RktVar">mod-path</span> is
<span class="RktVal">#f</span>. The association list includes all identifiers imported
with a <span class="RktVar">phase-level</span> shift, of all shifts if
<span class="RktVar">phase-level</span> is <span class="RktVal">#t</span>.</p><p>When an identifier is renamed on import, the result association list
includes the identifier by its internal name. Use
<span class="RktSym"><a href="stxcmp.html#(def._((quote._~23~25kernel)._identifier-binding))" class="RktValLink" pltdoc="x">identifier-binding</a></span> to obtain more information about the
identifier.</p><p>Beware that the <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase-level</span></a> keys are absolute relative to the
enclosing module, and not relative to the current transformer phase
level as reported by <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-phase-level))" class="RktValLink" pltdoc="x">syntax-local-phase-level</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="together"><tr><td><a name="(def._((quote._~23~25kernel)._prop~3aliberal-define-context))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3aliberal-define-context))" class="RktValLink" pltdoc="x">prop:liberal-define-context</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="structprops.html#(def._((quote._~23~25kernel)._struct-type-property~3f))" class="RktValLink" pltdoc="x">struct-type-property?</a></span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="together"><tr><td><span class="RktPn">(</span><a name="(def._((quote._~23~25kernel)._liberal-define-context~3f))"></a><span title="Provided from: racket/base, racket"><span class="RktSym"><a href="#(def._((quote._~23~25kernel)._liberal-define-context~3f))" class="RktValLink" pltdoc="x">liberal-define-context?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">An instance of a structure type with a true value for the
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3aliberal-define-context))" class="RktValLink" pltdoc="x">prop:liberal-define-context</a></span> property can be used as an
element of an <a href="syntax-model.html#(tech._internal._definition._context)" class="techoutside" pltdoc="x"><span class="techinside">internal-definition context</span></a> representation in the
result of <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-context))" class="RktValLink" pltdoc="x">syntax-local-context</a></span> or the second argument of
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._local-expand))" class="RktValLink" pltdoc="x">local-expand</a></span>. Such a value indicates that the context
supports <a name="(tech._liberal._expansion)"></a><span style="font-style: italic">liberal expansion</span> of <span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span> forms into
potentially multiple <span class="RktSym"><a href="define.html#(form._((quote._~23~25kernel)._define-values))" class="RktStxLink" pltdoc="x">define-values</a></span> and
<span class="RktSym"><a href="define.html#(form._((quote._~23~25kernel)._define-syntaxes))" class="RktStxLink" pltdoc="x">define-syntaxes</a></span> forms. The <span class="RktVal">'</span><span class="RktVal">module</span> and
<span class="RktVal">'</span><span class="RktVal">module-body</span> contexts implicitly allow <a href="#(tech._liberal._expansion)" class="techoutside" pltdoc="x"><span class="techinside">liberal
expansion</span></a>.</div></p><p>The <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._liberal-define-context~3f))" class="RktValLink" pltdoc="x">liberal-define-context?</a></span> predicate returns <span class="RktVal">#t</span> if
<span class="RktVar">v</span> is an instance of a structure with a true value for the
<span class="RktSym"><a href="#(def._((quote._~23~25kernel)._prop~3aliberal-define-context))" class="RktValLink" pltdoc="x">prop:liberal-define-context</a></span> property, <span class="RktVal">#f</span> otherwise.</p><h5>11.4.1<tt>&nbsp;</tt><a name="(part._require-trans)"></a><a name="(mod-path._racket/require-transform)"></a><span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span> Transformers</h5><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._racket/require-transform)" class="RktModLink" pltdoc="x"><span class="RktSym">racket/require-transform</span></a><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">The bindings documented in this section are provided by the <a href="#(mod-path._racket/require-transform)" class="RktModLink" pltdoc="x"><span class="RktSym">racket/require-transform</span></a> library, not <a href="index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket/base</span></a> or <a href="index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a>.</div></p><p>A <a href="syntax-model.html#(tech._transformer._binding)" class="techoutside" pltdoc="x"><span class="techinside">transformer binding</span></a> whose value is a structure with the
<span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._prop~3arequire-transformer))" class="RktValLink" pltdoc="x">prop:require-transformer</a></span> property implements a derived
<span class="RktVar">require-spec</span> for <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span> as a <a name="(tech._require._transformer)"></a><span style="font-style: italic">require
transformer</span>.</p><p>A <a href="#(tech._require._transformer)" class="techoutside" pltdoc="x"><span class="techinside">require transformer</span></a> is called with the syntax object representing its use
as a <span class="RktVar">require-spec</span> within a <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span> form, and the
result must be two lists: a list of <span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._import))" class="RktValLink" pltdoc="x">import</a></span>s and a list of
<span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._import-source))" class="RktValLink" pltdoc="x">import-source</a></span>s.</p><p>If the derived form contains a sub-form that is a
<span class="RktVar">require-spec</span>, then it can call <span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._expand-import))" class="RktValLink" pltdoc="x">expand-import</a></span> to
transform the sub-<span class="RktVar">require-spec</span> to lists of imports and
import sources.</p><p>See also <span class="RktSym"><a href="define.html#(form._((lib._racket/require-syntax..rkt)._define-require-syntax))" class="RktStxLink" pltdoc="x">define-require-syntax</a></span>, which supports macro-style
<span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span> transformers.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/require-transform..rkt)._expand-import))"></a><span title="Provided from: racket/require-transform"><span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._expand-import))" class="RktValLink" pltdoc="x">expand-import</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._import~3f))" class="RktValLink" pltdoc="x">import?</a></span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._import-source~3f))" class="RktValLink" pltdoc="x">import-source?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Expands the given <span class="RktVar">require-spec</span> to lists of imports and
import sources.  The latter specifies modules to be
<a href="eval-model.html#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiate</span></a>d or <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed, so the modules that it
represents should be a superset of the modules represented in the
former list (so that a module will be <a href="eval-model.html#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiate</span></a>d or
<a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed even if all of imports are eventually filtered from the
former list).</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/require-transform..rkt)._make-require-transformer))"></a><span title="Provided from: racket/require-transform"><span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._make-require-transformer))" class="RktValLink" pltdoc="x">make-require-transformer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._require-transformer~3f))" class="RktValLink" pltdoc="x">require-transformer?</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">proc</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._import~3f))" class="RktValLink" pltdoc="x">import?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._import-source~3f))" class="RktValLink" pltdoc="x">import-source?</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Creates a <a href="#(tech._require._transformer)" class="techoutside" pltdoc="x"><span class="techinside">require transformer</span></a> using the given procedure as the
transformer.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><a name="(def._((lib._racket/require-transform..rkt)._prop~3arequire-transformer))"></a><span title="Provided from: racket/require-transform"><span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._prop~3arequire-transformer))" class="RktValLink" pltdoc="x">prop:require-transformer</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="structprops.html#(def._((quote._~23~25kernel)._struct-type-property~3f))" class="RktValLink" pltdoc="x">struct-type-property?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A property to identify <a href="#(tech._require._transformer)" class="techoutside" pltdoc="x"><span class="techinside">require transformers</span></a>. The property
value must be a procedure that takes a syntax object and returns
import and import-source lists.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/require-transform..rkt)._require-transformer~3f))"></a><span title="Provided from: racket/require-transform"><span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._require-transformer~3f))" class="RktValLink" pltdoc="x">require-transformer?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> has the
<span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._prop~3arequire-transformer))" class="RktValLink" pltdoc="x">prop:require-transformer</a></span> property, <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0"><colgroup><col width="0*" /><col width="0*" /><col width="0*" /><col width="0*" /><col /></colgroup><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define-struct.html#(form._((lib._racket/private/base..rkt)._struct))" class="RktStxLink" pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="nobreak"><a name="(def._((lib._racket/require-transform..rkt)._import-orig-stx))"></a><a name="(def._((lib._racket/require-transform..rkt)._import-orig-mode))"></a><a name="(def._((lib._racket/require-transform..rkt)._import-req-mode))"></a><a name="(def._((lib._racket/require-transform..rkt)._import-mode))"></a><a name="(def._((lib._racket/require-transform..rkt)._import-src-mod-path))"></a><a name="(def._((lib._racket/require-transform..rkt)._import-src-sym))"></a><a name="(def._((lib._racket/require-transform..rkt)._import-local-id))"></a><a name="(def._((lib._racket/require-transform..rkt)._make-import))"></a><a name="(def._((lib._racket/require-transform..rkt)._import~3f))"></a><a name="(def._((lib._racket/require-transform..rkt)._struct~3aimport))"></a><a name="(def._((lib._racket/require-transform..rkt)._import))"></a><span title="Provided from: racket/require-transform"><span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._import))" class="RktValLink" pltdoc="x">import</a></span></span></span></td><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span></td><td><span class="nobreak"><span class="RktSym">local-id</span></span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym">src-sym</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym">src-mod-path</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym">mode</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym">req-mode</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym">orig-mode</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym">orig-stx</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td colspan="3"><span class="RktPn">#:extra-constructor-name</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._make-import))" class="RktValLink" pltdoc="x">make-import</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">local-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">src-sym</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">src-mod-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path~3f))" class="RktValLink" pltdoc="x">module-path?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">mode</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">req-mode</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">orig-mode</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">orig-stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A structure representing a single imported identifier:</div></p><ul><li><p><span class="RktSym">local-id</span> &#8212;<wbr></wbr> the identifier to be bound within the
importing module.</p></li><li><p><span class="RktSym">src-sym</span> &#8212;<wbr></wbr> the external name of the binding as
exported from its source module.</p></li><li><p><span class="RktSym">src-mod-path</span> &#8212;<wbr></wbr> a <a href="Module_Names_and_Loading.html#(tech._module._path)" class="techoutside" pltdoc="x"><span class="techinside">module path</span></a> (relative to the
importing module) for the source of the imported binding.</p></li><li><p><span class="RktSym">orig-stx</span> &#8212;<wbr></wbr> a <a href="syntax-model.html#(tech._syntax._object)" class="techoutside" pltdoc="x"><span class="techinside">syntax object</span></a> for the source of
the import, used for error reporting.</p></li><li><p><span class="RktSym">mode</span> &#8212;<wbr></wbr> the <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase level</span></a> of the binding in the
importing module.</p></li><li><p><span class="RktSym">req-mode</span> &#8212;<wbr></wbr> the <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase level</span></a> shift of the
import relative to the exporting module.</p></li><li><p><span class="RktSym">orig-mode</span> &#8212;<wbr></wbr> the <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase level</span></a> of the
binding as exported by the exporting module.</p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define-struct.html#(form._((lib._racket/private/base..rkt)._struct))" class="RktStxLink" pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(def._((lib._racket/require-transform..rkt)._import-source-mode))"></a><a name="(def._((lib._racket/require-transform..rkt)._import-source-mod-path-stx))"></a><a name="(def._((lib._racket/require-transform..rkt)._make-import-source))"></a><a name="(def._((lib._racket/require-transform..rkt)._import-source~3f))"></a><a name="(def._((lib._racket/require-transform..rkt)._struct~3aimport-source))"></a><a name="(def._((lib._racket/require-transform..rkt)._import-source))"></a><span title="Provided from: racket/require-transform"><span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._import-source))" class="RktValLink" pltdoc="x">import-source</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">mod-path-stx</span><span class="stt"> </span><span class="RktSym">mode</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:extra-constructor-name</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._make-import-source))" class="RktValLink" pltdoc="x">make-import-source</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktSym">mod-path-stx</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path~3f))" class="RktValLink" pltdoc="x">module-path?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax-~3edatum))" class="RktValLink" pltdoc="x">syntax-&gt;datum</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">mode</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">A structure representing an imported module, which must be
<a href="eval-model.html#(tech._instantiate)" class="techoutside" pltdoc="x"><span class="techinside">instantiate</span></a>d or <a href="syntax-model.html#(tech._visit)" class="techoutside" pltdoc="x"><span class="techinside">visit</span></a>ed even if no binding is imported
into a module.</div></p><ul><li><p><span class="RktSym">mod-path-stx</span> &#8212;<wbr></wbr> a <a href="Module_Names_and_Loading.html#(tech._module._path)" class="techoutside" pltdoc="x"><span class="techinside">module path</span></a> (relative
to the importing module) for the source of the imported binding.</p></li><li><p><span class="RktSym">mode</span> &#8212;<wbr></wbr> the <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase level</span></a> shift of the import.</p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/require-transform..rkt)._syntax-local-require-certifier))"></a><span title="Provided from: racket/require-transform"><span class="RktSym"><a href="#(def._((lib._racket/require-transform..rkt)._syntax-local-require-certifier))" class="RktValLink" pltdoc="x">syntax-local-require-certifier</a></span></span><span class="RktPn"></span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e*))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span>*</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">For backward compatibility only; returns a procedure that returns its
first argument.</div></p><h5>11.4.2<tt>&nbsp;</tt><a name="(part._provide-trans)"></a><a name="(mod-path._racket/provide-transform)"></a><span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._provide))" class="RktStxLink" pltdoc="x">provide</a></span> Transformers</h5><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="#(mod-path._racket/provide-transform)" class="RktModLink" pltdoc="x"><span class="RktSym">racket/provide-transform</span></a><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">The bindings documented in this section are provided by the <a href="#(mod-path._racket/provide-transform)" class="RktModLink" pltdoc="x"><span class="RktSym">racket/provide-transform</span></a> library, not <a href="index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket/base</span></a> or <a href="index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a>.</div></p><p>A <a href="syntax-model.html#(tech._transformer._binding)" class="techoutside" pltdoc="x"><span class="techinside">transformer binding</span></a> whose value is a structure with the
<span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._prop~3aprovide-transformer))" class="RktValLink" pltdoc="x">prop:provide-transformer</a></span> property implements a derived
<span class="RktVar">provide-spec</span> for <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._provide))" class="RktStxLink" pltdoc="x">provide</a></span> as a <a name="(tech._provide._transformer)"></a><span style="font-style: italic">provide transformer</span>.
A <a href="#(tech._provide._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide transformer</span></a> is applied as part of the last phase of
a module&rsquo;s expansion, after all other declarations and expressions within
the module are expanded.</p><p>A <a href="syntax-model.html#(tech._transformer._binding)" class="techoutside" pltdoc="x"><span class="techinside">transformer binding</span></a> whose value is a structure with the
<span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._prop~3aprovide-pre-transformer))" class="RktValLink" pltdoc="x">prop:provide-pre-transformer</a></span> property implements a derived
<span class="RktVar">provide-spec</span> for <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._provide))" class="RktStxLink" pltdoc="x">provide</a></span> as a <a name="(tech._provide._pre._transformer)"></a><span style="font-style: italic">provide
pre-transformer</span>.  A <a href="#(tech._provide._pre._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide pre-transformer</span></a> is applied as part
of the first phase of a module&rsquo;s expansion. Since it is used in the
first phase, a <a href="#(tech._provide._pre._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide pre-transformer</span></a> can use functions such
as <span class="RktSym"><a href="#(def._((quote._~23~25kernel)._syntax-local-lift-expression))" class="RktValLink" pltdoc="x">syntax-local-lift-expression</a></span> to introduce expressions and
definitions in the enclosing module.</p><p>An identifier can have a <a href="syntax-model.html#(tech._transformer._binding)" class="techoutside" pltdoc="x"><span class="techinside">transformer binding</span></a> to a value that
acts both as a <a href="#(tech._provide._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide transformer</span></a> and <a href="#(tech._provide._pre._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide
pre-transformer</span></a>. The result of a <a href="#(tech._provide._pre._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide
pre-transformer</span></a> is <span style="font-style: italic">not</span> automatically re-expanded, so a
<a href="#(tech._provide._pre._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide pre-transformer</span></a> can usefully expand to itself in that case.</p><p>A transformer is called with the syntax object representing its use as
a <span class="RktVar">provide-spec</span> within a <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._provide))" class="RktStxLink" pltdoc="x">provide</a></span> form and a list of
symbols representing the export modes specified by enclosing
<span class="RktVar">provide-spec</span>s. The result of a <a href="#(tech._provide._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide transformer</span></a>
must be a list of <span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._export))" class="RktValLink" pltdoc="x">export</a></span>s, while the result of a
<a href="#(tech._provide._pre._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide pre-transformer</span></a> is a syntax object to be used as a
<span class="RktVar">provide-spec</span> in the last phase of module expansion.</p><p>If a derived form contains a sub-form that is a
<span class="RktVar">provide-spec</span>, then it can call <span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._expand-export))" class="RktValLink" pltdoc="x">expand-export</a></span> or
<span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._pre-expand-export))" class="RktValLink" pltdoc="x">pre-expand-export</a></span> to transform the sub-<span class="RktVar">provide-spec</span>
sub-form.</p><p>See also <span class="RktSym"><a href="define.html#(form._((lib._racket/provide-syntax..rkt)._define-provide-syntax))" class="RktStxLink" pltdoc="x">define-provide-syntax</a></span>, which supports macro-style
<a href="#(tech._provide._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide transformers</span></a>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/provide-transform..rkt)._expand-export))"></a><span title="Provided from: racket/provide-transform"><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._expand-export))" class="RktValLink" pltdoc="x">expand-export</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span><span class="RktVar">modes</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._export~3f))" class="RktValLink" pltdoc="x">export?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">modes</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Expands the given <span class="RktVar">provide-spec</span> to a list of exports. The
<span class="RktVar">modes</span> list controls the expansion of
sub-<span class="RktVar">provide-specs</span>; for example, an identifier refers to a
binding in the <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase level</span></a> of the enclosing <span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._provide))" class="RktStxLink" pltdoc="x">provide</a></span>
form, unless the <span class="RktVar">modes</span> list specifies otherwise. Normally,
<span class="RktVar">modes</span> is either empty or contains a single element.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/provide-transform..rkt)._pre-expand-export))"></a><span title="Provided from: racket/provide-transform"><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._pre-expand-export))" class="RktValLink" pltdoc="x">pre-expand-export</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span><span class="RktVar">modes</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">modes</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Expands the given <span class="RktVar">provide-spec</span> at the level of <a href="#(tech._provide._pre._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide
pre-transformers</span></a>. The <span class="RktVar">modes</span> argument is the same as for
<span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._expand-export))" class="RktValLink" pltdoc="x">expand-export</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/provide-transform..rkt)._make-provide-transformer))"></a><span title="Provided from: racket/provide-transform"><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._make-provide-transformer))" class="RktValLink" pltdoc="x">make-provide-transformer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._provide-transformer~3f))" class="RktValLink" pltdoc="x">provide-transformer?</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">proc</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._export~3f))" class="RktValLink" pltdoc="x">export?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="RktPn">(</span><span title="Provided from: racket/provide-transform"><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._make-provide-transformer))" class="RktValLink" pltdoc="x">make-provide-transformer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">proc</span><span class="hspace">&nbsp;</span><span class="RktVar">pre-proc</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._and/c))" class="RktValLink" pltdoc="x">and/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._provide-transformer~3f))" class="RktValLink" pltdoc="x">provide-transformer?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._provide-pre-transformer~3f))" class="RktValLink" pltdoc="x">provide-pre-transformer?</a></span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">proc</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._export~3f))" class="RktValLink" pltdoc="x">export?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">pre-proc</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Creates a <a href="#(tech._provide._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide transformer</span></a> (i.e., a structure with the
<span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._prop~3aprovide-transformer))" class="RktValLink" pltdoc="x">prop:provide-transformer</a></span> property) using the given procedure
as the transformer. If a <span class="RktVar">pre-proc</span> is provided, then the result is also a
<a href="#(tech._provide._pre._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide pre-transformer</span></a>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/provide-transform..rkt)._make-provide-pre-transformer))"></a><span title="Provided from: racket/provide-transform"><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._make-provide-pre-transformer))" class="RktValLink" pltdoc="x">make-provide-pre-transformer</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pre-proc</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._provide-pre-transformer~3f))" class="RktValLink" pltdoc="x">provide-pre-transformer?</a></span></td></tr><tr><td><table cellspacing="0" class="argcontract"><tr><td><span class="hspace">&nbsp;&nbsp;</span></td><td><span class="RktVar">pre-proc</span></td><td><span class="hspace">&nbsp;</span></td><td>:</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._make-provide-transformer))" class="RktValLink" pltdoc="x">make-provide-transformer</a></span>, but for a value that is a
<a href="#(tech._provide._pre._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide pre-transformer</span></a>, only.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><a name="(def._((lib._racket/provide-transform..rkt)._prop~3aprovide-transformer))"></a><span title="Provided from: racket/provide-transform"><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._prop~3aprovide-transformer))" class="RktValLink" pltdoc="x">prop:provide-transformer</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="structprops.html#(def._((quote._~23~25kernel)._struct-type-property~3f))" class="RktValLink" pltdoc="x">struct-type-property?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A property to identify <a href="#(tech._provide._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide transformers</span></a>. The property
value must be a procedure that takes a syntax object and mode list and
returns an export list.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><a name="(def._((lib._racket/provide-transform..rkt)._prop~3aprovide-pre-transformer))"></a><span title="Provided from: racket/provide-transform"><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._prop~3aprovide-pre-transformer))" class="RktValLink" pltdoc="x">prop:provide-pre-transformer</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="structprops.html#(def._((quote._~23~25kernel)._struct-type-property~3f))" class="RktValLink" pltdoc="x">struct-type-property?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A property to identify <a href="#(tech._provide._pre._transformer)" class="techoutside" pltdoc="x"><span class="techinside">provide pre-transformers</span></a>. The property
value must be a procedure that takes a syntax object and mode list and
returns a syntax object.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/provide-transform..rkt)._provide-transformer~3f))"></a><span title="Provided from: racket/provide-transform"><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._provide-transformer~3f))" class="RktValLink" pltdoc="x">provide-transformer?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> has the
<span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._prop~3aprovide-transformer))" class="RktValLink" pltdoc="x">prop:provide-transformer</a></span> property, <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/provide-transform..rkt)._provide-pre-transformer~3f))"></a><span title="Provided from: racket/provide-transform"><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._provide-pre-transformer~3f))" class="RktValLink" pltdoc="x">provide-pre-transformer?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> has the
<span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._prop~3aprovide-pre-transformer))" class="RktValLink" pltdoc="x">prop:provide-pre-transformer</a></span> property, <span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define-struct.html#(form._((lib._racket/private/base..rkt)._struct))" class="RktStxLink" pltdoc="x">struct</a></span></td><td><span class="hspace">&nbsp;</span></td><td><a name="(def._((lib._racket/provide-transform..rkt)._export-orig-stx))"></a><a name="(def._((lib._racket/provide-transform..rkt)._export-protect~3f))"></a><a name="(def._((lib._racket/provide-transform..rkt)._export-mode))"></a><a name="(def._((lib._racket/provide-transform..rkt)._export-out-sym))"></a><a name="(def._((lib._racket/provide-transform..rkt)._export-local-id))"></a><a name="(def._((lib._racket/provide-transform..rkt)._make-export))"></a><a name="(def._((lib._racket/provide-transform..rkt)._export~3f))"></a><a name="(def._((lib._racket/provide-transform..rkt)._struct~3aexport))"></a><a name="(def._((lib._racket/provide-transform..rkt)._export))"></a><span title="Provided from: racket/provide-transform"><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._export))" class="RktValLink" pltdoc="x">export</a></span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">local-id</span><span class="stt"> </span><span class="RktSym">out-sym</span><span class="stt"> </span><span class="RktSym">mode</span><span class="stt"> </span><span class="RktSym">protect?</span><span class="stt"> </span><span class="RktSym">orig-stx</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:extra-constructor-name</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._make-export))" class="RktValLink" pltdoc="x">make-export</a></span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">local-id</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((lib._racket/private/stx..rkt)._identifier~3f))" class="RktValLink" pltdoc="x">identifier?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">out-sym</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">mode</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">protect?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">orig-stx</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">A structure representing a single imported identifier:</div></p><ul><li><p><span class="RktSym">local-id</span> &#8212;<wbr></wbr> the identifier that is bound within the
exporting module.</p></li><li><p><span class="RktSym">out-sym</span> &#8212;<wbr></wbr> the external name of the binding.</p></li><li><p><span class="RktSym">orig-stx</span> &#8212;<wbr></wbr> a <a href="syntax-model.html#(tech._syntax._object)" class="techoutside" pltdoc="x"><span class="techinside">syntax object</span></a> for the source of
the export, used for error reporting.</p></li><li><p><span class="RktSym">protect?</span> &#8212;<wbr></wbr> indicates whether the identifier should
be protected (see <a href="modprotect.html" pltdoc="x">Code Inspectors</a>).</p></li><li><p><span class="RktSym">mode</span> &#8212;<wbr></wbr> the <a href="syntax-model.html#(tech._phase._level)" class="techoutside" pltdoc="x"><span class="techinside">phase level</span></a> of the binding in the
exporting module.</p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/provide-transform..rkt)._syntax-local-provide-certifier))"></a><span title="Provided from: racket/provide-transform"><span class="RktSym"><a href="#(def._((lib._racket/provide-transform..rkt)._syntax-local-provide-certifier))" class="RktValLink" pltdoc="x">syntax-local-provide-certifier</a></span></span><span class="RktPn"></span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">. </span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e*))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span>*</a></span><span class="RktPn"> .</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stxops.html#(def._((quote._~23~25kernel)._syntax~3f))" class="RktValLink" pltdoc="x">syntax?</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">For backward compatibility only; returns a procedure that returns its
first argument.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.2.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.2.1&quot;);">top</a></span><span class="navright"><a href="stxcmp.html" title="backward to &quot;11.3 Syntax Object Bindings&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="Macros.html" title="up to &quot;11 Macros&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="stxparam.html" title="forward to &quot;11.5 Syntax Parameters&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>