<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>10.5&nbsp;Places</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="extras.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span style="font-weight: bold">The Racket Reference</span></a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="model.html" class="tocviewlink" pltdoc="x">Language Model</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="syntax.html" class="tocviewlink" pltdoc="x">Syntactic Forms</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="data.html" class="tocviewlink" pltdoc="x">Datatypes</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="structures.html" class="tocviewlink" pltdoc="x">Structures</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="mzlib_class.html" class="tocviewlink" pltdoc="x">Classes and Objects</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="mzlib_unit.html" class="tocviewlink" pltdoc="x">Units</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="contracts.html" class="tocviewlink" pltdoc="x">Contracts</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="match.html" class="tocviewlink" pltdoc="x">Pattern Matching</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="control.html" class="tocviewlink" pltdoc="x">Control Flow</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="concurrency.html" class="tocviewselflink" pltdoc="x">Concurrency and Parallelism</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Macros.html" class="tocviewlink" pltdoc="x">Macros</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="input-and-output.html" class="tocviewlink" pltdoc="x">Input and Output</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="security.html" class="tocviewlink" pltdoc="x">Reflection and Security</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="os.html" class="tocviewlink" pltdoc="x">Operating System</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="memory.html" class="tocviewlink" pltdoc="x">Memory Management</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="unsafe.html" class="tocviewlink" pltdoc="x">Unsafe Operations</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="running.html" class="tocviewlink" pltdoc="x">Running Racket</a></td></tr><tr><td align="right"></td><td><a href="doc-bibliography.html" class="tocviewlink" pltdoc="x">Bibliography</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>10&nbsp;</td><td><a href="concurrency.html" class="tocviewlink" pltdoc="x">Concurrency and Parallelism</a></td></tr></table><div class="tocviewsublistbottom" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">10.1&nbsp;</td><td><a href="threads.html" class="tocviewlink" pltdoc="x">Threads</a></td></tr><tr><td align="right">10.2&nbsp;</td><td><a href="all-sync.html" class="tocviewlink" pltdoc="x">Synchronization</a></td></tr><tr><td align="right">10.3&nbsp;</td><td><a href="thread-local-storage.html" class="tocviewlink" pltdoc="x">Thread-<wbr></wbr>Local Storage</a></td></tr><tr><td align="right">10.4&nbsp;</td><td><a href="futures.html" class="tocviewlink" pltdoc="x">Futures</a></td></tr><tr><td align="right">10.5&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Places</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#(def._((lib._racket/place..rkt)._place-enabled~3f))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktValLink">place-<wbr></wbr>enabled?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/place..rkt)._place~3f))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktValLink">place?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/place..rkt)._place-channel~3f))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktValLink">place-<wbr></wbr>channel?</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/place..rkt)._dynamic-place))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktValLink">dynamic-<wbr></wbr>place</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/place..rkt)._dynamic-place*))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktValLink">dynamic-<wbr></wbr>place*</span></span></span></a></td></tr><tr><td><a href="#(form._((lib._racket/place..rkt)._place))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktStxLink">place</span></span></span></a></td></tr><tr><td><a href="#(form._((lib._racket/place..rkt)._place*))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktStxLink">place*</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/place..rkt)._place-wait))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktValLink">place-<wbr></wbr>wait</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/place..rkt)._place-dead-evt))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktValLink">place-<wbr></wbr>dead-<wbr></wbr>evt</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/place..rkt)._place-kill))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktValLink">place-<wbr></wbr>kill</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/place..rkt)._place-break))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktValLink">place-<wbr></wbr>break</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/place..rkt)._place-channel))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktValLink">place-<wbr></wbr>channel</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/place..rkt)._place-channel-put))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktValLink">place-<wbr></wbr>channel-<wbr></wbr>put</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/place..rkt)._place-channel-get))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktValLink">place-<wbr></wbr>channel-<wbr></wbr>get</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/place..rkt)._place-channel-put/get))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktValLink">place-<wbr></wbr>channel-<wbr></wbr>put/<span class="mywbr"> </span>get</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._racket/place..rkt)._place-message-allowed~3f))" class="tocsublink" pltdoc="x"><span title="Provided from: racket/place, racket"><span class="RktSym"><span class="RktValLink">place-<wbr></wbr>message-<wbr></wbr>allowed?</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.2.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.2.1&quot;);">top</a></span><span class="navright"><a href="futures.html" title="backward to &quot;10.4 Futures&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="concurrency.html" title="up to &quot;10 Concurrency and Parallelism&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Macros.html" title="forward to &quot;11 Macros&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>10.5<tt>&nbsp;</tt><a name="(part._places)"></a><a name="(mod-path._racket/place)"></a>Places</h4><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="imageleft"><img src="finger.png" alt="+" /></span><a href="../guide/performance.html#(part._effective-places)" pltdoc="x">Parallelism with Places</a> in <a href="../guide/index.html" pltdoc="x"><span style="font-weight: bold">The Racket Guide</span></a> introduces places.</p></blockquote></blockquote></blockquote><p><div class="SIntrapara"><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" pltdoc="x"><span class="RktSym">racket/place</span></a><span class="RktPn">)</span></td></tr></table></div><div class="SIntrapara">The bindings documented in this section are provided by the <a href="" class="RktModLink" pltdoc="x"><span class="RktSym">racket/place</span></a> and <a href="index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a> libraries, but not <a href="index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket/base</span></a>.</div></p><p><a href="#(tech._place)" class="techoutside" pltdoc="x"><span class="techinside">Places</span></a> enable the development of parallel programs that
take advantage of machines with multiple processors, cores, or
hardware threads.</p><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p>Currently, parallel support for places is enabled
only for Racket 3m (which is the main variant of Racket), and only
by default for Windows, Linux x86/x86_64, and Mac OS X x86/x86_64. To
enable support for other platforms, use <span class="nobreak"><span class="stt">--enable-places</span></span> with
<span class="stt">configure</span> when building Racket. The <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-enabled~3f))" class="RktValLink" pltdoc="x">place-enabled?</a></span>
function reports whether places run in parallel.</p></blockquote></blockquote></blockquote><p>A <a name="(tech._place)"></a><span style="font-style: italic">place</span> is a parallel task that is effectively a separate
instance of the Racket virtual machine. Places communicate through
<a name="(tech._place._channel)"></a><span style="font-style: italic">place channels</span>, which are endpoints for a two-way buffered
communication.</p><p>To a first approximation, place channels support only immutable,
transparent values as messages. In addition, place
channels themselves can be sent across channels to establish new
(possibly more direct) lines of communication in addition to any
existing lines. Finally, mutable values produced by
<span class="RktSym"><a href="flonums.html#(def._((lib._racket/flonum..rkt)._shared-flvector))" class="RktValLink" pltdoc="x">shared-flvector</a></span>, <span class="RktSym"><a href="flonums.html#(def._((lib._racket/flonum..rkt)._make-shared-flvector))" class="RktValLink" pltdoc="x">make-shared-flvector</a></span>,
<span class="RktSym"><a href="fixnums.html#(def._((lib._racket/fixnum..rkt)._shared-fxvector))" class="RktValLink" pltdoc="x">shared-fxvector</a></span>, <span class="RktSym"><a href="fixnums.html#(def._((lib._racket/fixnum..rkt)._make-shared-fxvector))" class="RktValLink" pltdoc="x">make-shared-fxvector</a></span>,
<span class="RktSym"><a href="bytestrings.html#(def._((quote._~23~25kernel)._shared-bytes))" class="RktValLink" pltdoc="x">shared-bytes</a></span>, and <span class="RktSym"><a href="bytestrings.html#(def._((quote._~23~25kernel)._make-shared-bytes))" class="RktValLink" pltdoc="x">make-shared-bytes</a></span> can be sent
across place channels; mutation of such values is visible to all
places that share the value, because they are allowed in a
<a name="(tech._shared._memory._space)"></a><span style="font-style: italic">shared memory space</span>. See <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-message-allowed~3f))" class="RktValLink" pltdoc="x">place-message-allowed?</a></span>.</p><p>A <a href="#(tech._place._channel)" class="techoutside" pltdoc="x"><span class="techinside">place channel</span></a> can be used as a <a href="sync.html#(tech._synchronizable._event)" class="techoutside" pltdoc="x"><span class="techinside">synchronizable event</span></a>
(see <a href="sync.html" pltdoc="x">Events</a>) to receive a value through the channel. A place
can also receive messages with <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel-get))" class="RktValLink" pltdoc="x">place-channel-get</a></span>, and
messages can be sent with <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel-put))" class="RktValLink" pltdoc="x">place-channel-put</a></span>.</p><p>Two <a href="#(tech._place._channel)" class="techoutside" pltdoc="x"><span class="techinside">place channels</span></a> are <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span> if they are endpoints
for the same underlying channels while both or neither is a
<a href="#(tech._place._descriptor)" class="techoutside" pltdoc="x"><span class="techinside">place descriptor</span></a>. <a href="#(tech._place._channel)" class="techoutside" pltdoc="x"><span class="techinside">Place channels</span></a> can be <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span>
without being <span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._eq~3f))" class="RktValLink" pltdoc="x">eq?</a></span> after being sent messages through a
<a href="#(tech._place._channel)" class="techoutside" pltdoc="x"><span class="techinside">place channel</span></a>.</p><p>Constraints on messages across a place channel&#8212;<wbr></wbr>and therefore on the
kinds of data that places share&#8212;<wbr></wbr>enable greater parallelism than
<span class="RktSym"><a href="futures.html#(def._((lib._racket/future..rkt)._future))" class="RktValLink" pltdoc="x">future</a></span>, even including separate <a href="eval-model.html#(tech._garbage._collection)" class="techoutside" pltdoc="x"><span class="techinside">garbage collection</span></a> of
separate places. At the same time, the setup and communication costs
for places can be higher than for <a href="futures.html#(tech._future)" class="techoutside" pltdoc="x"><span class="techinside">futures</span></a>.</p><p>For example, the following expression launches two places, echoes a
message to each, and then waits for the places to terminate:</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" class="RktStxLink" pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">pls</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="for.html#(form._((lib._racket/private/base..rkt)._for/list))" class="RktStxLink" pltdoc="x">for/list</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sequences.html#(def._((lib._racket/private/base..rkt)._in-range))" class="RktValLink" pltdoc="x">in-range</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._dynamic-place))" class="RktValLink" pltdoc="x">dynamic-place</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"place-worker.rkt"</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">place-main</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="for.html#(form._((lib._racket/private/base..rkt)._for))" class="RktStxLink" pltdoc="x">for</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">i</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="sequences.html#(def._((lib._racket/private/base..rkt)._in-range))" class="RktValLink" pltdoc="x">in-range</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktSym">pls</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel-put))" class="RktValLink" pltdoc="x">place-channel-put</a></span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="hspace">&nbsp;</span><span class="RktSym">i</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Writing.html#(def._((quote._~23~25kernel)._printf))" class="RktValLink" pltdoc="x">printf</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"~a\n"</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel-get))" class="RktValLink" pltdoc="x">place-channel-get</a></span><span class="hspace">&nbsp;</span><span class="RktSym">p</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="pairs.html#(def._((lib._racket/private/map..rkt)._map))" class="RktValLink" pltdoc="x">map</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-wait))" class="RktValLink" pltdoc="x">place-wait</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pls</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>The <span class="stt">"place-worker.rkt"</span> module must export the
<span class="RktSym">place-main</span> function that each place executes, where
<span class="RktSym">place-main</span> must accept a single <a href="#(tech._place._channel)" class="techoutside" pltdoc="x"><span class="techinside">place channel</span></a>
argument:</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><a href="../guide/Module_Syntax.html#(part._hash-lang)" class="RktModLink" pltdoc="x"><span class="RktMod">#lang</span></a><span class="hspace">&nbsp;</span><a href="index.html" class="RktModLink" pltdoc="x"><span class="RktSym">racket</span></a></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._provide))" class="RktStxLink" pltdoc="x">provide</a></span><span class="hspace">&nbsp;</span><span class="RktSym">place-main</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">place-main</span><span class="hspace">&nbsp;</span><span class="RktSym">pch</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel-put))" class="RktValLink" pltdoc="x">place-channel-put</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pch</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Writing.html#(def._((quote._~23~25kernel)._format))" class="RktValLink" pltdoc="x">format</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"Hello from place ~a"</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel-get))" class="RktValLink" pltdoc="x">place-channel-get</a></span><span class="hspace">&nbsp;</span><span class="RktSym">pch</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/place..rkt)._place-enabled~3f))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-enabled~3f))" class="RktValLink" pltdoc="x">place-enabled?</a></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if Racket is configured so that
<span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._dynamic-place))" class="RktValLink" pltdoc="x">dynamic-place</a></span> and <span class="RktSym"><a href="#(form._((lib._racket/place..rkt)._place))" class="RktStxLink" pltdoc="x">place</a></span> create places that can run
in parallel, <span class="RktVal">#f</span> if <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._dynamic-place))" class="RktValLink" pltdoc="x">dynamic-place</a></span> and <span class="RktSym"><a href="#(form._((lib._racket/place..rkt)._place))" class="RktStxLink" pltdoc="x">place</a></span>
are simulated using <span class="RktSym"><a href="threads.html#(def._((quote._~23~25kernel)._thread))" class="RktValLink" pltdoc="x">thread</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/place..rkt)._place~3f))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place~3f))" class="RktValLink" pltdoc="x">place?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is a <a name="(tech._place._descriptor)"></a><span style="font-style: italic">place descriptor</span>
value, <span class="RktVal">#f</span> otherwise. Every <a href="#(tech._place._descriptor)" class="techoutside" pltdoc="x"><span class="techinside">place descriptor</span></a>
is also a <a href="#(tech._place._channel)" class="techoutside" pltdoc="x"><span class="techinside">place channel</span></a>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/place..rkt)._place-channel~3f))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel~3f))" class="RktValLink" pltdoc="x">place-channel?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is <a href="#(tech._place._channel)" class="techoutside" pltdoc="x"><span class="techinside">place channel</span></a>,
<span class="RktVal">#f</span> otherwise.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/place..rkt)._dynamic-place))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._dynamic-place))" class="RktValLink" pltdoc="x">dynamic-place</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">module-path</span><span class="hspace">&nbsp;</span><span class="RktVar">start-name</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place~3f))" class="RktValLink" pltdoc="x">place?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">module-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path~3f))" class="RktValLink" pltdoc="x">module-path?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">start-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a <a href="#(tech._place)" class="techoutside" pltdoc="x"><span class="techinside">place</span></a> to run the procedure that is identified by
<span class="RktVar">module-path</span> and <span class="RktVar">start-name</span>. The result is a
<a href="#(tech._place._descriptor)" class="techoutside" pltdoc="x"><span class="techinside">place descriptor</span></a> value that represents the new parallel task;
the place descriptor is returned immediately. The place descriptor
value is also a <a href="#(tech._place._channel)" class="techoutside" pltdoc="x"><span class="techinside">place channel</span></a> that permits communication with
the place.</div></p><p>The module indicated by <span class="RktVar">module-path</span> must export a function
with the name <span class="RktSym">start-proc</span>. The function must accept a single
argument, which is a <a href="#(tech._place._channel)" class="techoutside" pltdoc="x"><span class="techinside">place channel</span></a> that corresponds to the
other end of communication for the <a href="#(tech._place._descriptor)" class="techoutside" pltdoc="x"><span class="techinside">place descriptor</span></a> returned
by <span class="RktSym"><a href="#(form._((lib._racket/place..rkt)._place))" class="RktStxLink" pltdoc="x">place</a></span>.</p><p>When the <a href="#(tech._place)" class="techoutside" pltdoc="x"><span class="techinside">place</span></a> is created, the initial <a href="Exiting.html#(tech._exit._handler)" class="techoutside" pltdoc="x"><span class="techinside">exit handler</span></a>
terminates the place, using the argument to the exit handler as the
place&rsquo;s <a name="(tech._completion._value)"></a><span style="font-style: italic">completion value</span>. Use <span class="RktPn">(</span><span class="RktSym"><a href="Exiting.html#(def._((quote._~23~25kernel)._exit))" class="RktValLink" pltdoc="x">exit</a></span><span class="stt"> </span><span class="RktVar">v</span><span class="RktPn">)</span> to
immediately terminate a place with the completion value
<span class="RktVar">v</span>. Since a completion value is limited to an exact integer
between <span class="RktVal">0</span> and <span class="RktVal">255</span>, any other value for <span class="RktSym">v</span>
is converted to <span class="RktVal">0</span>.</p><p>If the function indicated by <span class="RktVar">module-path</span> and
<span class="RktSym">start-proc</span> returns, then the place terminates with the
<a href="#(tech._completion._value)" class="techoutside" pltdoc="x"><span class="techinside">completion value</span></a> <span class="RktVal">0</span>.</p><p>In the created place, the <span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._current-input-port))" class="RktValLink" pltdoc="x">current-input-port</a></span> parameter
is set to an empty input port, while the values of the
<span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._current-output-port))" class="RktValLink" pltdoc="x">current-output-port</a></span> and <span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._current-error-port))" class="RktValLink" pltdoc="x">current-error-port</a></span>
parameters are connected to the current ports in the creating
place. If the output ports are <a href="file-ports.html#(tech._file._stream._port)" class="techoutside" pltdoc="x"><span class="techinside">file-stream ports</span></a>, then the
connected ports in the places share the underlying stream, otherwise
a <a href="eval-model.html#(tech._thread)" class="techoutside" pltdoc="x"><span class="techinside">thread</span></a> in the creating place pumps bytes to the current
ports in the creating place.</p><p>The <span class="RktVar">module-path</span> argument must not be a module path of the
form <span class="RktPn">(</span><span class="RktSym"><a href="quote.html#(form._((quote._~23~25kernel)._quote))" class="RktStxLink" pltdoc="x">quote</a></span><span class="stt"> </span><span class="RktVar">sym</span><span class="RktPn">)</span> unless the module is predefined (see
<span class="RktSym"><a href="Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-predefined~3f))" class="RktValLink" pltdoc="x">module-predefined?</a></span>).</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/place..rkt)._dynamic-place*))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._dynamic-place*))" class="RktValLink" pltdoc="x">dynamic-place*</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">module-path</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">start-name</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktPn">#:in</span><span class="hspace">&nbsp;</span><span class="RktVar">in</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:out</span><span class="hspace">&nbsp;</span><span class="RktVar">out</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:err</span><span class="hspace">&nbsp;</span><span class="RktVar">err</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0"><tr><td><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place~3f))" class="RktValLink" pltdoc="x">place?</a></span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._output-port~3f))" class="RktValLink" pltdoc="x">output-port?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">module-path</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Module_Names_and_Loading.html#(def._((quote._~23~25kernel)._module-path~3f))" class="RktValLink" pltdoc="x">module-path?</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="Manipulating_Paths.html#(def._((quote._~23~25kernel)._path~3f))" class="RktValLink" pltdoc="x">path?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">start-name</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="symbols.html#(def._((quote._~23~25kernel)._symbol~3f))" class="RktValLink" pltdoc="x">symbol?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">in</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._input-port~3f))" class="RktValLink" pltdoc="x">input-port?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">out</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._output-port~3f))" class="RktValLink" pltdoc="x">output-port?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._current-output-port))" class="RktValLink" pltdoc="x">current-output-port</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">err</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._or/c))" class="RktValLink" pltdoc="x">or/c</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._output-port~3f))" class="RktValLink" pltdoc="x">output-port?</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._current-error-port))" class="RktValLink" pltdoc="x">current-error-port</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._dynamic-place))" class="RktValLink" pltdoc="x">dynamic-place</a></span>, but accepts specific ports to the new
 place&rsquo;s ports, and returns a created port when <span class="RktVal">#f</span> is
 supplied for a port. The <span class="RktVar">in</span>, <span class="RktVar">out</span>, and
 <span class="RktVar">err</span> ports are connected to the <span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._current-input-port))" class="RktValLink" pltdoc="x">current-input-port</a></span>,
 <span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._current-output-port))" class="RktValLink" pltdoc="x">current-output-port</a></span>, and <span class="RktSym"><a href="port-ops.html#(def._((quote._~23~25kernel)._current-error-port))" class="RktValLink" pltdoc="x">current-error-port</a></span> ports,
 respectively, for the
 <a href="#(tech._place)" class="techoutside" pltdoc="x"><span class="techinside">place</span></a>.  Any of the ports can be <span class="RktVal">#f</span>, in which case a
 <a href="file-ports.html#(tech._file._stream._port)" class="techoutside" pltdoc="x"><span class="techinside">file-stream port</span></a> (for an operating-system pipe)
 is created and returned by <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._dynamic-place*))" class="RktValLink" pltdoc="x">dynamic-place*</a></span>. The
 <span class="RktVar">err</span> argument can be <span class="RktVal">'</span><span class="RktVal">stdout</span>, in which case the
 same <a href="file-ports.html#(tech._file._stream._port)" class="techoutside" pltdoc="x"><span class="techinside">file-stream port</span></a> or that is supplied as standard
 output is also used for standard error.  For each port or
 <span class="RktVal">'</span><span class="RktVal">stdout</span> that is provided, no pipe is created and the
 corresponding returned value is <span class="RktVal">#f</span>.</div></p><p>The caller of <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._dynamic-place*))" class="RktValLink" pltdoc="x">dynamic-place*</a></span> is responsible for closing all
 returned ports; none are closed automatically.</p><p>The <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._dynamic-place*))" class="RktValLink" pltdoc="x">dynamic-place*</a></span> procedure returns four values:</p><ul><li><p>a place descriptor value representing the created place;</p></li><li><p>an output port piped to the place&rsquo;s standard input, or
<span class="RktVal">#f</span> if <span class="RktVar">in</span> was a port;</p></li><li><p>an input port piped from the place&rsquo;s standard output, or
<span class="RktVal">#f</span> if <span class="RktVar">out</span> was a port;</p></li><li><p>an input port piped from the place&rsquo;s standard error, or
<span class="RktVal">#f</span> if <span class="RktVar">err</span> was a port or <span class="RktVal">'</span><span class="RktVal">stdout</span>.</p></li></ul><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(form._((lib._racket/place..rkt)._place))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(form._((lib._racket/place..rkt)._place))" class="RktStxLink" pltdoc="x">place</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">id</span><span class="hspace">&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Creates a place that evaluates <span class="RktVar">body</span>
expressions with <span class="RktVar">id</span> bound to a place channel.  The
<span class="RktVar">body</span>s close only over <span class="RktVar">id</span> plus the top-level
bindings of the enclosing module, because the
<span class="RktVar">body</span>s are lifted to a function that is exported by
the module. The result of <span class="RktSym"><a href="#(form._((lib._racket/place..rkt)._place))" class="RktStxLink" pltdoc="x">place</a></span> is a place descriptor,
like the result of <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._dynamic-place))" class="RktValLink" pltdoc="x">dynamic-place</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><a name="(form._((lib._racket/place..rkt)._place*))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(form._((lib._racket/place..rkt)._place*))" class="RktStxLink" pltdoc="x">place*</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">maybe-port</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">id</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVar">body</span><span class="hspace">&nbsp;</span><span class="RktMeta">...+</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><span class="stt">&nbsp;</span></td></tr><tr><td><table cellspacing="0" class="specgrammar"><tr><td align="right" valign="baseline"><span class="RktVar">maybe-port</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">=</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><table cellspacing="0" class="RktBlk"><tr><td></td></tr></table></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:in</span><span class="hspace">&nbsp;</span><span class="RktVar">in-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:out</span><span class="hspace">&nbsp;</span><span class="RktVar">out-expr</span></td></tr><tr><td align="right" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="center" valign="baseline">|</td><td align="left" valign="baseline"><span class="stt">&nbsp;</span></td><td align="left" valign="baseline"><span class="RktPn">#:err</span><span class="hspace">&nbsp;</span><span class="RktVar">err-expr</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym"><a href="#(form._((lib._racket/place..rkt)._place))" class="RktStxLink" pltdoc="x">place</a></span>, but supports optional <span class="RktPn">#:in</span>, <span class="RktPn">#:out</span>,
and <span class="RktPn">#:err</span> expressions (at most one of each) to specify ports in the same way and
with the same defaults as <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._dynamic-place*))" class="RktValLink" pltdoc="x">dynamic-place*</a></span>. The result of
a <span class="RktSym"><a href="#(form._((lib._racket/place..rkt)._place*))" class="RktStxLink" pltdoc="x">place*</a></span> form is also the same as for  <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._dynamic-place*))" class="RktValLink" pltdoc="x">dynamic-place*</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/place..rkt)._place-wait))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-wait))" class="RktValLink" pltdoc="x">place-wait</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-integer~3f))" class="RktValLink" pltdoc="x">exact-integer?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place~3f))" class="RktValLink" pltdoc="x">place?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the <a href="#(tech._completion._value)" class="techoutside" pltdoc="x"><span class="techinside">completion value</span></a> of the place indicated by <span class="RktVar">p</span>,
blocking until the place has terminated.</div></p><p>If any pumping threads were created to connect a
non-<a href="file-ports.html#(tech._file._stream._port)" class="techoutside" pltdoc="x"><span class="techinside">file-stream port</span></a> to the ports in the place for <span class="RktVar">p</span>
(see <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._dynamic-place))" class="RktValLink" pltdoc="x">dynamic-place</a></span>), <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-wait))" class="RktValLink" pltdoc="x">place-wait</a></span> returns only when
the pumping threads have completed.  </p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/place..rkt)._place-dead-evt))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-dead-evt))" class="RktValLink" pltdoc="x">place-dead-evt</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="sync.html#(def._((quote._~23~25kernel)._evt~3f))" class="RktValLink" pltdoc="x">evt?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place~3f))" class="RktValLink" pltdoc="x">place?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a <a href="sync.html#(tech._synchronizable._event)" class="techoutside" pltdoc="x"><span class="techinside">synchronizable event</span></a> (see <a href="sync.html" pltdoc="x">Events</a>) that is
ready if and only if <span class="RktVar">p</span> has terminated.</div></p><p>If any pumping threads were created to connect a non-<a href="file-ports.html#(tech._file._stream._port)" class="techoutside" pltdoc="x"><span class="techinside">file-stream
port</span></a> to the ports in the place for <span class="RktVar">p</span> (see
  <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._dynamic-place))" class="RktValLink" pltdoc="x">dynamic-place</a></span>), the event returned by
  <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-dead-evt))" class="RktValLink" pltdoc="x">place-dead-evt</a></span> may become ready even if a pumping thread is
  still running.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/place..rkt)._place-kill))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-kill))" class="RktValLink" pltdoc="x">place-kill</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place~3f))" class="RktValLink" pltdoc="x">place?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Immediately terminates the place, setting the place&rsquo;s
<a href="#(tech._completion._value)" class="techoutside" pltdoc="x"><span class="techinside">completion value</span></a> to <span class="RktVal">1</span> if the place does not have a
completion value already.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/place..rkt)._place-break))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-break))" class="RktValLink" pltdoc="x">place-break</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">p</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">p</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place~3f))" class="RktValLink" pltdoc="x">place?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Sends place <span class="RktVar">p</span> a break signal; see <a href="breakhandler.html" pltdoc="x">Breaks</a>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/place..rkt)._place-channel))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel))" class="RktValLink" pltdoc="x">place-channel</a></span></span><span class="RktPn"></span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0"><tr><td><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel~3f))" class="RktValLink" pltdoc="x">place-channel?</a></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel~3f))" class="RktValLink" pltdoc="x">place-channel?</a></span></td></tr></table></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Returns two <a href="#(tech._place._channel)" class="techoutside" pltdoc="x"><span class="techinside">place channels</span></a>. Data sent through the first
channel can be received through the second channel, and data sent
through the second channel can be received from the first.</div></p><p>Typically, one place channel is used by the current <a href="#(tech._place)" class="techoutside" pltdoc="x"><span class="techinside">place</span></a> to
send messages to a destination <a href="#(tech._place)" class="techoutside" pltdoc="x"><span class="techinside">place</span></a>; the other place channel
is sent to the destination <a href="#(tech._place)" class="techoutside" pltdoc="x"><span class="techinside">place</span></a> (via an existing <a href="#(tech._place._channel)" class="techoutside" pltdoc="x"><span class="techinside">place
channel</span></a>).</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/place..rkt)._place-channel-put))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel-put))" class="RktValLink" pltdoc="x">place-channel-put</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pch</span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void))" class="RktValLink" pltdoc="x">void</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pch</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel~3f))" class="RktValLink" pltdoc="x">place-channel?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-message-allowed~3f))" class="RktValLink" pltdoc="x">place-message-allowed?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Sends a message <span class="RktVar">v</span> on channel <span class="RktVar">pch</span>. Since place channels
 are asynchronous, <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel-put))" class="RktValLink" pltdoc="x">place-channel-put</a></span> calls are non-blocking.</div></p><p>See <span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-message-allowed~3f))" class="RktValLink" pltdoc="x">place-message-allowed?</a></span> form information on automatic
coercions in <span class="RktVar">v</span>, such as converting a mutable string to an
immutable string.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/place..rkt)._place-channel-get))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel-get))" class="RktValLink" pltdoc="x">place-channel-get</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pch</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-message-allowed~3f))" class="RktValLink" pltdoc="x">place-message-allowed?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pch</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel~3f))" class="RktValLink" pltdoc="x">place-channel?</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a message received on channel <span class="RktVar">pch</span>, blocking until a
message is available.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/place..rkt)._place-channel-put/get))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel-put/get))" class="RktValLink" pltdoc="x">place-channel-put/get</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">pch</span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">pch</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-channel~3f))" class="RktValLink" pltdoc="x">place-channel?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Sends an immutable message <span class="RktVar">v</span> on channel <span class="RktVar">pch</span> and then
waits for a message (perhaps a reply) on the same channel.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><span class="RktPn">(</span><a name="(def._((lib._racket/place..rkt)._place-message-allowed~3f))"></a><span title="Provided from: racket/place, racket"><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-message-allowed~3f))" class="RktValLink" pltdoc="x">place-message-allowed?</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">v</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="booleans.html#(def._((quote._~23~25kernel)._boolean~3f))" class="RktValLink" pltdoc="x">boolean?</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">v</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._any/c))" class="RktValLink" pltdoc="x">any/c</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns <span class="RktVal">#t</span> if <span class="RktVar">v</span> is allowed as a message on a place channel,
<span class="RktVal">#f</span> otherwise.</div></p><p>If <span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._racket/place..rkt)._place-enabled~3f))" class="RktValLink" pltdoc="x">place-enabled?</a></span><span class="RktPn">)</span> returns <span class="RktVal">#f</span>, then the result is
always <span class="RktVal">#t</span> and no conversions are performed on <span class="RktVar">v</span> as a
message. Otherwise, the following kinds of data are allowed as
messages:</p><ul><li><p><a href="numbers.html#(tech._number)" class="techoutside" pltdoc="x"><span class="techinside">numbers</span></a>, <a href="characters.html#(tech._character)" class="techoutside" pltdoc="x"><span class="techinside">characters</span></a>, <a href="booleans.html#(tech._boolean)" class="techoutside" pltdoc="x"><span class="techinside">booleans</span></a>, and
<a href="../guide/void_undefined.html" class="RktModLink" pltdoc="x"><span class="nobreak"><span class="RktRes">#&lt;void&gt;</span></span></a>;</p></li><li><p><a href="symbols.html#(tech._symbol)" class="techoutside" pltdoc="x"><span class="techinside">symbols</span></a> that are <a href="reader.html#(tech._interned)" class="techoutside" pltdoc="x"><span class="techinside">interned</span></a>;</p></li><li><p><a href="strings.html#(tech._string)" class="techoutside" pltdoc="x"><span class="techinside">strings</span></a> and <a href="bytestrings.html#(tech._byte._string)" class="techoutside" pltdoc="x"><span class="techinside">byte strings</span></a>, where mutable strings
and byte strings are automatically replaced by immutable
variants;</p></li><li><p><a href="pairs.html#(tech._pair)" class="techoutside" pltdoc="x"><span class="techinside">pairs</span></a>, <a href="pairs.html#(tech._list)" class="techoutside" pltdoc="x"><span class="techinside">lists</span></a>, <a href="vectors.html#(tech._vector)" class="techoutside" pltdoc="x"><span class="techinside">vectors</span></a>, and immutable
<a href="structures.html#(tech._prefab)" class="techoutside" pltdoc="x"><span class="techinside">prefab</span></a> structures containing message-allowed values,
where a mutable vector is automatically replaced by an
immutable vector;</p></li><li><p><a href="#(tech._place._channel)" class="techoutside" pltdoc="x"><span class="techinside">place channels</span></a>, where a <a href="#(tech._place._descriptor)" class="techoutside" pltdoc="x"><span class="techinside">place descriptor</span></a> is
automatically replaced by a plain place channel;</p></li><li><p>foreign pointers such as <span class="RktVar">cpointers</span> and
cstructs;</p></li><li><p>file ports and tcp ports, the underlying
file descriptor is dupped and a new port is created with the
dupped file descriptor in the destination place; and</p></li><li><p>values produced by <span class="RktSym"><a href="flonums.html#(def._((lib._racket/flonum..rkt)._shared-flvector))" class="RktValLink" pltdoc="x">shared-flvector</a></span>,
<span class="RktSym"><a href="flonums.html#(def._((lib._racket/flonum..rkt)._make-shared-flvector))" class="RktValLink" pltdoc="x">make-shared-flvector</a></span>, <span class="RktSym"><a href="fixnums.html#(def._((lib._racket/fixnum..rkt)._shared-fxvector))" class="RktValLink" pltdoc="x">shared-fxvector</a></span>,
<span class="RktSym"><a href="fixnums.html#(def._((lib._racket/fixnum..rkt)._make-shared-fxvector))" class="RktValLink" pltdoc="x">make-shared-fxvector</a></span>, <span class="RktSym"><a href="bytestrings.html#(def._((quote._~23~25kernel)._shared-bytes))" class="RktValLink" pltdoc="x">shared-bytes</a></span>, and
<span class="RktSym"><a href="bytestrings.html#(def._((quote._~23~25kernel)._make-shared-bytes))" class="RktValLink" pltdoc="x">make-shared-bytes</a></span>.</p></li></ul><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.2.1&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.2.1&quot;);">top</a></span><span class="navright"><a href="futures.html" title="backward to &quot;10.4 Futures&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="concurrency.html" title="up to &quot;10 Concurrency and Parallelism&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Macros.html" title="forward to &quot;11 Macros&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>